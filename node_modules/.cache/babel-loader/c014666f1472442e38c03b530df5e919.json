{"ast":null,"code":"import { toRefs as e, ref as t, watch as i, computed as a, defineComponent as r, onMounted as l, nextTick as o, openBlock as c, createElementBlock as n, withKeys as v, withModifiers as u, Fragment as s, renderList as m, normalizeClass as p, renderSlot as d, normalizeProps as k, guardReactiveProps as h, createTextVNode as f, toDisplayString as g, createElementVNode as b, resolveComponent as y, createBlock as x } from \"vue\";\nimport { u as I } from \"./useSyncProp.js\";\nimport { a as w, u as C } from \"./useFocus.js\";\nimport { s as F } from \"./style-inject.es.js\";\nimport { s as P, u as N } from \"./cStatefulMixin.js\";\nimport { u as A, a as M } from \"./useForm.js\";\n\nconst safeModelValue = e => e.value ? e.value : new Date(new Date().setHours(0, 0, 0, 0)),\n      createNumbersArray = e => Array.from(Array(e).keys()),\n      from24to12 = e => (0 === e ? 12 : e) - 12 * Number(e > 12),\n      createHoursColumn = (e, t, i) => {\n  const r = a(() => e.ampm ? 12 : 24),\n        l = a(() => {\n    let t = createNumbersArray(r.value);\n    return e.hoursFilter && (t = t.filter(t => e.hoursFilter(e.ampm ? t + 12 * Number(i.value) : t))), t.map(t => e.ampm ? from24to12(t) : t);\n  }),\n        o = a({\n    get: () => {\n      if (!t.value) return -1;\n\n      if (e.ampm) {\n        const e = from24to12(t.value.getHours() - 12 * Number(i.value));\n        return l.value.findIndex(t => t === e);\n      }\n\n      const a = t.value.getHours();\n      return l.value.findIndex(e => e === a);\n    },\n    set: a => {\n      if (e.readonly) return;\n      const r = e.ampm ? ((e, t = !1) => (12 === e ? 0 : e) + 12 * Number(t))(l.value[a], i.value) : l.value[a];\n      t.value = new Date(safeModelValue(t).setHours(r));\n    }\n  });\n  return a(() => ({\n    items: l.value,\n    activeItem: o\n  }));\n},\n      useTimePicker = (r, l) => {\n  const {\n    view: o\n  } = e(r),\n        c = t(!1);\n  i(l, () => {\n    c.value = safeModelValue(l).getHours() >= 12;\n  }, {\n    immediate: !0\n  });\n\n  const n = createHoursColumn(r, l, c),\n        v = ((e, t) => {\n    const i = a(() => {\n      const t = createNumbersArray(60);\n      return e.minutesFilter ? t.filter(e.minutesFilter) : t;\n    }),\n          r = a({\n      get: () => {\n        if (!t.value) return -1;\n        const e = t.value.getMinutes();\n        return i.value.findIndex(t => t === e);\n      },\n      set: a => {\n        if (e.readonly) return;\n        const r = i.value[a];\n        t.value = new Date(safeModelValue(t).setMinutes(r));\n      }\n    });\n    return a(() => ({\n      items: i.value,\n      activeItem: r\n    }));\n  })(r, l),\n        u = ((e, t) => {\n    const i = a(() => {\n      const t = createNumbersArray(60);\n      return e.secondsFilter ? t.filter(e.secondsFilter) : t;\n    }),\n          r = a({\n      get: () => {\n        if (!t.value) return -1;\n        const e = t.value.getSeconds();\n        return i.value.findIndex(t => t === e);\n      },\n      set: a => {\n        if (e.readonly) return;\n        const r = i.value[a];\n        t.value = new Date(safeModelValue(t).setSeconds(r));\n      }\n    });\n    return a(() => ({\n      items: i.value,\n      activeItem: r\n    }));\n  })(r, l),\n        s = ((e, t, i) => a(() => ({\n    items: [\"AM\", \"PM\"],\n    activeItem: a({\n      get: () => t.value ? Number(i.value) : -1,\n      set: a => {\n        i.value = Boolean(a);\n        const r = safeModelValue(t).getHours();\n        let l = i.value ? r + 12 : r;\n        i.value && r <= 12 && (l = r + 12), !i.value && r >= 12 && (l = r - 12);\n        const o = !e.hoursFilter || e.hoursFilter(l);\n        e.periodUpdatesModelValue && o && (t.value = new Date(safeModelValue(t).setHours(l)));\n      }\n    })\n  })))(r, l, c);\n\n  return {\n    columns: a(() => {\n      const e = [];\n      return \"hours\" === o.value ? e.push(n.value) : \"minutes\" === o.value ? e.push(n.value, v.value) : \"seconds\" === o.value && e.push(n.value, v.value, u.value), r.ampm && !r.hidePeriodSwitch && e.push(s.value), e;\n    }),\n    isPM: c\n  };\n};\n\nvar T = r({\n  name: \"VaTimePickerColumn\",\n  props: {\n    items: {\n      type: Array,\n      default: () => []\n    },\n    activeItemIndex: {\n      type: Number,\n      default: 0\n    }\n  },\n  emits: [\"item-selected\", \"update:activeItemIndex\", ...w],\n\n  setup(e, {\n    emit: a\n  }) {\n    const r = t();\n    C(r, a);\n    const [c] = I(\"activeItemIndex\", e, a);\n    i(c, e => {\n      scrollTo(e);\n    }), l(() => scrollTo(c.value, !1));\n\n    const scrollTo = (e, t = !0) => {\n      o(() => {\n        var i, a;\n        const l = r.value.children[e];\n        l ? null === (a = r.value) || void 0 === a || a.scrollTo({\n          behavior: t ? \"smooth\" : \"auto\",\n          top: l.offsetTop - l.parentElement.offsetTop\n        }) : null === (i = r.value) || void 0 === i || i.scrollTo({\n          behavior: t ? \"smooth\" : \"auto\",\n          top: 0\n        });\n      });\n    };\n\n    return {\n      rootElement: r,\n      makeActiveNext: t => {\n        c.value = (c.value + (t || 1)) % e.items.length, o(() => scrollTo(c.value));\n      },\n      makeActivePrev: t => {\n        c.value = (c.value - (t || 1) + e.items.length) % e.items.length, o(() => scrollTo(c.value));\n      },\n      makeActiveByIndex: e => {\n        c.value = e, o(() => scrollTo(c.value));\n      },\n      onCellClick: e => {\n        c.value = e;\n      },\n      formatCell: e => Number.isInteger(e) ? e < 10 ? `0${e}` : `${e}` : e\n    };\n  },\n\n  methods: {\n    focus() {\n      var e;\n      null === (e = this.rootElement) || void 0 === e || e.focus();\n    },\n\n    blur() {\n      var e;\n      null === (e = this.rootElement) || void 0 === e || e.blur();\n    }\n\n  }\n});\nconst V = b(\"div\", {\n  class: \"va-time-picker-cell va-time-picker-cell--fake\"\n}, null, -1),\n      j = [\"onClick\"],\n      D = b(\"div\", {\n  class: \"va-time-picker-cell va-time-picker-cell--fake\"\n}, null, -1);\nF('.va-time-picker-column{--va-time-picker-column-border-right:1px solid var(--va-divider);--va-time-picker-cell-height:30px;--va-time-picker-cell-width:40px;--va-time-picker-cell-cursor:pointer;--va-time-picker-cell-active-background:var(--va-primary);--va-time-picker-cell-active-color:var(--va-primary);--va-time-picker-cell-background-color-hover:var(--va-background-color-hover);--va-time-picker-cell-active-background-opacity:0;--va-time-picker-cell-active-background-opacity-hover:0.1;-ms-overflow-style:none;border-right:var(--va-time-picker-column-border-right);height:100%;overflow-y:scroll;scrollbar-width:none}.va-time-picker-column::-webkit-scrollbar{display:none}.va-time-picker-column:last-child{border-right:0}.va-time-picker-column .va-time-picker-cell{cursor:var(--va-time-picker-cell-cursor);height:var(--va-time-picker-cell-height);line-height:var(--va-time-picker-cell-height);text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:var(--va-time-picker-cell-width)}.va-time-picker-column .va-time-picker-cell--active{color:var(--va-time-picker-cell-active-color);position:relative;z-index:0}.va-time-picker-column .va-time-picker-cell--active:before{background:var(--va-time-picker-cell-active-background);content:\"\";height:100%;left:0;opacity:var(--va-time-picker-cell-active-background-opacity);position:absolute;right:0;width:100%;z-index:-1}.va-time-picker-column .va-time-picker-cell--fake{visibility:hidden}.va-time-picker-column .va-time-picker-cell--fake:last-child{height:calc(100% - var(--va-time-picker-cell-height)*2)}.va-time-picker-column .va-time-picker-cell:hover{background:var(--va-time-picker-cell-background-color-hover)}.va-time-picker-column:focus .va-time-picker-cell--active:before{opacity:var(--va-time-picker-cell-active-background-opacity-hover)}'), T.render = function render$1(e, t, i, a, r, l) {\n  return c(), n(\"div\", {\n    tabindex: \"0\",\n    class: \"va-time-picker-column\",\n    onKeydown: [t[0] || (t[0] = v(u(t => e.makeActiveNext(), [\"stop\", \"prevent\"]), [\"down\"])), t[1] || (t[1] = v(u(t => e.makeActiveNext(5), [\"stop\", \"prevent\"]), [\"space\"])), t[2] || (t[2] = v(u(t => e.makeActivePrev(), [\"stop\", \"prevent\"]), [\"up\"]))],\n    ref: \"rootElement\"\n  }, [V, (c(!0), n(s, null, m(e.items, (t, i) => (c(), n(\"div\", {\n    key: t,\n    class: p({\n      \"va-time-picker-cell\": !0,\n      \"va-time-picker-cell--active\": i === e.$props.activeItemIndex\n    }),\n    onClick: t => e.onCellClick(i)\n  }, [d(e.$slots, \"cell\", k(h({\n    item: t,\n    index: i,\n    activeItemIndex: e.activeItemIndex,\n    items: e.items,\n    formattedItem: e.formatCell(t)\n  })), () => [f(g(e.formatCell(t)), 1)])], 10, j))), 128)), D], 544);\n}, T.__file = \"src/components/va-time-picker/components/VaTimePickerColumn.vue\";\nvar H = r({\n  name: \"VaTimePicker\",\n  components: {\n    VaTimePickerColumn: T\n  },\n  props: { ...P.props,\n    ...A,\n    modelValue: {\n      type: Date,\n      required: !1\n    },\n    ampm: {\n      type: Boolean,\n      default: !1\n    },\n    hidePeriodSwitch: {\n      type: Boolean,\n      default: !1\n    },\n    periodUpdatesModelValue: {\n      type: Boolean,\n      default: !0\n    },\n    view: {\n      type: String,\n      default: \"minutes\"\n    },\n    hoursFilter: {\n      type: Function\n    },\n    minutesFilter: {\n      type: Function\n    },\n    secondsFilter: {\n      type: Function\n    }\n  },\n  emits: [...P.emits],\n\n  setup(e, {\n    emit: i\n  }) {\n    const {\n      valueComputed: a\n    } = N(e, i),\n          {\n      columns: r,\n      isPM: o\n    } = useTimePicker(e, a),\n          c = t([]),\n          n = t(),\n          focus = (e = 0) => {\n      var t;\n      null === (t = c.value[e]) || void 0 === t || t.focus();\n    },\n          {\n      createComputedClass: v\n    } = M(e),\n          u = v(\"va-time-picker\");\n\n    return l(() => {\n      focus();\n    }), {\n      columns: r,\n      computedClass: u,\n      isPM: o,\n      pickers: c,\n      focusNext: () => {\n        const e = ((null == n ? void 0 : n.value) || 0) + 1;\n        n.value = e % r.value.length, focus(n.value);\n      },\n      focusPrev: () => {\n        const e = ((null == n ? void 0 : n.value) || 0) - 1 + r.value.length;\n        n.value = e % r.value.length, focus(n.value);\n      },\n      activeColumnIndex: n\n    };\n  },\n\n  methods: {\n    focus(e = 0) {\n      var t;\n      null === (t = this.pickers[e]) || void 0 === t || t.focus();\n    },\n\n    blur(e) {\n      var t;\n      e ? null === (t = this.pickers[e]) || void 0 === t || t.blur() : this.pickers.value.forEach(e => null == e ? void 0 : e.blur());\n    }\n\n  }\n});\nF('.va-time-picker{--va-time-picker-display:inline-flex;--va-time-picker-height:200px;--va-time-picker-disabled-opacity:0.4;display:var(--va-time-picker-display);font-family:var(--va-font-family);height:var(--va-time-picker-height);justify-content:center;overflow:hidden}.va-time-picker--readonly{position:relative}.va-time-picker--readonly:after{content:\"\";height:100%;position:absolute;width:100%;z-index:1}.va-time-picker--disabled{opacity:var(--va-time-picker-disabled-opacity);position:relative}.va-time-picker--disabled:after{content:\"\";height:100%;position:absolute;width:100%;z-index:1}'), H.render = function render(e, t, i, a, r, l) {\n  const o = y(\"VaTimePickerColumn\");\n  return c(), n(\"div\", {\n    class: p([\"va-time-picker\", e.computedClass])\n  }, [(c(!0), n(s, null, m(e.columns, (i, a) => (c(), x(o, {\n    key: a,\n    ref: t => e.pickers.push(t),\n    items: i.items,\n    tabindex: e.disabled ? -1 : 0,\n    activeItemIndex: i.activeItem.value,\n    \"onUpdate:activeItemIndex\": e => i.activeItem.value = e,\n    onKeydown: [t[0] || (t[0] = v(u(t => e.focusNext(), [\"stop\", \"prevent\"]), [\"right\"])), t[1] || (t[1] = v(u(t => e.focusNext(), [\"exact\", \"stop\", \"prevent\"]), [\"tab\"])), t[2] || (t[2] = v(u(t => e.focusPrev(), [\"stop\", \"prevent\"]), [\"left\"])), t[3] || (t[3] = v(u(t => e.focusPrev(), [\"shift\", \"stop\", \"prevent\"]), [\"tab\"]))],\n    onFocus: t => e.activeColumnIndex = a\n  }, null, 8, [\"items\", \"tabindex\", \"activeItemIndex\", \"onUpdate:activeItemIndex\", \"onFocus\"]))), 128))], 2);\n}, H.__file = \"src/components/va-time-picker/VaTimePicker.vue\";\nexport { H as s };","map":{"version":3,"mappings":"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","names":["safeModelValue","m","value","Date","setHours","createNumbersArray","length","Array","from","keys","from24to12","h","Number","createHoursColumn","props","modelValue","isPM","computedSize","computed","ampm","items","array","hoursFilter","filter","i","map","n","activeItem","get","getHours","findIndex","set","newIndex","readonly","hours","isAM","useTimePicker","view","toRefs","ref","watch","immediate","hoursColumn","minutesColumn","minutesFilter","getMinutes","v","setMinutes","secondsColumn","secondsFilter","s","getSeconds","setSeconds","periodColumn","val","Boolean","h24","isValidFilteredHour","periodUpdatesModelValue","columns","push","hidePeriodSwitch","defineComponent","name","type","default","activeItemIndex","emits","useFocusEmits","setup","emit","rootElement","useFocus","syncActiveItemIndex","useSyncProp","newVal","scrollTo","onMounted","index","animate","nextTick","element","children","behavior","top","offsetTop","parentElement","makeActiveNext","times","makeActivePrev","makeActiveByIndex","onCellClick","formatCell","isInteger","methods","focus","this","blur","_createElementVNode","class","j","D","F","_createElementBlock","tabindex","onKeydown","_ctx","_hoisted_1","item","key","onClick","_renderSlot","_hoisted_3","components","VaTimePickerColumn","statefulComponentOptions","useFormProps","required","String","Function","valueComputed","useStateful","pickers","activeColumnIndex","idx","createComputedClass","useForm","computedClass","focusNext","nextIndex","focusPrev","forEach","el","column","_createBlock","onFocus"],"sources":["../../src/components/va-time-picker/hooks/useTimePicker.ts","../../src/components/va-time-picker/components/VaTimePickerColumn.vue","../../src/components/va-time-picker/components/VaTimePickerColumn.vue?vue&type=template&id=2e90f122&lang.js","../../src/components/va-time-picker/VaTimePicker.vue","../../src/components/va-time-picker/VaTimePicker.vue?vue&type=template&id=a2549b6e&lang.js"],"sourcesContent":["import { computed, ref, Ref, toRefs, watch } from 'vue'\n\ninterface TimePickerProps {\n  ampm: boolean;\n  hidePeriodSwitch: boolean;\n  periodUpdatesModelValue: boolean;\n  view: 'hours' | 'minutes' | 'seconds';\n  modelValue?: Date;\n  hoursFilter?: (h: number) => boolean,\n  minutesFilter?: (h: number) => boolean\n  secondsFilter?: (h: number) => boolean\n\n  readonly?: boolean;\n}\n\ntype ModelValueRef = Ref<Date | null | undefined>\n\n// Use safeModelValue if we need to update model value\nconst safeModelValue = (m: ModelValueRef) => m.value ? m.value : new Date(new Date().setHours(0, 0, 0, 0))\n\nconst createNumbersArray = (length: number) => Array\n  .from(Array(length).keys())\n\n/**\n * Convert 00:00 -> 12:00 am, 00:01 -> 01:00 am.\n * So we need to changed 12 and 0 between two formats\n */\nconst from24to12 = (h: number) => (h === 0 ? 12 : h) - Number(h > 12) * 12\nconst from12to24 = (h: number, isAM = false) => (h === 12 ? 0 : h) + Number(isAM) * 12\n\nconst createHoursColumn = (props: TimePickerProps, modelValue: ModelValueRef, isPM: Ref<boolean>) => {\n  const computedSize = computed(() => props.ampm ? 12 : 24)\n\n  const items = computed(() => {\n    let array = createNumbersArray(computedSize.value)\n\n    if (props.hoursFilter) {\n      array = array.filter((i) => props.hoursFilter!(props.ampm ? i + 12 * Number(isPM.value) : i))\n    }\n\n    return array.map((n) => {\n      return props.ampm ? from24to12(n) : n\n    })\n  })\n\n  const activeItem = computed({\n    get: () => {\n      if (!modelValue.value) { return -1 }\n\n      if (props.ampm) {\n        const h = from24to12(modelValue.value.getHours() - 12 * Number(isPM.value))\n        return items.value.findIndex((i) => i === h)\n      }\n\n      const h = modelValue.value.getHours()\n\n      return items.value.findIndex((i) => i === h)\n    },\n    set: (newIndex) => {\n      if (props.readonly) { return }\n\n      const hours = props.ampm ? from12to24(items.value[newIndex], isPM.value) : items.value[newIndex]\n\n      modelValue.value = new Date(safeModelValue(modelValue).setHours(hours))\n    },\n  })\n\n  return computed(() => ({\n    items: items.value,\n    activeItem: activeItem,\n  }))\n}\n\nconst createMinutesColumn = (props: TimePickerProps, modelValue: ModelValueRef) => {\n  const items = computed(() => {\n    const array = createNumbersArray(60)\n\n    if (!props.minutesFilter) { return array }\n\n    return array.filter(props.minutesFilter)\n  })\n\n  const activeItem = computed({\n    get: () => {\n      if (!modelValue.value) { return -1 }\n\n      const m = modelValue.value.getMinutes()\n\n      return items.value.findIndex((i) => i === m)\n    },\n    set: (newIndex) => {\n      if (props.readonly) { return }\n\n      const v = items.value[newIndex]\n\n      modelValue.value = new Date(safeModelValue(modelValue).setMinutes(v))\n    },\n  })\n\n  return computed(() => ({\n    items: items.value,\n    activeItem: activeItem,\n  }))\n}\n\nconst createSecondsColumn = (props: TimePickerProps, modelValue:ModelValueRef) => {\n  const items = computed(() => {\n    const array = createNumbersArray(60)\n\n    if (!props.secondsFilter) { return array }\n\n    return array.filter(props.secondsFilter)\n  })\n\n  const activeItem = computed({\n    get: () => {\n      if (!modelValue.value) { return -1 }\n\n      const s = modelValue.value.getSeconds()\n\n      return items.value.findIndex((i) => i === s)\n    },\n    set: (newIndex) => {\n      if (props.readonly) { return }\n\n      const v = items.value[newIndex]\n\n      modelValue.value = new Date(safeModelValue(modelValue).setSeconds(v))\n    },\n  })\n\n  return computed(() => ({\n    items: items.value,\n    activeItem: activeItem,\n  }))\n}\n\nconst createPeriodColumn = (props: TimePickerProps, modelValue: ModelValueRef, isPM: Ref<boolean>) => {\n  return computed(() => ({\n    items: ['AM', 'PM'],\n    activeItem: computed({\n      get: () => {\n        if (!modelValue.value) { return -1 }\n        return Number(isPM.value)\n      },\n      set: (val) => {\n        isPM.value = Boolean(val)\n        const h = safeModelValue(modelValue).getHours()\n        let h24 = isPM.value ? h + 12 : h\n\n        if (isPM.value && h <= 12) { h24 = h + 12 }\n        if (!isPM.value && h >= 12) { h24 = h - 12 }\n\n        // If there is no hoursFilter - it must be valid, otherwise validate hours\n        const isValidFilteredHour = !props.hoursFilter || props.hoursFilter(h24)\n\n        if (props.periodUpdatesModelValue && isValidFilteredHour) {\n          modelValue.value = new Date(safeModelValue(modelValue).setHours(h24))\n        }\n      },\n    }),\n  }))\n}\n\nexport const useTimePicker = (props: TimePickerProps, modelValue: ModelValueRef) => {\n  const { view } = toRefs(props)\n\n  const isPM = ref(false)\n  watch(modelValue, () => { isPM.value = safeModelValue(modelValue).getHours() >= 12 }, { immediate: true })\n\n  const hoursColumn = createHoursColumn(props, modelValue, isPM)\n  const minutesColumn = createMinutesColumn(props, modelValue)\n  const secondsColumn = createSecondsColumn(props, modelValue)\n  const periodColumn = createPeriodColumn(props, modelValue, isPM)\n\n  const columns = computed(() => {\n    const array = []\n\n    if (view.value === 'hours') {\n      array.push(hoursColumn.value)\n    } else if (view.value === 'minutes') {\n      array.push(hoursColumn.value, minutesColumn.value)\n    } else if (view.value === 'seconds') {\n      array.push(hoursColumn.value, minutesColumn.value, secondsColumn.value)\n    }\n    if (props.ampm && !props.hidePeriodSwitch) {\n      array.push(periodColumn.value)\n    }\n\n    return array\n  })\n\n  return {\n    columns,\n    isPM,\n  }\n}\n","<template>\n  <div\n    tabindex=\"0\"\n    class=\"va-time-picker-column\"\n    @keydown.down.stop.prevent=\"makeActiveNext()\"\n    @keydown.space.stop.prevent=\"makeActiveNext(5)\"\n    @keydown.up.stop.prevent=\"makeActivePrev()\"\n    ref=\"rootElement\"\n  >\n    <div class=\"va-time-picker-cell va-time-picker-cell--fake\" />\n    <div\n      v-for=\"(item, index) in items\" :key=\"item\"\n      :class=\"{\n        'va-time-picker-cell': true,\n        'va-time-picker-cell--active': index === $props.activeItemIndex\n      }\"\n      @click=\"onCellClick(index)\"\n    >\n      <slot name=\"cell\" v-bind=\"{ item, index, activeItemIndex, items, formattedItem: formatCell(item) }\">\n        {{ formatCell(item) }}\n      </slot>\n    </div>\n    <div class=\"va-time-picker-cell va-time-picker-cell--fake\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, nextTick, onMounted, PropType, ref, watch } from 'vue'\nimport { useSyncProp } from '../../../composables/useSyncProp'\nimport { useFocus, useFocusEmits } from '../../../composables/useFocus'\n\nexport default defineComponent({\n  name: 'VaTimePickerColumn',\n\n  props: {\n    items: { type: Array as PropType<string[] | number[]>, default: () => [] },\n    activeItemIndex: { type: Number, default: 0 },\n  },\n\n  emits: ['item-selected', 'update:activeItemIndex', ...useFocusEmits],\n\n  setup (props, { emit }) {\n    const rootElement = ref<HTMLElement>()\n\n    // Will be used later, after fix 'withConfigTransport'\n    const { focus, blur } = useFocus(rootElement, emit)\n\n    const [syncActiveItemIndex] = useSyncProp('activeItemIndex', props, emit)\n\n    watch(syncActiveItemIndex, (newVal) => { scrollTo(newVal) })\n\n    onMounted(() => scrollTo(syncActiveItemIndex.value, false))\n\n    const scrollTo = (index: number, animate = true) => {\n      nextTick(() => {\n        const children = rootElement.value!.children\n\n        const element = children[index] as HTMLElement\n\n        if (!element) {\n          rootElement.value?.scrollTo({\n            behavior: animate ? 'smooth' : 'auto',\n            top: 0,\n          })\n          return\n        }\n\n        rootElement.value?.scrollTo({\n          behavior: animate ? 'smooth' : 'auto',\n          top: element.offsetTop - element.parentElement!.offsetTop,\n        })\n      })\n    }\n\n    const makeActiveByIndex = (index: number) => {\n      syncActiveItemIndex.value = index\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const makeActiveNext = (times?: number) => {\n      syncActiveItemIndex.value = (syncActiveItemIndex.value + (times || 1)) % props.items.length\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const makeActivePrev = (times?: number) => {\n      syncActiveItemIndex.value = (syncActiveItemIndex.value - (times || 1) + props.items.length) % props.items.length\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const onCellClick = (index: number) => {\n      syncActiveItemIndex.value = index\n    }\n\n    const formatCell = (n: number | string): string => {\n      if (!Number.isInteger(n)) { return n as string }\n\n      return n < 10 ? `0${n}` : `${n}`\n    }\n\n    return {\n      rootElement,\n\n      makeActiveNext,\n      makeActivePrev,\n      makeActiveByIndex,\n\n      onCellClick,\n      formatCell,\n\n      // Will be used later, after fix 'withConfigTransport'\n      // focus,\n      // blur,\n    }\n  },\n\n  // we will use this while we have problem with 'withConfigTransport'\n  methods: {\n    focus () { (this as any).rootElement?.focus() },\n    blur () { (this as any).rootElement?.blur() },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n  @import './_variables.scss';\n\n  @mixin hiddenYScroll {\n    overflow-y: scroll;\n    -ms-overflow-style: none;  /* IE and Edge */\n    scrollbar-width: none;  /* Firefox */\n    &::-webkit-scrollbar { /* WebKit */\n      display: none;\n    }\n  }\n\n  .va-time-picker-column {\n    @include hiddenYScroll();\n\n    height: 100%;\n    border-right: var(--va-time-picker-column-border-right);\n\n    &:last-child {\n      border-right: 0;\n    }\n\n    .va-time-picker-cell {\n      height: var(--va-time-picker-cell-height);\n      line-height: var(--va-time-picker-cell-height);\n      width: var(--va-time-picker-cell-width);\n      text-align: center;\n      cursor: var(--va-time-picker-cell-cursor);\n      user-select: none;\n\n      &--active {\n        position: relative;\n        color: var(--va-time-picker-cell-active-color);\n        z-index: 0;\n\n        &::before {\n          background: var(--va-time-picker-cell-active-background);\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          left: 0;\n          right: 0;\n          content: '';\n          z-index: -1;\n          opacity: var(--va-time-picker-cell-active-background-opacity);\n        }\n      }\n\n      &--fake {\n        visibility: hidden;\n\n        &:last-child {\n          height: calc(100% - var(--va-time-picker-cell-height) * 2);\n        }\n      }\n\n      &:hover {\n        background: var(--va-time-picker-cell-background-color-hover);\n      }\n    }\n\n    &:focus {\n      .va-time-picker-cell {\n        &--active {\n          &::before {\n            opacity: var(--va-time-picker-cell-active-background-opacity-hover);\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div\n    tabindex=\"0\"\n    class=\"va-time-picker-column\"\n    @keydown.down.stop.prevent=\"makeActiveNext()\"\n    @keydown.space.stop.prevent=\"makeActiveNext(5)\"\n    @keydown.up.stop.prevent=\"makeActivePrev()\"\n    ref=\"rootElement\"\n  >\n    <div class=\"va-time-picker-cell va-time-picker-cell--fake\" />\n    <div\n      v-for=\"(item, index) in items\" :key=\"item\"\n      :class=\"{\n        'va-time-picker-cell': true,\n        'va-time-picker-cell--active': index === $props.activeItemIndex\n      }\"\n      @click=\"onCellClick(index)\"\n    >\n      <slot name=\"cell\" v-bind=\"{ item, index, activeItemIndex, items, formattedItem: formatCell(item) }\">\n        {{ formatCell(item) }}\n      </slot>\n    </div>\n    <div class=\"va-time-picker-cell va-time-picker-cell--fake\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, nextTick, onMounted, PropType, ref, watch } from 'vue'\nimport { useSyncProp } from '../../../composables/useSyncProp'\nimport { useFocus, useFocusEmits } from '../../../composables/useFocus'\n\nexport default defineComponent({\n  name: 'VaTimePickerColumn',\n\n  props: {\n    items: { type: Array as PropType<string[] | number[]>, default: () => [] },\n    activeItemIndex: { type: Number, default: 0 },\n  },\n\n  emits: ['item-selected', 'update:activeItemIndex', ...useFocusEmits],\n\n  setup (props, { emit }) {\n    const rootElement = ref<HTMLElement>()\n\n    // Will be used later, after fix 'withConfigTransport'\n    const { focus, blur } = useFocus(rootElement, emit)\n\n    const [syncActiveItemIndex] = useSyncProp('activeItemIndex', props, emit)\n\n    watch(syncActiveItemIndex, (newVal) => { scrollTo(newVal) })\n\n    onMounted(() => scrollTo(syncActiveItemIndex.value, false))\n\n    const scrollTo = (index: number, animate = true) => {\n      nextTick(() => {\n        const children = rootElement.value!.children\n\n        const element = children[index] as HTMLElement\n\n        if (!element) {\n          rootElement.value?.scrollTo({\n            behavior: animate ? 'smooth' : 'auto',\n            top: 0,\n          })\n          return\n        }\n\n        rootElement.value?.scrollTo({\n          behavior: animate ? 'smooth' : 'auto',\n          top: element.offsetTop - element.parentElement!.offsetTop,\n        })\n      })\n    }\n\n    const makeActiveByIndex = (index: number) => {\n      syncActiveItemIndex.value = index\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const makeActiveNext = (times?: number) => {\n      syncActiveItemIndex.value = (syncActiveItemIndex.value + (times || 1)) % props.items.length\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const makeActivePrev = (times?: number) => {\n      syncActiveItemIndex.value = (syncActiveItemIndex.value - (times || 1) + props.items.length) % props.items.length\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const onCellClick = (index: number) => {\n      syncActiveItemIndex.value = index\n    }\n\n    const formatCell = (n: number | string): string => {\n      if (!Number.isInteger(n)) { return n as string }\n\n      return n < 10 ? `0${n}` : `${n}`\n    }\n\n    return {\n      rootElement,\n\n      makeActiveNext,\n      makeActivePrev,\n      makeActiveByIndex,\n\n      onCellClick,\n      formatCell,\n\n      // Will be used later, after fix 'withConfigTransport'\n      // focus,\n      // blur,\n    }\n  },\n\n  // we will use this while we have problem with 'withConfigTransport'\n  methods: {\n    focus () { (this as any).rootElement?.focus() },\n    blur () { (this as any).rootElement?.blur() },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n  @import './_variables.scss';\n\n  @mixin hiddenYScroll {\n    overflow-y: scroll;\n    -ms-overflow-style: none;  /* IE and Edge */\n    scrollbar-width: none;  /* Firefox */\n    &::-webkit-scrollbar { /* WebKit */\n      display: none;\n    }\n  }\n\n  .va-time-picker-column {\n    @include hiddenYScroll();\n\n    height: 100%;\n    border-right: var(--va-time-picker-column-border-right);\n\n    &:last-child {\n      border-right: 0;\n    }\n\n    .va-time-picker-cell {\n      height: var(--va-time-picker-cell-height);\n      line-height: var(--va-time-picker-cell-height);\n      width: var(--va-time-picker-cell-width);\n      text-align: center;\n      cursor: var(--va-time-picker-cell-cursor);\n      user-select: none;\n\n      &--active {\n        position: relative;\n        color: var(--va-time-picker-cell-active-color);\n        z-index: 0;\n\n        &::before {\n          background: var(--va-time-picker-cell-active-background);\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          left: 0;\n          right: 0;\n          content: '';\n          z-index: -1;\n          opacity: var(--va-time-picker-cell-active-background-opacity);\n        }\n      }\n\n      &--fake {\n        visibility: hidden;\n\n        &:last-child {\n          height: calc(100% - var(--va-time-picker-cell-height) * 2);\n        }\n      }\n\n      &:hover {\n        background: var(--va-time-picker-cell-background-color-hover);\n      }\n    }\n\n    &:focus {\n      .va-time-picker-cell {\n        &--active {\n          &::before {\n            opacity: var(--va-time-picker-cell-active-background-opacity-hover);\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"va-time-picker\" :class=\"computedClass\">\n    <VaTimePickerColumn\n      v-for=\"(column, idx) in columns\" :key=\"idx\"\n      :ref=\"(el) => pickers.push(el)\"\n      :items=\"column.items\"\n      :tabindex=\"disabled ? -1 : 0\"\n      v-model:activeItemIndex=\"column.activeItem.value\"\n      @keydown.right.stop.prevent=\"focusNext()\"\n      @keydown.tab.exact.stop.prevent=\"focusNext()\"\n      @keydown.left.stop.prevent=\"focusPrev()\"\n      @keydown.shift.tab.stop.prevent=\"focusPrev()\"\n      @focus=\"activeColumnIndex = idx\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, PropType, ref } from 'vue'\nimport { useTimePicker } from './hooks/useTimePicker'\nimport VaTimePickerColumn from './components/VaTimePickerColumn.vue'\nimport { useStateful, statefulComponentOptions } from '../../mixins/StatefulMixin/cStatefulMixin'\nimport { useFormProps, useForm } from '../../composables/useForm'\n\nexport default defineComponent({\n  name: 'VaTimePicker',\n\n  components: { VaTimePickerColumn },\n\n  props: {\n    ...statefulComponentOptions.props,\n    ...useFormProps,\n    modelValue: { type: Date, required: false },\n    ampm: { type: Boolean, default: false },\n    hidePeriodSwitch: { type: Boolean, default: false },\n    periodUpdatesModelValue: { type: Boolean, default: true }, // Update model value when switching period automatically\n    view: { type: String as PropType<'hours' | 'minutes' | 'seconds'>, default: 'minutes' },\n    hoursFilter: { type: Function as PropType<(h: number) => boolean> },\n    minutesFilter: { type: Function as PropType<(h: number) => boolean> },\n    secondsFilter: { type: Function as PropType<(h: number) => boolean> },\n  },\n\n  emits: [...statefulComponentOptions.emits],\n\n  setup (props, { emit }) {\n    const { valueComputed } = useStateful(props, emit)\n    const { columns, isPM } = useTimePicker(props, valueComputed)\n\n    const pickers = ref<(InstanceType<typeof VaTimePickerColumn> | undefined)[]>([])\n\n    const activeColumnIndex = ref<number | undefined>()\n\n    const focus = (idx = 0): void => {\n      pickers.value[idx]?.focus()\n    }\n\n    const blur = (idx?: number): void => {\n      idx ? pickers.value[idx]?.blur() : pickers.value.forEach((el) => el?.blur())\n    }\n\n    const { createComputedClass } = useForm(props)\n\n    const computedClass = createComputedClass('va-time-picker')\n\n    const focusNext = () => {\n      const nextIndex = (activeColumnIndex?.value || 0) + 1\n      activeColumnIndex.value = nextIndex % columns.value.length\n      focus(activeColumnIndex.value)\n    }\n\n    const focusPrev = () => {\n      const nextIndex = (activeColumnIndex?.value || 0) - 1 + columns.value.length\n      activeColumnIndex.value = nextIndex % columns.value.length\n      focus(activeColumnIndex.value)\n    }\n\n    onMounted(() => { focus() })\n\n    return {\n      columns,\n      computedClass,\n      isPM,\n      pickers,\n\n      focusNext,\n      focusPrev,\n      activeColumnIndex,\n\n      // Will be used later, after fix 'withConfigTransport'\n      // focus,\n      // blur,\n    }\n  },\n\n  // we will use this while we have problem with 'withConfigTransport'\n  methods: {\n    focus (idx = 0) { (this as any).pickers[idx]?.focus() },\n    blur (idx?: number) {\n      idx ? (this as any).pickers[idx]?.blur() : (this as any).pickers.value.forEach((el: any) => el?.blur())\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n  @import './_variables.scss';\n\n  @mixin after-overlay {\n    position: relative;\n\n    &::after {\n      content: '';\n      position: absolute;\n      height: 100%;\n      width: 100%;\n      z-index: 1;\n    }\n  }\n\n  .va-time-picker {\n    display: var(--va-time-picker-display);\n    justify-content: center;\n    overflow: hidden;\n    height: var(--va-time-picker-height);\n    font-family: var(--va-font-family);\n\n    &--readonly {\n      @include after-overlay();\n    }\n\n    &--disabled {\n      @include after-overlay();\n\n      opacity: var(--va-time-picker-disabled-opacity);\n    }\n  }\n</style>\n","<template>\n  <div class=\"va-time-picker\" :class=\"computedClass\">\n    <VaTimePickerColumn\n      v-for=\"(column, idx) in columns\" :key=\"idx\"\n      :ref=\"(el) => pickers.push(el)\"\n      :items=\"column.items\"\n      :tabindex=\"disabled ? -1 : 0\"\n      v-model:activeItemIndex=\"column.activeItem.value\"\n      @keydown.right.stop.prevent=\"focusNext()\"\n      @keydown.tab.exact.stop.prevent=\"focusNext()\"\n      @keydown.left.stop.prevent=\"focusPrev()\"\n      @keydown.shift.tab.stop.prevent=\"focusPrev()\"\n      @focus=\"activeColumnIndex = idx\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, PropType, ref } from 'vue'\nimport { useTimePicker } from './hooks/useTimePicker'\nimport VaTimePickerColumn from './components/VaTimePickerColumn.vue'\nimport { useStateful, statefulComponentOptions } from '../../mixins/StatefulMixin/cStatefulMixin'\nimport { useFormProps, useForm } from '../../composables/useForm'\n\nexport default defineComponent({\n  name: 'VaTimePicker',\n\n  components: { VaTimePickerColumn },\n\n  props: {\n    ...statefulComponentOptions.props,\n    ...useFormProps,\n    modelValue: { type: Date, required: false },\n    ampm: { type: Boolean, default: false },\n    hidePeriodSwitch: { type: Boolean, default: false },\n    periodUpdatesModelValue: { type: Boolean, default: true }, // Update model value when switching period automatically\n    view: { type: String as PropType<'hours' | 'minutes' | 'seconds'>, default: 'minutes' },\n    hoursFilter: { type: Function as PropType<(h: number) => boolean> },\n    minutesFilter: { type: Function as PropType<(h: number) => boolean> },\n    secondsFilter: { type: Function as PropType<(h: number) => boolean> },\n  },\n\n  emits: [...statefulComponentOptions.emits],\n\n  setup (props, { emit }) {\n    const { valueComputed } = useStateful(props, emit)\n    const { columns, isPM } = useTimePicker(props, valueComputed)\n\n    const pickers = ref<(InstanceType<typeof VaTimePickerColumn> | undefined)[]>([])\n\n    const activeColumnIndex = ref<number | undefined>()\n\n    const focus = (idx = 0): void => {\n      pickers.value[idx]?.focus()\n    }\n\n    const blur = (idx?: number): void => {\n      idx ? pickers.value[idx]?.blur() : pickers.value.forEach((el) => el?.blur())\n    }\n\n    const { createComputedClass } = useForm(props)\n\n    const computedClass = createComputedClass('va-time-picker')\n\n    const focusNext = () => {\n      const nextIndex = (activeColumnIndex?.value || 0) + 1\n      activeColumnIndex.value = nextIndex % columns.value.length\n      focus(activeColumnIndex.value)\n    }\n\n    const focusPrev = () => {\n      const nextIndex = (activeColumnIndex?.value || 0) - 1 + columns.value.length\n      activeColumnIndex.value = nextIndex % columns.value.length\n      focus(activeColumnIndex.value)\n    }\n\n    onMounted(() => { focus() })\n\n    return {\n      columns,\n      computedClass,\n      isPM,\n      pickers,\n\n      focusNext,\n      focusPrev,\n      activeColumnIndex,\n\n      // Will be used later, after fix 'withConfigTransport'\n      // focus,\n      // blur,\n    }\n  },\n\n  // we will use this while we have problem with 'withConfigTransport'\n  methods: {\n    focus (idx = 0) { (this as any).pickers[idx]?.focus() },\n    blur (idx?: number) {\n      idx ? (this as any).pickers[idx]?.blur() : (this as any).pickers.value.forEach((el: any) => el?.blur())\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n  @import './_variables.scss';\n\n  @mixin after-overlay {\n    position: relative;\n\n    &::after {\n      content: '';\n      position: absolute;\n      height: 100%;\n      width: 100%;\n      z-index: 1;\n    }\n  }\n\n  .va-time-picker {\n    display: var(--va-time-picker-display);\n    justify-content: center;\n    overflow: hidden;\n    height: var(--va-time-picker-height);\n    font-family: var(--va-font-family);\n\n    &--readonly {\n      @include after-overlay();\n    }\n\n    &--disabled {\n      @include after-overlay();\n\n      opacity: var(--va-time-picker-disabled-opacity);\n    }\n  }\n</style>\n"]},"metadata":{},"sourceType":"module"}