{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { __extends, __awaiter, __generator, __spreadArray } from \"tslib\";\n\nvar Executor = function () {\n  function e(t) {\n    this.runCount = 0, this.wasLastRunFine = !1, this.wasRun = !1, this.wasRunFine = !1, this.wasRunBad = !1, this.command = t;\n  }\n\n  return e.createAndRun = function (t) {\n    t = new e(t);\n    return t.run(), t;\n  }, Object.defineProperty(e.prototype, \"isRunning\", {\n    get: function () {\n      return !!this.runCount;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e.prototype.run = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    this.beforeRun();\n    var n = this.command.apply(this, t);\n    return this.afterRun(n), n;\n  }, e.prototype.beforeRun = function () {\n    this.runCount++;\n  }, e.prototype.afterRun = function (t) {\n    var e = this;\n    t.then(function () {\n      e.runCount--, e.setRunResultFlags(!0);\n    }), t.catch(function () {\n      e.runCount--, e.setRunResultFlags(!1);\n    });\n  }, e.prototype.setRunResultFlags = function (t) {\n    this.wasRun = !0, (this.wasLastRunFine = t) && (this.wasRunFine = !0), t || (this.wasRunBad = !0);\n  }, e;\n}(),\n    CacheExecutor = function (n) {\n  function t() {\n    var t = null !== n && n.apply(this, arguments) || this;\n    return t.cachedPromise = null, t;\n  }\n\n  return __extends(t, n), t.prototype.run = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    return this.cachedPromise || (this.cachedPromise = n.prototype.run.apply(this, t)), this.cachedPromise;\n  }, t.prototype.runFresh = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    return this.cachedPromise = n.prototype.run.apply(this, t), this.cachedPromise;\n  }, t.prototype.cleanCache = function () {\n    this.cachedPromise = null;\n  }, t;\n}(Executor),\n    LadderExecutor = function (r) {\n  function t() {\n    var t = null !== r && r.apply(this, arguments) || this;\n    return t.trigger = null, t;\n  }\n\n  return __extends(t, r), t.prototype.run = function () {\n    for (var e = this, n = [], t = 0; t < arguments.length; t++) n[t] = arguments[t];\n\n    if (this.isRunning) return new Promise(function (t) {\n      e.trigger = function () {\n        return e.run.apply(e, n).then(t);\n      };\n    });\n    var i = r.prototype.run.apply(this, n);\n    return i.then(function () {\n      e.trigger && e.trigger(), e.trigger = null;\n    }), i;\n  }, t;\n}(Executor),\n    DebounceLoader = function () {\n  function t(t, e) {\n    void 0 === e && (e = 3e3), this.identityCheck = {}, this.isWaiting = !1, this.executor = new Executor(t), this.timeout = e;\n  }\n\n  return Object.defineProperty(t.prototype, \"isRunning\", {\n    get: function () {\n      return this.executor.isRunning;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isActive\", {\n    get: function () {\n      return this.isRunning || this.isWaiting;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype.run = function () {\n    for (var e = this, n = [], t = 0; t < arguments.length; t++) n[t] = arguments[t];\n\n    this.isWaiting = !0;\n    var i = this.registerIdentity();\n    setTimeout(function () {\n      var t;\n      e.checkIdentity(i) && (e.isWaiting = !1, (t = e.executor).run.apply(t, n));\n    }, this.timeout);\n  }, t.prototype.reset = function () {\n    this.isWaiting = !1, this.identityCheck = {};\n  }, t.prototype.registerIdentity = function () {\n    return this.identityCheck = {}, this.identityCheck;\n  }, t.prototype.checkIdentity = function (t) {\n    return this.identityCheck === t;\n  }, t;\n}(),\n    RepeatLoader = function () {\n  function t(t, e) {\n    this.time = 100, this.id = null, this.command = t, this.time = e;\n  }\n\n  return t.prototype.start = function () {\n    this.id || (this.id = setInterval(this.command, this.time));\n  }, t.prototype.stop = function () {\n    this.id && clearInterval(this.id), this.id = null;\n  }, t;\n}(),\n    InfiniteLoader = function () {\n  function t(n, t) {\n    var i = this;\n    void 0 === t && (t = 20), this.items = [], this.isFinished = !1, this.isRefreshing = !1, this.perStep = 20, this.pointer = 0, this.isFresh = !0, this.executor = new LadderExecutor(function (e) {\n      return void 0 === e && (e = !1), __awaiter(i, void 0, void 0, function () {\n        return __generator(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.runRequest(n, e)];\n\n            case 1:\n              return [2, t.sent()];\n          }\n        });\n      });\n    }), this.perStep = t;\n  }\n\n  return Object.defineProperty(t.prototype, \"isRunning\", {\n    get: function () {\n      return this.executor.isRunning;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isEmpty\", {\n    get: function () {\n      return !this.executor.isRunning && this.isFinished && 0 === this.items.length;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isFull\", {\n    get: function () {\n      return !this.isFresh && !this.executor.isRunning && !!this.items.length;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype.next = function () {\n    this.executor.run();\n  }, t.prototype.refresh = function () {\n    this.executor.run(!0);\n  }, t.prototype.runRequest = function (n, i) {\n    return void 0 === i && (i = !1), __awaiter(this, void 0, Promise, function () {\n      var e;\n      return __generator(this, function (t) {\n        switch (t.label) {\n          case 0:\n            (i = 0 === this.pointer ? !0 : i) && (this.pointer = 0, this.isFresh = !0, this.isRefreshing = !0, this.isFinished = !1), t.label = 1;\n\n          case 1:\n            return t.trys.push([1, 3, 4, 5]), [4, n(this.pointer, this.perStep)];\n\n          case 2:\n            return (e = t.sent(), Array.isArray(e)) ? (e.length < this.perStep && (this.isFinished = !0), this.applyNew(e), this.pointer = this.pointer + this.perStep, this.isFresh = !1, [3, 5]) : (console.warn(\"InfiniteLoader function must return array\"), [2]);\n\n          case 3:\n            throw e = t.sent(), this.isFinished = !0, e;\n\n          case 4:\n            return this.isRefreshing = !1, [7];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, t.prototype.applyNew = function (t) {\n    this.isFresh ? this.items = t : this.items = __spreadArray(__spreadArray([], this.items), t);\n  }, t;\n}(),\n    AsyncHelpers = function () {\n  function t() {}\n\n  return t.sleep = function (e) {\n    return new Promise(function (t) {\n      return setTimeout(t, e);\n    });\n  }, t;\n}(),\n    RetrierExecutor = function () {\n  function r(t, e, n) {\n    void 0 === e && (e = 100), void 0 === n && (n = 1e3), this.iterationCount = 0, this.command = t, this.timeout = e, this.maxTime = n;\n  }\n\n  return r.waitUntil = function (e, n, i) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, new r(e, n, i).run()];\n\n          case 1:\n            return t.sent(), [2];\n        }\n      });\n    });\n  }, Object.defineProperty(r.prototype, \"timeElapsed\", {\n    get: function () {\n      return this.timeout * this.iterationCount;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), r.prototype.takesTooLong = function () {\n    return this.timeElapsed > this.maxTime;\n  }, r.prototype.run = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var e;\n      return __generator(this, function (t) {\n        switch (t.label) {\n          case 0:\n            this.iterationCount = 0, e = this.command(), t.label = 1;\n\n          case 1:\n            return e ? [3, 3] : [4, AsyncHelpers.sleep(this.timeout)];\n\n          case 2:\n            if (t.sent(), this.iterationCount++, this.takesTooLong()) throw new Error(\"Max time (\" + this.maxTime + \") elapsed.\");\n            return e = this.command(), [3, 1];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, r;\n}();\n\nfunction range(n, t) {\n  return Array(t - n).fill(0).map(function (t, e) {\n    return n + e;\n  });\n}\n\nvar PointerRequestFactory = function () {\n  function t() {}\n\n  return t.getPointerRequest = function (i) {\n    return void 0 === i && (i = 100), function (e, n) {\n      return new Promise(function (t) {\n        setTimeout(function () {\n          t(range(e, e + n));\n        }, i);\n      });\n    };\n  }, t;\n}(),\n    InfiniteLoaderFactory = function () {\n  function t() {}\n\n  return t.createNumberedList = function (t) {\n    t = PointerRequestFactory.getPointerRequest(t = void 0 === t ? 300 : t);\n    return new InfiniteLoader(t, 10);\n  }, t;\n}(),\n    StatefulExecutor = function (r) {\n  function n(t, e) {\n    void 0 === e && (e = null);\n    t = r.call(this, t) || this;\n    return t.state = e, t;\n  }\n\n  return __extends(n, r), n.createAndRun = function (t, e) {\n    e = new n(t, e = void 0 === e ? null : e);\n    return e.run(), e;\n  }, n.prototype.run = function () {\n    for (var e = this, t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];\n\n    var i = r.prototype.run.apply(this, t);\n    return i.then(function (t) {\n      e.state = t;\n    }), i;\n  }, n;\n}(Executor);\n\nexport { CacheExecutor, DebounceLoader, Executor, InfiniteLoader, InfiniteLoaderFactory, LadderExecutor, RepeatLoader, RetrierExecutor, StatefulExecutor };","map":{"version":3,"sources":["/Users/alberto/Workspace/atSistemas/prueba/node_modules/asva-executors/dist/src/index.esm.js"],"names":["__extends","__awaiter","__generator","__spreadArray","Executor","e","t","runCount","wasLastRunFine","wasRun","wasRunFine","wasRunBad","command","createAndRun","run","Object","defineProperty","prototype","get","enumerable","configurable","arguments","length","beforeRun","n","apply","afterRun","then","setRunResultFlags","catch","CacheExecutor","cachedPromise","runFresh","cleanCache","LadderExecutor","r","trigger","isRunning","Promise","i","DebounceLoader","identityCheck","isWaiting","executor","timeout","registerIdentity","setTimeout","checkIdentity","reset","RepeatLoader","time","id","start","setInterval","stop","clearInterval","InfiniteLoader","items","isFinished","isRefreshing","perStep","pointer","isFresh","label","runRequest","sent","next","refresh","trys","push","Array","isArray","applyNew","console","warn","AsyncHelpers","sleep","RetrierExecutor","iterationCount","maxTime","waitUntil","takesTooLong","timeElapsed","Error","range","fill","map","PointerRequestFactory","getPointerRequest","InfiniteLoaderFactory","createNumberedList","StatefulExecutor","call","state"],"mappings":";AAAA,SAAOA,SAAP,EAAiBC,SAAjB,EAA2BC,WAA3B,EAAuCC,aAAvC,QAAyD,OAAzD;;AAAiE,IAAIC,QAAQ,GAAC,YAAU;AAAC,WAASC,CAAT,CAAWC,CAAX,EAAa;AAAC,SAAKC,QAAL,GAAc,CAAd,EAAgB,KAAKC,cAAL,GAAoB,CAAC,CAArC,EAAuC,KAAKC,MAAL,GAAY,CAAC,CAApD,EAAsD,KAAKC,UAAL,GAAgB,CAAC,CAAvE,EAAyE,KAAKC,SAAL,GAAe,CAAC,CAAzF,EAA2F,KAAKC,OAAL,GAAaN,CAAxG;AAA0G;;AAAA,SAAOD,CAAC,CAACQ,YAAF,GAAe,UAASP,CAAT,EAAW;AAACA,IAAAA,CAAC,GAAC,IAAID,CAAJ,CAAMC,CAAN,CAAF;AAAW,WAAOA,CAAC,CAACQ,GAAF,IAAQR,CAAf;AAAiB,GAAvD,EAAwDS,MAAM,CAACC,cAAP,CAAsBX,CAAC,CAACY,SAAxB,EAAkC,WAAlC,EAA8C;AAACC,IAAAA,GAAG,EAAC,YAAU;AAAC,aAAM,CAAC,CAAC,KAAKX,QAAb;AAAsB,KAAtC;AAAuCY,IAAAA,UAAU,EAAC,CAAC,CAAnD;AAAqDC,IAAAA,YAAY,EAAC,CAAC;AAAnE,GAA9C,CAAxD,EAA6Kf,CAAC,CAACY,SAAF,CAAYH,GAAZ,GAAgB,YAAU;AAAC,SAAI,IAAIR,CAAC,GAAC,EAAN,EAASD,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAACgB,SAAS,CAACC,MAA7B,EAAoCjB,CAAC,EAArC,EAAwCC,CAAC,CAACD,CAAD,CAAD,GAAKgB,SAAS,CAAChB,CAAD,CAAd;;AAAkB,SAAKkB,SAAL;AAAiB,QAAIC,CAAC,GAAC,KAAKZ,OAAL,CAAaa,KAAb,CAAmB,IAAnB,EAAwBnB,CAAxB,CAAN;AAAiC,WAAO,KAAKoB,QAAL,CAAcF,CAAd,GAAiBA,CAAxB;AAA0B,GAA9U,EAA+UnB,CAAC,CAACY,SAAF,CAAYM,SAAZ,GAAsB,YAAU;AAAC,SAAKhB,QAAL;AAAgB,GAAhY,EAAiYF,CAAC,CAACY,SAAF,CAAYS,QAAZ,GAAqB,UAASpB,CAAT,EAAW;AAAC,QAAID,CAAC,GAAC,IAAN;AAAWC,IAAAA,CAAC,CAACqB,IAAF,CAAO,YAAU;AAACtB,MAAAA,CAAC,CAACE,QAAF,IAAaF,CAAC,CAACuB,iBAAF,CAAoB,CAAC,CAArB,CAAb;AAAqC,KAAvD,GAAyDtB,CAAC,CAACuB,KAAF,CAAQ,YAAU;AAACxB,MAAAA,CAAC,CAACE,QAAF,IAAaF,CAAC,CAACuB,iBAAF,CAAoB,CAAC,CAArB,CAAb;AAAqC,KAAxD,CAAzD;AAAmH,GAAhiB,EAAiiBvB,CAAC,CAACY,SAAF,CAAYW,iBAAZ,GAA8B,UAAStB,CAAT,EAAW;AAAC,SAAKG,MAAL,GAAY,CAAC,CAAb,EAAe,CAAC,KAAKD,cAAL,GAAoBF,CAArB,MAA0B,KAAKI,UAAL,GAAgB,CAAC,CAA3C,CAAf,EAA6DJ,CAAC,KAAG,KAAKK,SAAL,GAAe,CAAC,CAAnB,CAA9D;AAAoF,GAA/pB,EAAgqBN,CAAvqB;AAAyqB,CAA5yB,EAAb;AAAA,IAA4zByB,aAAa,GAAC,UAASN,CAAT,EAAW;AAAC,WAASlB,CAAT,GAAY;AAAC,QAAIA,CAAC,GAAC,SAAOkB,CAAP,IAAUA,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAaJ,SAAb,CAAV,IAAmC,IAAzC;AAA8C,WAAOf,CAAC,CAACyB,aAAF,GAAgB,IAAhB,EAAqBzB,CAA5B;AAA8B;;AAAA,SAAON,SAAS,CAACM,CAAD,EAAGkB,CAAH,CAAT,EAAelB,CAAC,CAACW,SAAF,CAAYH,GAAZ,GAAgB,YAAU;AAAC,SAAI,IAAIR,CAAC,GAAC,EAAN,EAASD,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAACgB,SAAS,CAACC,MAA7B,EAAoCjB,CAAC,EAArC,EAAwCC,CAAC,CAACD,CAAD,CAAD,GAAKgB,SAAS,CAAChB,CAAD,CAAd;;AAAkB,WAAO,KAAK0B,aAAL,KAAqB,KAAKA,aAAL,GAAmBP,CAAC,CAACP,SAAF,CAAYH,GAAZ,CAAgBW,KAAhB,CAAsB,IAAtB,EAA2BnB,CAA3B,CAAxC,GAAuE,KAAKyB,aAAnF;AAAiG,GAArM,EAAsMzB,CAAC,CAACW,SAAF,CAAYe,QAAZ,GAAqB,YAAU;AAAC,SAAI,IAAI1B,CAAC,GAAC,EAAN,EAASD,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAACgB,SAAS,CAACC,MAA7B,EAAoCjB,CAAC,EAArC,EAAwCC,CAAC,CAACD,CAAD,CAAD,GAAKgB,SAAS,CAAChB,CAAD,CAAd;;AAAkB,WAAO,KAAK0B,aAAL,GAAmBP,CAAC,CAACP,SAAF,CAAYH,GAAZ,CAAgBW,KAAhB,CAAsB,IAAtB,EAA2BnB,CAA3B,CAAnB,EAAiD,KAAKyB,aAA7D;AAA2E,GAA3W,EAA4WzB,CAAC,CAACW,SAAF,CAAYgB,UAAZ,GAAuB,YAAU;AAAC,SAAKF,aAAL,GAAmB,IAAnB;AAAwB,GAAta,EAAuazB,CAA9a;AAAgb,CAArhB,CAAshBF,QAAthB,CAA10B;AAAA,IAA02C8B,cAAc,GAAC,UAASC,CAAT,EAAW;AAAC,WAAS7B,CAAT,GAAY;AAAC,QAAIA,CAAC,GAAC,SAAO6B,CAAP,IAAUA,CAAC,CAACV,KAAF,CAAQ,IAAR,EAAaJ,SAAb,CAAV,IAAmC,IAAzC;AAA8C,WAAOf,CAAC,CAAC8B,OAAF,GAAU,IAAV,EAAe9B,CAAtB;AAAwB;;AAAA,SAAON,SAAS,CAACM,CAAD,EAAG6B,CAAH,CAAT,EAAe7B,CAAC,CAACW,SAAF,CAAYH,GAAZ,GAAgB,YAAU;AAAC,SAAI,IAAIT,CAAC,GAAC,IAAN,EAAWmB,CAAC,GAAC,EAAb,EAAgBlB,CAAC,GAAC,CAAtB,EAAwBA,CAAC,GAACe,SAAS,CAACC,MAApC,EAA2ChB,CAAC,EAA5C,EAA+CkB,CAAC,CAAClB,CAAD,CAAD,GAAKe,SAAS,CAACf,CAAD,CAAd;;AAAkB,QAAG,KAAK+B,SAAR,EAAkB,OAAO,IAAIC,OAAJ,CAAY,UAAShC,CAAT,EAAW;AAACD,MAAAA,CAAC,CAAC+B,OAAF,GAAU,YAAU;AAAC,eAAO/B,CAAC,CAACS,GAAF,CAAMW,KAAN,CAAYpB,CAAZ,EAAcmB,CAAd,EAAiBG,IAAjB,CAAsBrB,CAAtB,CAAP;AAAgC,OAArD;AAAsD,KAA9E,CAAP;AAAuF,QAAIiC,CAAC,GAACJ,CAAC,CAAClB,SAAF,CAAYH,GAAZ,CAAgBW,KAAhB,CAAsB,IAAtB,EAA2BD,CAA3B,CAAN;AAAoC,WAAOe,CAAC,CAACZ,IAAF,CAAO,YAAU;AAACtB,MAAAA,CAAC,CAAC+B,OAAF,IAAW/B,CAAC,CAAC+B,OAAF,EAAX,EAAuB/B,CAAC,CAAC+B,OAAF,GAAU,IAAjC;AAAsC,KAAxD,GAA0DG,CAAjE;AAAmE,GAA3T,EAA4TjC,CAAnU;AAAqU,CAApa,CAAqaF,QAAra,CAAz3C;AAAA,IAAwyDoC,cAAc,GAAC,YAAU;AAAC,WAASlC,CAAT,CAAWA,CAAX,EAAaD,CAAb,EAAe;AAAC,SAAK,CAAL,KAASA,CAAT,KAAaA,CAAC,GAAC,GAAf,GAAoB,KAAKoC,aAAL,GAAmB,EAAvC,EAA0C,KAAKC,SAAL,GAAe,CAAC,CAA1D,EAA4D,KAAKC,QAAL,GAAc,IAAIvC,QAAJ,CAAaE,CAAb,CAA1E,EAA0F,KAAKsC,OAAL,GAAavC,CAAvG;AAAyG;;AAAA,SAAOU,MAAM,CAACC,cAAP,CAAsBV,CAAC,CAACW,SAAxB,EAAkC,WAAlC,EAA8C;AAACC,IAAAA,GAAG,EAAC,YAAU;AAAC,aAAO,KAAKyB,QAAL,CAAcN,SAArB;AAA+B,KAA/C;AAAgDlB,IAAAA,UAAU,EAAC,CAAC,CAA5D;AAA8DC,IAAAA,YAAY,EAAC,CAAC;AAA5E,GAA9C,GAA8HL,MAAM,CAACC,cAAP,CAAsBV,CAAC,CAACW,SAAxB,EAAkC,UAAlC,EAA6C;AAACC,IAAAA,GAAG,EAAC,YAAU;AAAC,aAAO,KAAKmB,SAAL,IAAgB,KAAKK,SAA5B;AAAsC,KAAtD;AAAuDvB,IAAAA,UAAU,EAAC,CAAC,CAAnE;AAAqEC,IAAAA,YAAY,EAAC,CAAC;AAAnF,GAA7C,CAA9H,EAAkQd,CAAC,CAACW,SAAF,CAAYH,GAAZ,GAAgB,YAAU;AAAC,SAAI,IAAIT,CAAC,GAAC,IAAN,EAAWmB,CAAC,GAAC,EAAb,EAAgBlB,CAAC,GAAC,CAAtB,EAAwBA,CAAC,GAACe,SAAS,CAACC,MAApC,EAA2ChB,CAAC,EAA5C,EAA+CkB,CAAC,CAAClB,CAAD,CAAD,GAAKe,SAAS,CAACf,CAAD,CAAd;;AAAkB,SAAKoC,SAAL,GAAe,CAAC,CAAhB;AAAkB,QAAIH,CAAC,GAAC,KAAKM,gBAAL,EAAN;AAA8BC,IAAAA,UAAU,CAAC,YAAU;AAAC,UAAIxC,CAAJ;AAAMD,MAAAA,CAAC,CAAC0C,aAAF,CAAgBR,CAAhB,MAAqBlC,CAAC,CAACqC,SAAF,GAAY,CAAC,CAAb,EAAe,CAACpC,CAAC,GAACD,CAAC,CAACsC,QAAL,EAAe7B,GAAf,CAAmBW,KAAnB,CAAyBnB,CAAzB,EAA2BkB,CAA3B,CAApC;AAAmE,KAArF,EAAsF,KAAKoB,OAA3F,CAAV;AAA8G,GAA5f,EAA6ftC,CAAC,CAACW,SAAF,CAAY+B,KAAZ,GAAkB,YAAU;AAAC,SAAKN,SAAL,GAAe,CAAC,CAAhB,EAAkB,KAAKD,aAAL,GAAmB,EAArC;AAAwC,GAAlkB,EAAmkBnC,CAAC,CAACW,SAAF,CAAY4B,gBAAZ,GAA6B,YAAU;AAAC,WAAO,KAAKJ,aAAL,GAAmB,EAAnB,EAAsB,KAAKA,aAAlC;AAAgD,GAA3pB,EAA4pBnC,CAAC,CAACW,SAAF,CAAY8B,aAAZ,GAA0B,UAASzC,CAAT,EAAW;AAAC,WAAO,KAAKmC,aAAL,KAAqBnC,CAA5B;AAA8B,GAAhuB,EAAiuBA,CAAxuB;AAA0uB,CAA92B,EAAvzD;AAAA,IAAwqF2C,YAAY,GAAC,YAAU;AAAC,WAAS3C,CAAT,CAAWA,CAAX,EAAaD,CAAb,EAAe;AAAC,SAAK6C,IAAL,GAAU,GAAV,EAAc,KAAKC,EAAL,GAAQ,IAAtB,EAA2B,KAAKvC,OAAL,GAAaN,CAAxC,EAA0C,KAAK4C,IAAL,GAAU7C,CAApD;AAAsD;;AAAA,SAAOC,CAAC,CAACW,SAAF,CAAYmC,KAAZ,GAAkB,YAAU;AAAC,SAAKD,EAAL,KAAU,KAAKA,EAAL,GAAQE,WAAW,CAAC,KAAKzC,OAAN,EAAc,KAAKsC,IAAnB,CAA7B;AAAuD,GAApF,EAAqF5C,CAAC,CAACW,SAAF,CAAYqC,IAAZ,GAAiB,YAAU;AAAC,SAAKH,EAAL,IAASI,aAAa,CAAC,KAAKJ,EAAN,CAAtB,EAAgC,KAAKA,EAAL,GAAQ,IAAxC;AAA6C,GAA9J,EAA+J7C,CAAtK;AAAwK,CAAzP,EAArrF;AAAA,IAAi7FkD,cAAc,GAAC,YAAU;AAAC,WAASlD,CAAT,CAAWkB,CAAX,EAAalB,CAAb,EAAe;AAAC,QAAIiC,CAAC,GAAC,IAAN;AAAW,SAAK,CAAL,KAASjC,CAAT,KAAaA,CAAC,GAAC,EAAf,GAAmB,KAAKmD,KAAL,GAAW,EAA9B,EAAiC,KAAKC,UAAL,GAAgB,CAAC,CAAlD,EAAoD,KAAKC,YAAL,GAAkB,CAAC,CAAvE,EAAyE,KAAKC,OAAL,GAAa,EAAtF,EAAyF,KAAKC,OAAL,GAAa,CAAtG,EAAwG,KAAKC,OAAL,GAAa,CAAC,CAAtH,EAAwH,KAAKnB,QAAL,GAAc,IAAIT,cAAJ,CAAmB,UAAS7B,CAAT,EAAW;AAAC,aAAO,KAAK,CAAL,KAASA,CAAT,KAAaA,CAAC,GAAC,CAAC,CAAhB,GAAmBJ,SAAS,CAACsC,CAAD,EAAG,KAAK,CAAR,EAAU,KAAK,CAAf,EAAiB,YAAU;AAAC,eAAOrC,WAAW,CAAC,IAAD,EAAM,UAASI,CAAT,EAAW;AAAC,kBAAOA,CAAC,CAACyD,KAAT;AAAgB,iBAAK,CAAL;AAAO,qBAAM,CAAC,CAAD,EAAG,KAAKC,UAAL,CAAgBxC,CAAhB,EAAkBnB,CAAlB,CAAH,CAAN;;AAA+B,iBAAK,CAAL;AAAO,qBAAM,CAAC,CAAD,EAAGC,CAAC,CAAC2D,IAAF,EAAH,CAAN;AAA7D;AAAiF,SAAnG,CAAlB;AAAuH,OAAnJ,CAAnC;AAAwL,KAAvN,CAAtI,EAA+V,KAAKL,OAAL,GAAatD,CAA5W;AAA8W;;AAAA,SAAOS,MAAM,CAACC,cAAP,CAAsBV,CAAC,CAACW,SAAxB,EAAkC,WAAlC,EAA8C;AAACC,IAAAA,GAAG,EAAC,YAAU;AAAC,aAAO,KAAKyB,QAAL,CAAcN,SAArB;AAA+B,KAA/C;AAAgDlB,IAAAA,UAAU,EAAC,CAAC,CAA5D;AAA8DC,IAAAA,YAAY,EAAC,CAAC;AAA5E,GAA9C,GAA8HL,MAAM,CAACC,cAAP,CAAsBV,CAAC,CAACW,SAAxB,EAAkC,SAAlC,EAA4C;AAACC,IAAAA,GAAG,EAAC,YAAU;AAAC,aAAM,CAAC,KAAKyB,QAAL,CAAcN,SAAf,IAA2B,KAAKqB,UAAL,IAAiB,MAAI,KAAKD,KAAL,CAAWnC,MAAjE;AAAyE,KAAzF;AAA0FH,IAAAA,UAAU,EAAC,CAAC,CAAtG;AAAwGC,IAAAA,YAAY,EAAC,CAAC;AAAtH,GAA5C,CAA9H,EAAoSL,MAAM,CAACC,cAAP,CAAsBV,CAAC,CAACW,SAAxB,EAAkC,QAAlC,EAA2C;AAACC,IAAAA,GAAG,EAAC,YAAU;AAAC,aAAM,CAAC,KAAK4C,OAAN,IAAgB,CAAC,KAAKnB,QAAL,CAAcN,SAAf,IAA0B,CAAC,CAAC,KAAKoB,KAAL,CAAWnC,MAA7D;AAAqE,KAArF;AAAsFH,IAAAA,UAAU,EAAC,CAAC,CAAlG;AAAoGC,IAAAA,YAAY,EAAC,CAAC;AAAlH,GAA3C,CAApS,EAAqcd,CAAC,CAACW,SAAF,CAAYiD,IAAZ,GAAiB,YAAU;AAAC,SAAKvB,QAAL,CAAc7B,GAAd;AAAoB,GAArf,EAAsfR,CAAC,CAACW,SAAF,CAAYkD,OAAZ,GAAoB,YAAU;AAAC,SAAKxB,QAAL,CAAc7B,GAAd,CAAkB,CAAC,CAAnB;AAAsB,GAA3iB,EAA4iBR,CAAC,CAACW,SAAF,CAAY+C,UAAZ,GAAuB,UAASxC,CAAT,EAAWe,CAAX,EAAa;AAAC,WAAO,KAAK,CAAL,KAASA,CAAT,KAAaA,CAAC,GAAC,CAAC,CAAhB,GAAmBtC,SAAS,CAAC,IAAD,EAAM,KAAK,CAAX,EAAaqC,OAAb,EAAqB,YAAU;AAAC,UAAIjC,CAAJ;AAAM,aAAOH,WAAW,CAAC,IAAD,EAAM,UAASI,CAAT,EAAW;AAAC,gBAAOA,CAAC,CAACyD,KAAT;AAAgB,eAAK,CAAL;AAAO,aAACxB,CAAC,GAAC,MAAI,KAAKsB,OAAT,GAAiB,CAAC,CAAlB,GAAoBtB,CAAvB,MAA4B,KAAKsB,OAAL,GAAa,CAAb,EAAe,KAAKC,OAAL,GAAa,CAAC,CAA7B,EAA+B,KAAKH,YAAL,GAAkB,CAAC,CAAlD,EAAoD,KAAKD,UAAL,GAAgB,CAAC,CAAjG,GAAoGpD,CAAC,CAACyD,KAAF,GAAQ,CAA5G;;AAA8G,eAAK,CAAL;AAAO,mBAAOzD,CAAC,CAAC8D,IAAF,CAAOC,IAAP,CAAY,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAAZ,GAAuB,CAAC,CAAD,EAAG7C,CAAC,CAAC,KAAKqC,OAAN,EAAc,KAAKD,OAAnB,CAAJ,CAA9B;;AAA+D,eAAK,CAAL;AAAO,mBAAM,CAACvD,CAAC,GAACC,CAAC,CAAC2D,IAAF,EAAF,EAAWK,KAAK,CAACC,OAAN,CAAclE,CAAd,CAAZ,KAA+BA,CAAC,CAACiB,MAAF,GAAS,KAAKsC,OAAd,KAAwB,KAAKF,UAAL,GAAgB,CAAC,CAAzC,GAA4C,KAAKc,QAAL,CAAcnE,CAAd,CAA5C,EAA6D,KAAKwD,OAAL,GAAa,KAAKA,OAAL,GAAa,KAAKD,OAA5F,EAAoG,KAAKE,OAAL,GAAa,CAAC,CAAlH,EAAoH,CAAC,CAAD,EAAG,CAAH,CAAnJ,KAA2JW,OAAO,CAACC,IAAR,CAAa,2CAAb,GAA0D,CAAC,CAAD,CAArN,CAAN;;AAAgO,eAAK,CAAL;AAAO,kBAAMrE,CAAC,GAACC,CAAC,CAAC2D,IAAF,EAAF,EAAW,KAAKP,UAAL,GAAgB,CAAC,CAA5B,EAA8BrD,CAApC;;AAAsC,eAAK,CAAL;AAAO,mBAAO,KAAKsD,YAAL,GAAkB,CAAC,CAAnB,EAAqB,CAAC,CAAD,CAA5B;;AAAgC,eAAK,CAAL;AAAO,mBAAM,CAAC,CAAD,CAAN;AAA7gB;AAAwhB,OAA1iB,CAAlB;AAA8jB,KAApmB,CAAnC;AAAyoB,GAA1tC,EAA2tCrD,CAAC,CAACW,SAAF,CAAYuD,QAAZ,GAAqB,UAASlE,CAAT,EAAW;AAAC,SAAKwD,OAAL,GAAa,KAAKL,KAAL,GAAWnD,CAAxB,GAA0B,KAAKmD,KAAL,GAAWtD,aAAa,CAACA,aAAa,CAAC,EAAD,EAAI,KAAKsD,KAAT,CAAd,EAA8BnD,CAA9B,CAAlD;AAAmF,GAA/0C,EAAg1CA,CAAv1C;AAAy1C,CAA7uD,EAAh8F;AAAA,IAAgrJqE,YAAY,GAAC,YAAU;AAAC,WAASrE,CAAT,GAAY,CAAE;;AAAA,SAAOA,CAAC,CAACsE,KAAF,GAAQ,UAASvE,CAAT,EAAW;AAAC,WAAO,IAAIiC,OAAJ,CAAY,UAAShC,CAAT,EAAW;AAAC,aAAOwC,UAAU,CAACxC,CAAD,EAAGD,CAAH,CAAjB;AAAuB,KAA/C,CAAP;AAAwD,GAA5E,EAA6EC,CAApF;AAAsF,CAA/G,EAA7rJ;AAAA,IAA+yJuE,eAAe,GAAC,YAAU;AAAC,WAAS1C,CAAT,CAAW7B,CAAX,EAAaD,CAAb,EAAemB,CAAf,EAAiB;AAAC,SAAK,CAAL,KAASnB,CAAT,KAAaA,CAAC,GAAC,GAAf,GAAoB,KAAK,CAAL,KAASmB,CAAT,KAAaA,CAAC,GAAC,GAAf,CAApB,EAAwC,KAAKsD,cAAL,GAAoB,CAA5D,EAA8D,KAAKlE,OAAL,GAAaN,CAA3E,EAA6E,KAAKsC,OAAL,GAAavC,CAA1F,EAA4F,KAAK0E,OAAL,GAAavD,CAAzG;AAA2G;;AAAA,SAAOW,CAAC,CAAC6C,SAAF,GAAY,UAAS3E,CAAT,EAAWmB,CAAX,EAAae,CAAb,EAAe;AAAC,WAAOtC,SAAS,CAAC,IAAD,EAAM,KAAK,CAAX,EAAa,KAAK,CAAlB,EAAoB,YAAU;AAAC,aAAOC,WAAW,CAAC,IAAD,EAAM,UAASI,CAAT,EAAW;AAAC,gBAAOA,CAAC,CAACyD,KAAT;AAAgB,eAAK,CAAL;AAAO,mBAAM,CAAC,CAAD,EAAG,IAAI5B,CAAJ,CAAM9B,CAAN,EAAQmB,CAAR,EAAUe,CAAV,EAAazB,GAAb,EAAH,CAAN;;AAA6B,eAAK,CAAL;AAAO,mBAAOR,CAAC,CAAC2D,IAAF,IAAS,CAAC,CAAD,CAAhB;AAA3D;AAAgF,OAAlG,CAAlB;AAAsH,KAArJ,CAAhB;AAAuK,GAAnM,EAAoMlD,MAAM,CAACC,cAAP,CAAsBmB,CAAC,CAAClB,SAAxB,EAAkC,aAAlC,EAAgD;AAACC,IAAAA,GAAG,EAAC,YAAU;AAAC,aAAO,KAAK0B,OAAL,GAAa,KAAKkC,cAAzB;AAAwC,KAAxD;AAAyD3D,IAAAA,UAAU,EAAC,CAAC,CAArE;AAAuEC,IAAAA,YAAY,EAAC,CAAC;AAArF,GAAhD,CAApM,EAA6Ue,CAAC,CAAClB,SAAF,CAAYgE,YAAZ,GAAyB,YAAU;AAAC,WAAO,KAAKC,WAAL,GAAiB,KAAKH,OAA7B;AAAqC,GAAtZ,EAAuZ5C,CAAC,CAAClB,SAAF,CAAYH,GAAZ,GAAgB,YAAU;AAAC,WAAOb,SAAS,CAAC,IAAD,EAAM,KAAK,CAAX,EAAaqC,OAAb,EAAqB,YAAU;AAAC,UAAIjC,CAAJ;AAAM,aAAOH,WAAW,CAAC,IAAD,EAAM,UAASI,CAAT,EAAW;AAAC,gBAAOA,CAAC,CAACyD,KAAT;AAAgB,eAAK,CAAL;AAAO,iBAAKe,cAAL,GAAoB,CAApB,EAAsBzE,CAAC,GAAC,KAAKO,OAAL,EAAxB,EAAuCN,CAAC,CAACyD,KAAF,GAAQ,CAA/C;;AAAiD,eAAK,CAAL;AAAO,mBAAO1D,CAAC,GAAC,CAAC,CAAD,EAAG,CAAH,CAAD,GAAO,CAAC,CAAD,EAAGsE,YAAY,CAACC,KAAb,CAAmB,KAAKhC,OAAxB,CAAH,CAAf;;AAAoD,eAAK,CAAL;AAAO,gBAAGtC,CAAC,CAAC2D,IAAF,IAAS,KAAKa,cAAL,EAAT,EAA+B,KAAKG,YAAL,EAAlC,EAAsD,MAAM,IAAIE,KAAJ,CAAU,eAAa,KAAKJ,OAAlB,GAA0B,YAApC,CAAN;AAAwD,mBAAO1E,CAAC,GAAC,KAAKO,OAAL,EAAF,EAAiB,CAAC,CAAD,EAAG,CAAH,CAAxB;;AAA8B,eAAK,CAAL;AAAO,mBAAM,CAAC,CAAD,CAAN;AAA7R;AAAwS,OAA1T,CAAlB;AAA8U,KAApX,CAAhB;AAAsY,GAAxzB,EAAyzBuB,CAAh0B;AAAk0B,CAA18B,EAA/zJ;;AAA4wL,SAASiD,KAAT,CAAe5D,CAAf,EAAiBlB,CAAjB,EAAmB;AAAC,SAAOgE,KAAK,CAAChE,CAAC,GAACkB,CAAH,CAAL,CAAW6D,IAAX,CAAgB,CAAhB,EAAmBC,GAAnB,CAAuB,UAAShF,CAAT,EAAWD,CAAX,EAAa;AAAC,WAAOmB,CAAC,GAACnB,CAAT;AAAW,GAAhD,CAAP;AAAyD;;AAAA,IAAIkF,qBAAqB,GAAC,YAAU;AAAC,WAASjF,CAAT,GAAY,CAAE;;AAAA,SAAOA,CAAC,CAACkF,iBAAF,GAAoB,UAASjD,CAAT,EAAW;AAAC,WAAO,KAAK,CAAL,KAASA,CAAT,KAAaA,CAAC,GAAC,GAAf,GAAoB,UAASlC,CAAT,EAAWmB,CAAX,EAAa;AAAC,aAAO,IAAIc,OAAJ,CAAY,UAAShC,CAAT,EAAW;AAACwC,QAAAA,UAAU,CAAC,YAAU;AAACxC,UAAAA,CAAC,CAAC8E,KAAK,CAAC/E,CAAD,EAAGA,CAAC,GAACmB,CAAL,CAAN,CAAD;AAAgB,SAA5B,EAA6Be,CAA7B,CAAV;AAA0C,OAAlE,CAAP;AAA2E,KAApH;AAAqH,GAArJ,EAAsJjC,CAA7J;AAA+J,CAAxL,EAA1B;AAAA,IAAqNmF,qBAAqB,GAAC,YAAU;AAAC,WAASnF,CAAT,GAAY,CAAE;;AAAA,SAAOA,CAAC,CAACoF,kBAAF,GAAqB,UAASpF,CAAT,EAAW;AAACA,IAAAA,CAAC,GAACiF,qBAAqB,CAACC,iBAAtB,CAAwClF,CAAC,GAAC,KAAK,CAAL,KAASA,CAAT,GAAW,GAAX,GAAeA,CAAzD,CAAF;AAA8D,WAAO,IAAIkD,cAAJ,CAAmBlD,CAAnB,EAAqB,EAArB,CAAP;AAAgC,GAA/H,EAAgIA,CAAvI;AAAyI,CAAlK,EAA3O;AAAA,IAAgZqF,gBAAgB,GAAC,UAASxD,CAAT,EAAW;AAAC,WAASX,CAAT,CAAWlB,CAAX,EAAaD,CAAb,EAAe;AAAC,SAAK,CAAL,KAASA,CAAT,KAAaA,CAAC,GAAC,IAAf;AAAqBC,IAAAA,CAAC,GAAC6B,CAAC,CAACyD,IAAF,CAAO,IAAP,EAAYtF,CAAZ,KAAgB,IAAlB;AAAuB,WAAOA,CAAC,CAACuF,KAAF,GAAQxF,CAAR,EAAUC,CAAjB;AAAmB;;AAAA,SAAON,SAAS,CAACwB,CAAD,EAAGW,CAAH,CAAT,EAAeX,CAAC,CAACX,YAAF,GAAe,UAASP,CAAT,EAAWD,CAAX,EAAa;AAACA,IAAAA,CAAC,GAAC,IAAImB,CAAJ,CAAMlB,CAAN,EAAQD,CAAC,GAAC,KAAK,CAAL,KAASA,CAAT,GAAW,IAAX,GAAgBA,CAA1B,CAAF;AAA+B,WAAOA,CAAC,CAACS,GAAF,IAAQT,CAAf;AAAiB,GAA5F,EAA6FmB,CAAC,CAACP,SAAF,CAAYH,GAAZ,GAAgB,YAAU;AAAC,SAAI,IAAIT,CAAC,GAAC,IAAN,EAAWC,CAAC,GAAC,EAAb,EAAgBkB,CAAC,GAAC,CAAtB,EAAwBA,CAAC,GAACH,SAAS,CAACC,MAApC,EAA2CE,CAAC,EAA5C,EAA+ClB,CAAC,CAACkB,CAAD,CAAD,GAAKH,SAAS,CAACG,CAAD,CAAd;;AAAkB,QAAIe,CAAC,GAACJ,CAAC,CAAClB,SAAF,CAAYH,GAAZ,CAAgBW,KAAhB,CAAsB,IAAtB,EAA2BnB,CAA3B,CAAN;AAAoC,WAAOiC,CAAC,CAACZ,IAAF,CAAO,UAASrB,CAAT,EAAW;AAACD,MAAAA,CAAC,CAACwF,KAAF,GAAQvF,CAAR;AAAU,KAA7B,GAA+BiC,CAAtC;AAAwC,GAArQ,EAAsQf,CAA7Q;AAA+Q,CAA1W,CAA2WpB,QAA3W,CAAja;;AAAsxB,SAAO0B,aAAP,EAAqBU,cAArB,EAAoCpC,QAApC,EAA6CoD,cAA7C,EAA4DiC,qBAA5D,EAAkFvD,cAAlF,EAAiGe,YAAjG,EAA8G4B,eAA9G,EAA8Hc,gBAA9H","sourcesContent":["import{__extends,__awaiter,__generator,__spreadArray}from\"tslib\";var Executor=function(){function e(t){this.runCount=0,this.wasLastRunFine=!1,this.wasRun=!1,this.wasRunFine=!1,this.wasRunBad=!1,this.command=t}return e.createAndRun=function(t){t=new e(t);return t.run(),t},Object.defineProperty(e.prototype,\"isRunning\",{get:function(){return!!this.runCount},enumerable:!1,configurable:!0}),e.prototype.run=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.beforeRun();var n=this.command.apply(this,t);return this.afterRun(n),n},e.prototype.beforeRun=function(){this.runCount++},e.prototype.afterRun=function(t){var e=this;t.then(function(){e.runCount--,e.setRunResultFlags(!0)}),t.catch(function(){e.runCount--,e.setRunResultFlags(!1)})},e.prototype.setRunResultFlags=function(t){this.wasRun=!0,(this.wasLastRunFine=t)&&(this.wasRunFine=!0),t||(this.wasRunBad=!0)},e}(),CacheExecutor=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.cachedPromise=null,t}return __extends(t,n),t.prototype.run=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.cachedPromise||(this.cachedPromise=n.prototype.run.apply(this,t)),this.cachedPromise},t.prototype.runFresh=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.cachedPromise=n.prototype.run.apply(this,t),this.cachedPromise},t.prototype.cleanCache=function(){this.cachedPromise=null},t}(Executor),LadderExecutor=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.trigger=null,t}return __extends(t,r),t.prototype.run=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(this.isRunning)return new Promise(function(t){e.trigger=function(){return e.run.apply(e,n).then(t)}});var i=r.prototype.run.apply(this,n);return i.then(function(){e.trigger&&e.trigger(),e.trigger=null}),i},t}(Executor),DebounceLoader=function(){function t(t,e){void 0===e&&(e=3e3),this.identityCheck={},this.isWaiting=!1,this.executor=new Executor(t),this.timeout=e}return Object.defineProperty(t.prototype,\"isRunning\",{get:function(){return this.executor.isRunning},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"isActive\",{get:function(){return this.isRunning||this.isWaiting},enumerable:!1,configurable:!0}),t.prototype.run=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.isWaiting=!0;var i=this.registerIdentity();setTimeout(function(){var t;e.checkIdentity(i)&&(e.isWaiting=!1,(t=e.executor).run.apply(t,n))},this.timeout)},t.prototype.reset=function(){this.isWaiting=!1,this.identityCheck={}},t.prototype.registerIdentity=function(){return this.identityCheck={},this.identityCheck},t.prototype.checkIdentity=function(t){return this.identityCheck===t},t}(),RepeatLoader=function(){function t(t,e){this.time=100,this.id=null,this.command=t,this.time=e}return t.prototype.start=function(){this.id||(this.id=setInterval(this.command,this.time))},t.prototype.stop=function(){this.id&&clearInterval(this.id),this.id=null},t}(),InfiniteLoader=function(){function t(n,t){var i=this;void 0===t&&(t=20),this.items=[],this.isFinished=!1,this.isRefreshing=!1,this.perStep=20,this.pointer=0,this.isFresh=!0,this.executor=new LadderExecutor(function(e){return void 0===e&&(e=!1),__awaiter(i,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.runRequest(n,e)];case 1:return[2,t.sent()]}})})}),this.perStep=t}return Object.defineProperty(t.prototype,\"isRunning\",{get:function(){return this.executor.isRunning},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"isEmpty\",{get:function(){return!this.executor.isRunning&&(this.isFinished&&0===this.items.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"isFull\",{get:function(){return!this.isFresh&&(!this.executor.isRunning&&!!this.items.length)},enumerable:!1,configurable:!0}),t.prototype.next=function(){this.executor.run()},t.prototype.refresh=function(){this.executor.run(!0)},t.prototype.runRequest=function(n,i){return void 0===i&&(i=!1),__awaiter(this,void 0,Promise,function(){var e;return __generator(this,function(t){switch(t.label){case 0:(i=0===this.pointer?!0:i)&&(this.pointer=0,this.isFresh=!0,this.isRefreshing=!0,this.isFinished=!1),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,n(this.pointer,this.perStep)];case 2:return(e=t.sent(),Array.isArray(e))?(e.length<this.perStep&&(this.isFinished=!0),this.applyNew(e),this.pointer=this.pointer+this.perStep,this.isFresh=!1,[3,5]):(console.warn(\"InfiniteLoader function must return array\"),[2]);case 3:throw e=t.sent(),this.isFinished=!0,e;case 4:return this.isRefreshing=!1,[7];case 5:return[2]}})})},t.prototype.applyNew=function(t){this.isFresh?this.items=t:this.items=__spreadArray(__spreadArray([],this.items),t)},t}(),AsyncHelpers=function(){function t(){}return t.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})},t}(),RetrierExecutor=function(){function r(t,e,n){void 0===e&&(e=100),void 0===n&&(n=1e3),this.iterationCount=0,this.command=t,this.timeout=e,this.maxTime=n}return r.waitUntil=function(e,n,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,new r(e,n,i).run()];case 1:return t.sent(),[2]}})})},Object.defineProperty(r.prototype,\"timeElapsed\",{get:function(){return this.timeout*this.iterationCount},enumerable:!1,configurable:!0}),r.prototype.takesTooLong=function(){return this.timeElapsed>this.maxTime},r.prototype.run=function(){return __awaiter(this,void 0,Promise,function(){var e;return __generator(this,function(t){switch(t.label){case 0:this.iterationCount=0,e=this.command(),t.label=1;case 1:return e?[3,3]:[4,AsyncHelpers.sleep(this.timeout)];case 2:if(t.sent(),this.iterationCount++,this.takesTooLong())throw new Error(\"Max time (\"+this.maxTime+\") elapsed.\");return e=this.command(),[3,1];case 3:return[2]}})})},r}();function range(n,t){return Array(t-n).fill(0).map(function(t,e){return n+e})}var PointerRequestFactory=function(){function t(){}return t.getPointerRequest=function(i){return void 0===i&&(i=100),function(e,n){return new Promise(function(t){setTimeout(function(){t(range(e,e+n))},i)})}},t}(),InfiniteLoaderFactory=function(){function t(){}return t.createNumberedList=function(t){t=PointerRequestFactory.getPointerRequest(t=void 0===t?300:t);return new InfiniteLoader(t,10)},t}(),StatefulExecutor=function(r){function n(t,e){void 0===e&&(e=null);t=r.call(this,t)||this;return t.state=e,t}return __extends(n,r),n.createAndRun=function(t,e){e=new n(t,e=void 0===e?null:e);return e.run(),e},n.prototype.run=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.prototype.run.apply(this,t);return i.then(function(t){e.state=t}),i},n}(Executor);export{CacheExecutor,DebounceLoader,Executor,InfiniteLoader,InfiniteLoaderFactory,LadderExecutor,RepeatLoader,RetrierExecutor,StatefulExecutor};\n"]},"metadata":{},"sourceType":"module"}