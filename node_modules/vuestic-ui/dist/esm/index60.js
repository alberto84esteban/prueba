import{watch as e,inject as s,onMounted as r,onBeforeUnmount as a,defineComponent as t,computed as o,openBlock as l,createElementBlock as i,normalizeStyle as u,Fragment as n,renderList as m,toDisplayString as d,createCommentVNode as c}from"vue";import{f as p}from"./flatten.js";import{v as g,i as f,x as v,y,w as V}from"./withConfigTransport.js";import{u as S}from"./useSyncProp.js";import{F as j}from"./consts.js";import{u as M}from"./useFocus.js";import{u as h}from"./useColor.js";import{s as A}from"./style-inject.es.js";var C=g,F=f,_=v;var B=function isString(e){return"string"==typeof e||!F(e)&&_(e)&&"[object String]"==C(e)};const b={modelValue:{required:!1},error:{type:Boolean,default:void 0},errorMessages:{type:[Array,String],default:void 0},errorCount:{type:[String,Number],default:1},rules:{type:Array,default:()=>[]},success:{type:Boolean,default:!1},messages:{type:[Array,String],default:()=>[]},immediateValidation:{type:Boolean,default:!1}},E=["update:error","update:errorMessages"],useValidation=(t,o,l,i)=>{const{isFocused:u,onFocus:n,onBlur:m}=M(),[d]=S("error",t,o,!1),[c]=S("errorMessages",t,o,[]),resetValidation=()=>{d.value=!1,c.value=[]},validate=()=>{if(!t.rules||!t.rules.length)return!0;let e=!1,s=[];return((e=[],s=null)=>(B(e)&&(e=[e]),e.map((e=>y(e)?e(s):e))))(p(t.rules),t.modelValue).forEach((r=>{B(r)?(s=[...s,r],e=!0):!1===r&&(e=!0)})),c.value=s,d.value=e,!e};e(u,(e=>!1===e&&validate())),e((()=>t.modelValue),(()=>validate()),{immediate:t.immediateValidation});const g={resetValidation:resetValidation,focus:i,validate:validate,reset:l,hasError:()=>d.value},f=s(j,void 0);return r((()=>{null==f||f.onChildMounted(g)})),a((()=>{null==f||f.onChildUnmounted(g)})),{isFocused:u,computedError:d,computedErrorMessages:c,listeners:{onFocus:n,onBlur:m},validate:validate,resetValidation:resetValidation}};var L=t({name:"VaMessageList",props:{modelValue:{type:[String,Array],default:""},limit:{type:Number,default:1},color:{type:String}},setup(e){const{colorComputed:s}=h(e);return{messages:o((()=>e.modelValue?Array.isArray(e.modelValue)?e.modelValue.slice(0,e.limit):[e.modelValue]:[])),computedStyle:o((()=>e.color?{color:s.value}:{}))}}});A(".va-message-list{color:var(--va-message-list-color)}.va-message-list__message{font-size:.8rem;vertical-align:middle}"),L.render=function render(e,s,r,a,t,o){return e.messages.length?(l(),i("div",{key:0,class:"va-message-list",style:u(e.computedStyle)},[(l(!0),i(n,null,m(e.messages,((e,s)=>(l(),i("div",{key:s,class:"va-message-list__message"},d(e),1)))),128))],4)):c("v-if",!0)},L.__file="src/components/va-input/components/VaMessageList/VaMessageList.vue";var k=V(L);export{k as V,E as a,useValidation as b,B as i,b as u};
//# sourceMappingURL=index60.js.map
