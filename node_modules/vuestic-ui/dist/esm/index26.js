import{w as e}from"./withConfigTransport.js";import{defineComponent as l,resolveComponent as a,openBlock as i,createElementBlock as o,createVNode as t,withCtx as r,createElementVNode as d,createTextVNode as n,ref as p,createBlock as u,normalizeClass as s,toDisplayString as f,computed as m,onMounted as v,watch as c,createCommentVNode as g,normalizeStyle as y,Fragment as _,renderList as h}from"vue";import{i as x,e as b,u as z}from"./color-config.js";import w from"./index8.js";import F from"./index33.js";import V from"./index13.js";import U from"./index28.js";import{s as k}from"./style-inject.es.js";import"./VaConfig.js";import"colortranslator";import"./useColor.js";import"./useRouterLink.js";import"./useSize.js";import"./useLoading.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";import"./VaIcon.js";import"./flatten.js";import"tslib";import"./vue-class-component.esm-bundler.js";import"./ColorMixin.js";import"./StatefulMixin.js";import"./useAlign.js";var j=l({name:"VaFileUploadUndo",components:{VaButton:w},emits:["recover"]});const I={class:"va-file-upload-undo"},S=d("span",null,"File was successfully deleted",-1),C=n(" Undo ");k(":root{--va-file-upload-undo-height:1.5rem;--va-file-upload-undo-button-line-height:1.1428;--va-file-upload-undo-button-margin-top:0;--va-file-upload-undo-button-margin-bottom:0;--va-file-upload-undo-margin-left:0.5rem}.va-file-upload-undo{align-items:center;display:flex;height:var(--va-file-upload-undo-height)}.va-file-upload-undo__button{line-height:var(--va-file-upload-undo-button-line-height);margin-bottom:var(--va-file-upload-undo-button-margin-bottom);margin-left:var(--va-file-upload-undo-margin-left);margin-top:var(--va-file-upload-undo-button-margin-top)}"),j.render=function render$5(e,l,d,n,p,u){const s=a("va-button");return i(),o("div",I,[S,t(s,{onClick:l[0]||(l[0]=l=>e.$emit("recover")),outline:"",size:"small",class:"va-file-upload-undo__button"},{default:r((()=>[C])),_:1})])},j.__file="src/components/va-file-upload/VaFileUploadUndo/VaFileUploadUndo.vue";var L=e(j),R=l({name:"VaFileUploadListItem",components:{VaIcon:U,VaCard:V,VaFileUploadUndo:L},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"}},setup(e,{emit:l}){const a=p(!1);return{removed:a,removeFile:()=>{a.value=!0,setTimeout((()=>{a.value&&(l("remove"),a.value=!1)}),2e3)},recoverFile:()=>{a.value=!1}}}});const B={key:1,class:"va-file-upload-list-item__content"},$={class:"va-file-upload-list-item__name"},D={class:"va-file-upload-list-item__size"};k(":root{--va-file-upload-list-item-size-text-color:var(--va-gray)}.va-file-upload-list-item{line-height:1.5rem;max-width:100%;padding:1.125rem .5rem 1rem 1rem;width:100%}.va-file-upload-list-item+.va-file-upload-list-item{margin-top:.5rem}.va-file-upload-list-item__content{align-items:center;display:flex;justify-content:space-between}.va-file-upload-list-item__name{flex-basis:60%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.va-file-upload-list-item__size{color:var(--va-file-upload-list-item-size-text-color)}.va-file-upload-list-item__delete{cursor:pointer;font-size:1.5rem}.va-file-upload-list-item--undo{background:none;box-shadow:none}"),R.render=function render$4(e,l,n,p,m,v){const c=a("va-file-upload-undo"),g=a("va-icon"),y=a("va-card");return i(),u(y,{class:s(["va-file-upload-list-item",{"file-upload-list-item--undo":e.removed}]),stripe:e.removed,stripeColor:e.color,"no-margin":"","no-padding":""},{default:r((()=>[e.removed?(i(),u(c,{key:0,onRecover:e.recoverFile},null,8,["onRecover"])):(i(),o("div",B,[d("div",$,f(e.file&&e.file.name),1),d("div",D,f(e.file&&e.file.size),1),t(g,{color:"danger",name:"clear",onClick:l[0]||(l[0]=l=>e.removeFile()),class:"va-file-upload-list-item__delete"})]))])),_:1},8,["stripe","stripeColor","class"])},R.__file="src/components/va-file-upload/VaFileUploadListItem/VaFileUploadListItem.vue";var T=e(R),A=l({name:"VaFileUploadGalleryItem",components:{VaFileUploadUndo:L},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"}},setup(e,{emit:l}){const a=p(""),i=p(!1),o=p(!1),t=m((()=>({backgroundColor:x(e.color,.7)}))),convertToImg=()=>{if(e.file.name&&e.file.image)if(e.file.image.url)a.value=e.file.image.url;else if(e.file.image instanceof File){const l=new FileReader;l.readAsDataURL(e.file.image),l.onload=e=>{var l,i;(null===(l=e.target)||void 0===l?void 0:l.result).includes("image")&&(a.value=null===(i=e.target)||void 0===i?void 0:i.result)}}};return v(convertToImg),c((()=>e.file),convertToImg),{previewImage:a,removed:i,isFocused:o,recoverImage:()=>{i.value=!1},overlayStyles:t,removeImage:()=>{i.value=!0,setTimeout((()=>{i.value&&(l("remove"),i.value=!1)}),2e3)}}}});const M=["src"],G={class:"va-file-upload-gallery-item__overlay"},H=["title"];k(":root{--va-file-upload-gallery-item-text:var(--va-dark);--va-file-upload-gallery-item-text-hover:var(--va-white);--va-file-upload-gallery-item-card-box-shadow:var()}.va-file-upload-gallery-item{align-items:stretch;border-radius:.375rem;display:flex;flex-basis:calc(14.2857% - 0.5rem);margin-bottom:1rem;margin-right:.5rem;max-width:calc(14.2857% - .5rem);overflow:hidden;position:relative;width:100%}@media (max-width:991.98px){.va-file-upload-gallery-item{flex-basis:calc(16.667% - 0.5rem);max-width:calc(16.667% - .5rem)}}@media (max-width:767.98px){.va-file-upload-gallery-item{flex-basis:calc(20% - 0.5rem);max-width:calc(20% - .5rem)}}@media (max-width:575.98px){.va-file-upload-gallery-item{flex-basis:calc(50% - 0.5rem);max-width:calc(50% - .5rem)}}.va-file-upload-gallery-item:last-of-type{margin-right:0}.va-file-upload-gallery-item--focused .va-file-upload-gallery-item__overlay,.va-file-upload-gallery-item:focus .va-file-upload-gallery-item__overlay,.va-file-upload-gallery-item:hover .va-file-upload-gallery-item__overlay{opacity:1;z-index:3}.va-file-upload-gallery-item--focused .va-file-upload-gallery-item__name,.va-file-upload-gallery-item:focus .va-file-upload-gallery-item__name,.va-file-upload-gallery-item:hover .va-file-upload-gallery-item__name{color:var(--va-file-upload-gallery-item-text-hover)}.va-file-upload-gallery-item__overlay{display:flex;flex-direction:column;opacity:0;padding:.5rem}.va-file-upload-gallery-item__overlay,.va-file-upload-gallery-item__overlay-background{height:100%;left:0;position:absolute;top:0;width:100%;z-index:-1}.va-file-upload-gallery-item__image{box-shadow:var(--va-box-shadow);object-fit:cover;width:100%;z-index:1}.va-file-upload-gallery-item__name{color:var(--va-file-upload-gallery-item-text);font-size:.875rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.va-file-upload-gallery-item__delete{cursor:pointer;font-size:1.5rem;margin-top:auto}.va-file-upload-gallery-item--undo{box-shadow:none}.va-file-upload-gallery-item--undo .va-file-upload-gallery-item--undo{align-items:flex-start;display:flex;flex-direction:column;font-size:.875rem;height:100%;justify-content:space-between;padding:.5rem}.va-file-upload-gallery-item--undo .va-file-upload-gallery-item--undo span{margin-right:.5rem}.va-file-upload-gallery-item--undo .va-file-upload-gallery-item--undo .va-button{margin:0}.file-upload-gallery-item_not-image .file-upload-gallery-item__overlay{display:flex}"),A.render=function render$3(e,l,r,n,p,u){const m=a("va-file-upload-undo"),v=a("va-button");return e.removed?(i(),o("div",{key:0,class:s(["va-file-upload-gallery-item",{"va-file-upload-gallery-item--undo":e.removed}])},[t(m,{class:"va-file-upload-gallery-item--undo",onRecover:e.recoverImage},null,8,["onRecover"])],2)):(i(),o("div",{key:1,tabindex:"0",class:s(["va-file-upload-gallery-item",{"file-upload-gallery-item_not-image":!e.previewImage,"va-file-upload-gallery-item--focused":e.isFocused}]),onFocus:l[2]||(l[2]=l=>e.isFocused=!0),onBlur:l[3]||(l[3]=l=>e.isFocused=!1)},[e.previewImage?(i(),o("img",{key:0,src:e.previewImage,alt:"",class:"va-file-upload-gallery-item__image"},null,8,M)):g("v-if",!0),d("div",G,[d("div",{class:"va-file-upload-gallery-item__overlay-background",style:y(e.overlayStyles)},null,4),d("div",{class:"va-file-upload-gallery-item__name",title:e.file.name},f(e.file.name),9,H),t(v,{flat:"",color:"danger",icon:"delete_outline",class:"va-file-upload-gallery-item__delete",onClick:e.removeImage,onFocus:l[0]||(l[0]=l=>e.isFocused=!0),onBlur:l[1]||(l[1]=l=>e.isFocused=!1)},null,8,["onClick"])])],34))},A.__file="src/components/va-file-upload/VaFileUploadGalleryItem/VaFileUploadGalleryItem.vue";var O=e(A),E=l({name:"VaFileUploadSingleItem",components:{VaButton:w},emits:["remove"],props:{file:{type:Object,default:null}}});const K={class:"va-file-upload-single-item"},N={class:"va-file-upload-single-item__name"},P=n(" Delete ");k(".va-file-upload-single-item{align-items:center;display:flex;max-width:100%}.va-file-upload-single-item__name{margin-right:.25rem;max-width:80%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.va-file-upload-single-item__button{font-weight:700;margin-bottom:0;margin-top:0}"),E.render=function render$2(e,l,n,p,u,s){const m=a("va-button");return i(),o("div",K,[d("div",N,f(e.file&&e.file.name),1),t(m,{flat:"",onClick:l[0]||(l[0]=l=>e.$emit("remove")),color:"danger",size:"small",class:"va-file-upload-single-item__button"},{default:r((()=>[P])),_:1})])},E.__file="src/components/va-file-upload/VaFileUploadSingleItem/VaFileUploadSingleItem.vue";var Y=e(E),Z=l({name:"VaFileUploadList",components:{VaFileUploadListItem:T,VaFileUploadGalleryItem:O,VaFileUploadSingleItem:Y},emits:["remove","removeSingle"],props:{type:{type:String,default:""},files:{type:Array,default:null},color:{type:String,default:"success"}},setup(e){const l=m((()=>e.files.map(convertFile))),convertFile=e=>({name:e.name||e.url||"",size:formatSize(e.size),date:formatDate(new Date),image:e}),formatSize=e=>{if(0===e)return"0 Bytes";if(!e)return"";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]},formatDate=(e=new Date)=>e.toLocaleDateString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric",year:"numeric"});return{filesList:l}}});k(".va-file-upload-list{display:flex;flex-wrap:wrap;padding:0 0 1.5rem}.va-file-upload-list--gallery{padding-bottom:.5rem}"),Z.render=function render$1(e,l,t,r,d,n){const p=a("va-file-upload-list-item"),f=a("va-file-upload-gallery-item"),m=a("va-file-upload-single-item");return i(),o("div",{class:s(["va-file-upload-list",`va-file-upload-list--${e.type}`])},["list"===e.type?(i(!0),o(_,{key:0},h(e.filesList,((l,a)=>(i(),u(p,{key:l.name,file:l,color:e.color,onRemove:l=>e.$emit("remove",a)},null,8,["file","color","onRemove"])))),128)):g("v-if",!0),"gallery"===e.type?(i(!0),o(_,{key:1},h(e.filesList,((l,a)=>(i(),u(f,{file:l,key:l.name,color:e.color,onRemove:l=>e.$emit("remove",a)},null,8,["file","color","onRemove"])))),128)):g("v-if",!0),"single"===e.type&&e.filesList.length?(i(),u(m,{key:2,file:e.filesList[e.filesList.length-1],onRemove:l[0]||(l[0]=l=>e.$emit("removeSingle"))},null,8,["file"])):g("v-if",!0)],2)},Z.__file="src/components/va-file-upload/VaFileUploadList/VaFileUploadList.vue";var q=e(Z),J=l({name:"VaFileUpload",components:{VaModal:F,VaButton:w,VaFileUploadList:q},props:{fileTypes:{type:String,default:""},dropzone:{type:Boolean,default:!1},color:{type:String,default:"primary"},disabled:{type:Boolean,default:!1},modelValue:{type:Array,default:()=>[],validator:e=>Array.isArray(e)},type:{type:String,default:"list",validator:e=>["list","gallery","single"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:l}){const a=p(!1),i=p(!1),o=p(null),{getColor:t}=z(),r=m((()=>t(e.color))),d=m((()=>e.dropzone?{backgroundColor:b(r.value,{a:i.value?-.82:-.92})}:{backgroundColor:"transparent"})),n=m({get:()=>e.modelValue,set(e){l("update:modelValue",e)}}),validateFiles=l=>l.filter((l=>{const i=l.name||l.url;if(!i)return!1;if(l.url)return!0;if(["audio/*","video/*","image/*"].find((l=>e.fileTypes.includes(l))))return!0;const o=i.substring(i.lastIndexOf(".")+1).toLowerCase(),t=e.fileTypes.includes(o);return t||(a.value=!0),t})),uploadFile=l=>{var a,i;const o=(null===(a=l.target)||void 0===a?void 0:a.files)||(null===(i=l.dataTransfer)||void 0===i?void 0:i.files);o&&(n.value=[...n.value,...e.fileTypes?validateFiles(Array.from(o)):o])};return v((()=>{Array.isArray(n.value)&&(n.value=validateFiles(n.value))})),{modal:a,dropzoneHighlight:i,fileInputRef:o,colorComputed:r,computedStyle:d,uploadFile:uploadFile,changeFieldValue:e=>{uploadFile(e),o.value&&(o.value.value="")},files:n,removeFile:e=>{n.value=n.value.filter(((l,a)=>a!==e))},removeSingleFile:()=>{n.value=[]},callFileDialogue:()=>{o.value&&o.value.click()}}}});const Q={class:"va-file-upload__field"},W={key:0,class:"va-file-upload__field__text"},X=n(" Upload file "),ee=["accept","multiple","disabled"];k(":root{--va-file-upload-position:relative;--va-file-upload-margin:0.5rem 0;--va-file-upload-list-margin-top:1rem;--va-file-upload-dropzone-background-color:#d6ffd3;--va-file-upload-dropzone-background-color-highlight:#97f890;--va-file-upload-dropzone-overflow:hidden;--va-file-upload-dropzone-border-radius:0.375rem;--va-file-upload-dropzone-cursor:pointer;--va-file-upload-dropzone-text-padding-sm:0 0 1rem;--va-file-upload-dropzone-field-padding:1.5rem 2rem;--va-file-upload-dropzone-field-padding-sm:1.5rem 1rem;--va-file-upload-dropzone-field-overflow:hidden;--va-file-upload-dropzone-field-display:flex;--va-file-upload-dropzone-field-align-items:center;--va-file-upload-dropzone-field-position:relative;--va-file-upload-dropzone-field-button-margin:0;--va-file-upload-dropzone-field-button-z-index:10;--va-file-upload-dropzone-field-text-pr:10px;--va-file-upload-dropzone-list-padding:0 2rem 1rem}.va-file-upload{font-family:var(--va-font-family);margin:var(--va-file-upload-margin);position:var(--va-file-upload-position)}.va-file-upload .va-file-upload-list{margin-top:var(--va-file-upload-list-margin-top)}.va-file-upload--dropzone{background-color:var(--va-file-upload-dropzone-background-color);border-radius:var(--va-file-upload-dropzone-border-radius);cursor:var(--va-file-upload-dropzone-cursor);overflow:var(--va-file-upload-dropzone-overflow)}.va-file-upload--dropzone .va-file-upload__field{align-items:center;display:flex;flex-wrap:wrap;justify-content:center;overflow:visible;padding:var(--va-file-upload-dropzone-field-padding);transition:height .2s}@media (max-width:767.98px){.va-file-upload--dropzone .va-file-upload__field{flex-direction:column;padding:var(--va-file-upload-dropzone-field-padding-sm)}.va-file-upload--dropzone .va-file-upload__field__text{padding:var(--va-file-upload-dropzone-text-padding-sm);text-align:center}}.va-file-upload--dropzone .va-file-upload-list{margin-top:0;padding:var(--va-file-upload-dropzone-list-padding)}.va-file-upload__field{align-items:var(--va-file-upload-dropzone-field-align-items);display:var(--va-file-upload-dropzone-field-display);overflow:var(--va-file-upload-dropzone-field-overflow);position:var(--va-file-upload-dropzone-field-position)}.va-file-upload__field__button{margin:var(--va-file-upload-dropzone-field-button-margin);z-index:var(--va-file-upload-dropzone-field-button-z-index)}.va-file-upload__field__text{padding-right:var(--va-file-upload-dropzone-field-text-pr)}.va-file-upload__field__input{color:transparent;cursor:pointer;height:100%;opacity:0;position:absolute;right:0;top:0;width:100%}.va-file-upload__field__input::-webkit-file-upload-button{cursor:pointer}"),J.render=function render(e,l,n,p,f,m){const v=a("va-button"),c=a("va-file-upload-list"),_=a("va-modal");return i(),o("div",{class:s(["va-file-upload",{"va-file-upload--dropzone":e.dropzone}]),style:y(e.computedStyle)},[d("div",Q,[e.dropzone?(i(),o("div",W," Drag’n’drop files or ")):g("v-if",!0),t(v,{class:"va-file-upload__field__button",disabled:e.disabled,color:e.colorComputed,onChange:e.changeFieldValue,onClick:l[0]||(l[0]=l=>e.callFileDialogue()),icon:"","icon-right":"",style:y({"pointer-events":e.dropzoneHighlight?"none":""})},{default:r((()=>[X])),_:1},8,["disabled","color","onChange","style"])]),d("input",{ref:"fileInputRef",type:"file",class:"va-file-upload__field__input",accept:e.fileTypes,multiple:"single"!==e.type,disabled:e.disabled,onChange:l[1]||(l[1]=(...l)=>e.changeFieldValue&&e.changeFieldValue(...l)),onDragenter:l[2]||(l[2]=l=>e.dropzoneHighlight=!0),onDragleave:l[3]||(l[3]=l=>e.dropzoneHighlight=!1),tabindex:"-1"},null,40,ee),e.files.length?(i(),u(c,{key:0,type:e.type,files:e.files,color:e.colorComputed,onRemove:e.removeFile,onRemoveSingle:e.removeSingleFile},null,8,["type","files","color","onRemove","onRemoveSingle"])):g("v-if",!0),t(_,{modelValue:e.modal,"onUpdate:modelValue":l[4]||(l[4]=l=>e.modal=l),"hide-default-actions":"",title:"File validation",message:"File type is incorrect!"},null,8,["modelValue"])],6)},J.__file="src/components/va-file-upload/VaFileUpload.vue";var le=e(J);export{O as VaFileUploadGalleryItem,q as VaFileUploadList,T as VaFileUploadListItem,Y as VaFileUploadSingleItem,L as VaFileUploadUndo,le as default};
//# sourceMappingURL=index26.js.map
