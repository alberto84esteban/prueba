import{w as e}from"./withConfigTransport.js";import{ref as t,onMounted as a,onBeforeUnmount as o,computed as r,getCurrentInstance as n,defineComponent as i,watch as l,resolveComponent as u,openBlock as s,createElementBlock as m,withKeys as p,renderSlot as v,createVNode as d,normalizeStyle as c,toDisplayString as g,normalizeClass as f,createElementVNode as b,Fragment as y,renderList as V,createBlock as C,mergeProps as L,createSlots as _,withCtx as I,createCommentVNode as x}from"vue";import{c as h}from"./clamp.js";import{u as M,a as w}from"./useStateful.js";import{u as k}from"./color-config.js";import{u as E,a as N}from"./useForm.js";import{f as F,e as R}from"./child-props.js";import{u as j}from"./useSyncProp.js";import z from"./index28.js";import{s as U}from"./style-inject.es.js";import{u as H,a as P}from"./useSize.js";import"./VaConfig.js";import"./toNumber.js";import"colortranslator";import"./VaIcon.js";import"./flatten.js";var $;!function(e){e[e.EMPTY=0]="EMPTY",e[e.HALF=.5]="HALF",e[e.FULL=1]="FULL"}($||($={}));const S={...M,modelValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},useRating=e=>{const{emit:i}=(()=>{const e=n();if(!e)throw new Error("useRating hooks must be used on top of setup function");return{props:e.props,emit:e.emit}})(),{isHovered:l,onMouseEnter:u,onMouseLeave:s}=function useHover(e){const r=t(!1),onMouseEnter=()=>{r.value=!0},onMouseLeave=()=>{r.value=!1};return e&&(a((()=>{var t,a;null===(t=e.value)||void 0===t||t.addEventListener("mouseenter",onMouseEnter),null===(a=e.value)||void 0===a||a.addEventListener("mouseleave",onMouseLeave)})),o((()=>{var t,a;null===(t=e.value)||void 0===t||t.removeEventListener("mouseover",onMouseEnter),null===(a=e.value)||void 0===a||a.removeEventListener("mouseleave",onMouseLeave)}))),{isHovered:r,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave}}(),{valueComputed:m}=w(e,i),p=t(0),v=r((()=>e.hover&&l.value?p.value:m.value));return{visibleValue:v,modelValue:m,hoveredValue:p,isHovered:l,onMouseEnter:u,onMouseLeave:s,onItemValueUpdate:(t,a)=>{const o=t+a;e.clearable&&m.value===o?m.value=0:m.value=o},onItemHoveredValueUpdate:(t,a)=>{e.hover&&(p.value=t+a)},getItemValue:e=>{const t=v.value-e;return h(t,$.EMPTY,$.FULL)}}},B={unselectedColor:{type:String},color:{type:String,default:"primary"},modelValue:{type:Number}},useVaRatingColors=e=>{const{getColor:t,getFocusColor:a,getTextColor:o}=k(),n=r((()=>t(e.color))),i=r((()=>e.unselectedColor?t(e.unselectedColor):a(t(e.color)))),l=r((()=>e.modelValue===$.HALF?`linear-gradient(90deg, ${n.value} 50%, ${i.value} 50%`:e.modelValue===$.EMPTY?i.value:n.value)),u=r((()=>e.modelValue===$.FULL?o(n.value):o(i.value)));return{computedColor:n,backgroundComputed:l,textColorComputed:u}};var A=i({name:"VaRatingItem",components:{VaIcon:z},props:{modelValue:{type:Number,default:0},icon:{type:String,default:"star"},halfIcon:{type:String,default:"star_half"},emptyIcon:{type:String,default:"star_outline"},halves:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},tabindex:{type:Number,default:1},size:{type:[String,Number],default:"medium"},emptyIconColor:{type:String},color:{type:String,default:"primary"}},emits:["update:modelValue","click","hover"],setup(e,{emit:a}){const o=t(),[n]=j("modelValue",e,a,$.EMPTY),i=t(null),u=r((()=>e.hover&&i.value||n.value));return l(i,(()=>a("hover",i.value||$.EMPTY))),{...k(),rootEl:o,onEnter:()=>{n.value=1},onClick:()=>{n.value=i.value||$.FULL,a("click",i.value||$.FULL)},onMouseMove:t=>{if(!o.value)return;const{offsetX:a}=t,r=o.value.clientWidth;e.halves?i.value=a/r<=$.HALF?$.HALF:$.FULL:i.value=$.FULL},onMouseLeave:()=>{i.value=null},visibleValue:u,computedIconName:r((()=>e.halves&&u.value===$.HALF?e.halfIcon:u.value===$.EMPTY?e.emptyIcon:e.icon))}}});const T=["tabindex"];U(".va-rating-item{display:inline-block}.va-rating-item:focus{transform:scale(1.1)}.va-rating-item__wrapper{background-color:transparent;border-style:none;font-size:100%;overflow:visible;padding:0;text-transform:none}"),A.render=function render$2(e,t,a,o,r,n){const i=u("va-icon");return s(),m("div",{ref:"rootEl",class:"va-rating-item",tabindex:e.$props.tabindex,onKeyup:t[0]||(t[0]=p(((...t)=>e.onClick&&e.onClick(...t)),["enter"])),onMousemove:t[1]||(t[1]=(...t)=>e.onMouseMove&&e.onMouseMove(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[v(e.$slots,"default",{props:{value:e.visibleValue,onClick:e.onClick}},(()=>[d(i,{class:"va-rating-item__wrapper",tabindex:"-1",tag:"button",name:e.computedIconName,size:e.$props.size,color:e.getColor(e.$props.color),onClick:e.onClick},null,8,["name","size","color","onClick"])]))],40,T)},A.__file="src/components/va-rating/components/VaRatingItem/VaRatingItem.vue";var Y=i({name:"VaRatingItemNumberButton",props:{...B,...H,itemNumber:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup:e=>({...useVaRatingColors(e),...P(e,"VaRating")})});Y.render=function render$1(e,t,a,o,r,n){return s(),m("button",{class:"va-rating__number-item",tabindex:"-1",style:c({background:e.backgroundComputed,color:e.textColorComputed,width:e.sizeComputed,height:e.sizeComputed,fontSize:e.fontSizeComputed,borderRadius:.125*parseInt(e.fontSizeComputed)+"rem"})},g(e.itemNumber),5)},Y.__file="src/components/va-rating/components/VaRatingItemNumberButton.vue";const K=R(A,["unselectedColor"]),q=R(Y,["modelValue","itemNumber"]);var W=i({name:"VaRating",props:{...S,...B,...E,...K,...q,numbers:{type:Boolean,default:!1},halves:{type:Boolean,default:!1},max:{type:Number,default:5},texts:{type:Array,default:()=>[]}},emits:["update:modelValue"],components:{VaRatingItem:A,VaRatingItemNumberButton:Y},setup(e){const{createComputedClass:t}=N(e),a=useRating(e),o=r((()=>!e.disabled&&!e.readonly));return{...useVaRatingColors(e),...a,rootClass:t("va-rating"),VaRatingItemProps:F(e,K),VaRatingItemNumberButtonProps:F(e,q),isInteractionsEnabled:o,tabindex:r((()=>o.value?0:void 0)),onArrowKeyPress:t=>{const o=e.halves?$.HALF:$.FULL;a.onItemValueUpdate(a.visibleValue.value,o*t)}}}});U(":root{--va-rating-display:flex;--va-rating-number-item-font-size:inherit;--va-rating-number-item-margin:0.1em;--va-rating-number-item-font-weight:700;--va-rating-number-item-cursor:pointer;--va-rating-item-wrapper-display:flex;--va-rating-item-wrapper-cursor:pointer;--va-rating-item-display:flex}.va-rating{display:var(--va-rating-display);font-family:var(--va-font-family)}.va-rating__number-item{align-items:center;background-color:transparent;border-style:none;cursor:pointer;display:flex;font-size:100%;font-size:var(--va-rating-number-item-font-size);font-weight:var(--va-rating-number-item-font-weight);justify-content:center;margin:var(--va-rating-number-item-margin);overflow:visible;padding:0;text-transform:none}.va-rating--disabled .va-rating__number-item{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-rating--readonly .va-rating__number-item{cursor:default}.va-rating__item-wrapper{cursor:var(--va-rating-item-wrapper-cursor);display:var(--va-rating-item-wrapper-display)}.va-rating--disabled .va-rating__item-wrapper,.va-rating--readonly .va-rating__item-wrapper{cursor:default}.va-rating-item{align-items:center;display:var(--va-rating-item-display);display:flex;justify-content:center}.va-rating--disabled .va-rating-item{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-rating--disabled .va-rating-item__wrapper,.va-rating--readonly .va-rating-item .va-rating-item__wrapper{cursor:auto!important}.va-rating__text-wrapper{padding-left:10px}"),W.render=function render(e,t,a,o,r,n){const i=u("VaRatingItemNumberButton"),l=u("va-rating-item");return s(),m("div",{class:f(["va-rating",e.rootClass])},[b("div",{onKeyup:[t[0]||(t[0]=p((t=>e.onArrowKeyPress(-1)),["left"])),t[1]||(t[1]=p((t=>e.onArrowKeyPress(1)),["right"]))],onMouseenter:t[2]||(t[2]=t=>e.onMouseEnter()),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t)),class:"va-rating__item-wrapper"},[(s(!0),m(y,null,V(e.$props.max,(t=>(s(),C(l,L(e.VaRatingItemProps,{"model-value":e.getItemValue(t-1),key:t,"empty-icon-color":e.$props.unselectedColor,tabindex:e.tabindex,onHover:a=>e.isInteractionsEnabled&&e.onItemHoveredValueUpdate(t-1,a),"onUpdate:modelValue":a=>e.isInteractionsEnabled&&e.onItemValueUpdate(t-1,a)}),_({_:2},[e.$props.numbers?{name:"default",fn:I((({props:a})=>[d(i,L(e.VaRatingItemNumberButtonProps,{"model-value":a.value,"item-number":t,onClick:a.onClick}),null,16,["model-value","item-number","onClick"])]))}:void 0]),1040,["model-value","empty-icon-color","tabindex","onHover","onUpdate:modelValue"])))),128))],32),e.$props.texts&&e.$props.texts.length===e.$props.max?(s(),m("span",{key:0,class:"va-rating__text-wrapper",style:c({color:e.computedColor})},g(e.$props.texts[Math.round(e.visibleValue)-1]),5)):x("v-if",!0)],2)},W.__file="src/components/va-rating/VaRating.vue";var X=e(A),D=e(W);export{X as VaRatingItem,D as default};
//# sourceMappingURL=index41.js.map
