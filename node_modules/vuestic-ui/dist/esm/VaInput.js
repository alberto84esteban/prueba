import{ref as e,onMounted as t,onBeforeUnmount as r,watch as a,computed as n,unref as o,defineComponent as i,resolveComponent as l,openBlock as p,createElementBlock as s,normalizeClass as u,createElementVNode as c,renderSlot as d,createCommentVNode as v,normalizeStyle as m,createTextVNode as b,toDisplayString as g,normalizeProps as _,guardReactiveProps as f,createVNode as h,nextTick as y,mergeProps as w,toRefs as k,createBlock as x,createSlots as V,withCtx as C,withModifiers as $,renderList as z}from"vue";import{u as I}from"./useForm.js";import{V as S,u as B,a as P,b as j}from"./index60.js";import R from"cleave.js";import{u as E}from"./useEmitProxy.js";import{g as F}from"./color-config.js";import{s as M}from"./style-inject.es.js";import{p as L}from"./pick.js";import{s as A,o as H}from"./VaIcon.js";import{f as q,e as T}from"./child-props.js";const N={creditCard:{creditCard:!0},date:{date:!0,datePattern:["d","m","Y"]},time:{time:!0,timePattern:["h","m"],timeFormat:"24"},numeral:{numeral:!0,numeralThousandsGroupStyle:"thousand"}},O={mask:{type:[String,Object],default:""},returnRaw:{type:Boolean,default:!0},modelValue:{type:String}},useCleave=(o,i,l)=>{const p=e(),destroyCleave=()=>{p.value&&p.value.destroy()},initCleave=()=>{var e;(destroyCleave(),o.value)&&(p.value=new R(o.value,"string"==typeof(e=i.mask)?N[e]?{...N[e]}:{}:{...e}))};t((()=>{initCleave()})),r((()=>{destroyCleave()})),a((()=>[o.value,i.mask]),(()=>{initCleave()}));const s=n((()=>p.value&&i.returnRaw&&i.modelValue===p.value.getRawValue()?p.value.getFormattedValue():i.modelValue));return{cleave:p,computedValue:s,onInput:e=>{const t=e.target.value;("string"===i.mask||Object.keys(i.mask).length)&&p.value&&(p.value.setRawValue(t),i.returnRaw)?l("update:modelValue",p.value.getRawValue()):l("update:modelValue",t)}}};var W=i({name:"VaInputWrapper",components:{VaMessageList:S},props:{...I,...B,label:{type:String,default:""},color:{type:String,default:"primary"},outline:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},error:{type:Boolean,default:!1},success:{type:Boolean,default:!1},requiredMark:{type:Boolean,default:!1}},emits:["click","click-prepend","click-append","click-prepend-inner","click-append-inner","click-icon"],setup(e){const{createModifiersClasses:t}=(r="va-input",{createModifiersClasses:(e,t=[])=>n((()=>{const a=e();return[r,...o(t),...Object.keys(a).filter((e=>a[e])).map((e=>`${r}--${e}`))]}))});var r;const a=n((()=>F(e.color)));return{wrapperClass:t((()=>({outline:e.outline,bordered:e.bordered,solid:!e.outline&&!e.bordered,disabled:e.disabled,readonly:e.readonly,labeled:!!e.label,success:e.success,focused:e.focused,error:e.error}))),colorComputed:a,borderColorComputed:n((()=>e.focused?a.value:void 0)),messagesColor:n((()=>e.error?"danger":e.success?"success":"")),messagesComputed:n((()=>e.error?e.errorMessages:e.messages)),errorLimit:n((()=>e.error?e.errorCount:99))}}});const Y={class:"va-input-wrapper__input"},G={class:"va-input-wrapper__content"},D={class:"va-input__content-wrapper"},J={class:"va-input__content"},K={key:0,class:"va-input__required-mark"},Q={key:1,class:"va-input__content__input"},U={class:"va-input-wrapper__message-list-wrapper"};M(":root{--va-input-color:var(--va-background,#f5f9fb);--va-input-text-color:var(--va-dark,#262824);--va-input-scroll-color:var(--va-divided,#e1e9f8);--va-input-bordered-color:var(--va-divided,#e1e9f8);--va-input-border-width:1px;--va-input-border-radius:4px;--va-input-min-height:36px;--va-input-cursor:text;--va-message-list-color:var(--va-gray);--va-input-success-color:var(--va-success);--va-input-success-background:#f1f7ee;--va-input-error-color:var(--va-danger);--va-input-error-background:#fdefef;--va-input-content-horizontal-padding:12px;--va-input-content-items-gap:6px;--va-input-line-height:20px;--va-input-font-size:1rem;--va-input-font-weight:normal;--va-input-font-style:normal;--va-input-font-stretch:normal;--va-input-letter-spacing:normal;--va-input-placeholder-text-color:#bac2bb;--va-input-disabled-opacity:0.4;--va-input-container-label-max-width:calc(100% - 0.75rem);--va-input-container-label-color:#4ae387;--va-input-container-label-font-size:0.6rem;--va-input-container-label-letter-spacing:0.0375rem;--va-input-container-label-line-height:1.2;--va-input-container-label-font-weight:700;--va-input-container-label-text-transform:uppercase;--va-input-container-label-transform-origin:top left}.va-input{color:var(--va-input-text-color);cursor:var(--va-input-cursor);font-family:var(--va-font-family);position:relative}.va-input--readonly{cursor:default}.va-input--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-input__container{align-items:center;border:var(--va-input-border-width) solid var(--va-input-color);display:flex;min-height:var(--va-input-min-height);overflow:hidden;padding:0 var(--va-input-content-horizontal-padding);position:relative;width:100%}.va-input__container>*{line-height:0;padding-right:var(--va-input-content-items-gap)}.va-input__container>:last-child{padding-right:0}.va-input-wrapper__input{align-items:center;display:flex}.va-input-wrapper__message-list-wrapper{margin-top:2px}.va-input-wrapper__content{flex-grow:1;position:relative}.va-input-wrapper__append-inner,.va-input-wrapper__prepend-inner,.va-input__append-inner,.va-input__prepend-inner{align-content:center;align-items:center;display:flex;justify-content:center}.va-input__content-wrapper{align-items:center;display:flex;width:100%}.va-input__content-wrapper .va-input__content{position:relative;width:100%}.va-input__content-wrapper .va-input__content input{cursor:inherit}.va-input__content-wrapper .va-input__content__input{background-color:transparent;border-style:none;color:var(--va-input-text-color);font-family:inherit;font-size:var(--va-input-font-size);font-stretch:var(--va-input-font-stretch);font-style:var(--va-input-font-style);font-weight:var(--va-input-font-weight);letter-spacing:var(--va-input-letter-spacing);line-height:var(--va-input-line-height);min-height:var(--va-input-line-height);outline:none;scrollbar-color:var(--va-input-scroll-color) transparent;scrollbar-width:thin;transform:translateY(-1px);width:100%}.va-input__content-wrapper .va-input__content__input::-webkit-scrollbar{height:4px;width:4px}.va-input__content-wrapper .va-input__content__input::-webkit-scrollbar-track{border-radius:10px;box-shadow:none}.va-input__content-wrapper .va-input__content__input::-webkit-scrollbar-thumb{background:var(--va-input-scroll-color);border-radius:2px;opacity:.3}.va-input__content-wrapper .va-input__content__input::-webkit-scrollbar{width:10px}.va-input__content-wrapper .va-input__content__input::-moz-placeholder{color:var(--va-input-placeholder-text-color)}.va-input__content-wrapper .va-input__content__input:-ms-input-placeholder{color:var(--va-input-placeholder-text-color)}.va-input__content-wrapper .va-input__content__input::placeholder{color:var(--va-input-placeholder-text-color)}.va-input__content-wrapper .va-input__content__input:disabled{opacity:var(--va-input-disabled-opacity)}.va-input__icons{align-items:center;display:flex;justify-content:center}.va-input__icons>*{margin-right:calc(var(--va-input-content-items-gap)/4)}.va-input__icons>:last-child{margin-right:0}.va-input__required-mark{color:var(--va-danger);font-size:18px;font-weight:var(--va-input-container-label-font-weight);transform:translateY(-2px)}.va-input textarea{margin:12px 0;resize:vertical}.va-input--labeled .va-input__content-wrapper{align-items:flex-end;height:100%;padding-top:12px}.va-input--labeled .va-input__label{color:var(--va-input-container-label-color);display:flex;font-size:var(--va-input-container-label-font-size);font-weight:var(--va-input-container-label-font-weight);height:12px;left:0;letter-spacing:var(--va-input-container-label-letter-spacing,var(--va-letter-spacing));line-height:var(--va-input-container-label-line-height);max-width:var(--va-input-container-label-max-width);overflow:hidden;padding-top:1px;position:absolute;text-overflow:ellipsis;text-transform:var(--va-input-container-label-text-transform);top:0;transform:translateY(-100%);transform-origin:top left;white-space:nowrap}.va-input--labeled textarea{margin-top:0}.va-input--solid .va-input__container{background:var(--va-input-color);border-color:var(--va-input-color);border-radius:var(--va-input-border-radius)}.va-input--solid.va-input--success .va-input__container{background:var(--va-input-success-background);border-color:var(--va-input-success-color)}.va-input--solid.va-input--error .va-input__container{background:var(--va-input-error-background);border-color:var(--va-input-error-color)}.va-input--outline .va-input__container{border-color:var(--va-input-bordered-color);border-radius:0}.va-input--outline.va-input--success .va-input__container{background:var(--va-input-success-background);border-color:var(--va-input-success-color)}.va-input--outline.va-input--error .va-input__container{background:var(--va-input-error-background);border-color:var(--va-input-error-color)}.va-input--bordered__border{border-bottom:var(--va-input-border-width) solid;border-color:var(--va-input-bordered-color);bottom:0;height:0;position:absolute;width:100%}.va-input--bordered .va-input__container{background:var(--va-input-color);border-color:transparent!important;border-top-left-radius:var(--va-input-border-radius);border-top-right-radius:var(--va-input-border-radius)}.va-input--bordered.va-input--success .va-input__container{background:var(--va-input-success-background)}.va-input--bordered.va-input--success .va-input_bordered__border{border-color:var(--va-input-success-color)}.va-input--bordered.va-input--error .va-input__container{background:var(--va-input-error-background)}.va-input--bordered.va-input--error .va-input_bordered__border{border-color:var(--va-input-error-color)}"),W.render=function render$2(e,t,r,a,n,o){const i=l("va-message-list");return p(),s("div",{class:u(["va-input-wrapper",e.wrapperClass]),onClick:t[5]||(t[5]=t=>e.$emit("click",t))},[c("div",Y,[e.$slots.prepend?(p(),s("div",{key:0,class:"va-input-wrapper__prepend-inner",onClick:t[0]||(t[0]=t=>e.$emit("click-prepend"))},[d(e.$slots,"prepend")])):v("v-if",!0),c("div",G,[c("div",{class:"va-input__container",ref:"container",style:m({borderColor:e.borderColorComputed})},[e.$slots.prependInner?(p(),s("div",{key:0,class:"va-input__prepend-inner",onClick:t[1]||(t[1]=t=>e.$emit("click-prepend-inner",t))},[d(e.$slots,"prependInner")])):v("v-if",!0),c("div",D,[c("div",J,[e.label?(p(),s("label",{key:0,"aria-hidden":"true",class:"va-input__label",style:m({color:e.colorComputed})},[b(g(e.label)+" ",1),e.requiredMark?(p(),s("span",K," * ")):v("v-if",!0)],4)):v("v-if",!0),e.$slots.content?(p(),s("div",Q,[d(e.$slots,"content")])):v("v-if",!0),d(e.$slots,"default")])]),e.$slots.icon?(p(),s("div",{key:1,class:"va-input__icons",onClick:t[2]||(t[2]=t=>e.$emit("click-icon",t))},[d(e.$slots,"icon")])):v("v-if",!0),e.$slots.appendInner?(p(),s("div",{key:2,class:"va-input__append-inner",onClick:t[3]||(t[3]=t=>e.$emit("click-append-inner",t))},[d(e.$slots,"appendInner")])):v("v-if",!0)],4),e.bordered?(p(),s("div",{key:0,class:"va-input--bordered__border",style:m({borderColor:e.borderColorComputed})},null,4)):v("v-if",!0)]),e.$slots.append?(p(),s("div",{key:1,class:"va-input-wrapper__append-inner",onClick:t[4]||(t[4]=t=>e.$emit("click-append"))},[d(e.$slots,"append")])):v("v-if",!0)]),c("div",U,[d(e.$slots,"messages",_(f({messages:e.messagesComputed,errorLimit:e.errorLimit,color:e.messagesColor})),(()=>[h(i,{color:e.messagesColor,"model-value":e.messagesComputed,limit:e.errorLimit},null,8,["color","model-value","limit"])]))])],2)},W.__file="src/components/va-input/components/VaInputWrapper.vue";const X={clearable:{type:Boolean,default:!1},clearableIcon:{type:String,default:"highlight_off"},clearValue:{type:String,default:""}},Z=["clear"],useClearable=(e,t,r,a)=>{const o=[null,void 0,e.clearValue],i=n((()=>e.clearable&&!e.disabled&&!e.readonly&&!o.includes(t.value))),l=n((()=>(null==r?void 0:r.value)?e.color||"primary":(null==a?void 0:a.value)?"danger":e.success?"success":"gray")),p=n((()=>({name:e.clearableIcon,color:l.value,size:"small"})));return{canBeCleared:i,clearIconColor:l,clearIconProps:p}},ee=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],getNodeHeightStyles=e=>{const t=window.getComputedStyle(e);return{boxSizing:t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),padding:parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),border:parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),styles:ee.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";")+";",lineHeight:parseInt(t.getPropertyValue("line-height"))}};let te=null;const createHiddenTextarea=(e,t)=>{te||(te=document.createElement("textarea")),te.setAttribute("style",t+"\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important';\n"),te.value=e.value||e.placeholder||"";const r=e.getAttribute("wrap");return null!==r?te.setAttribute("wrap",r):te.removeAttribute("wrap"),te},positiveNumberValidator=e=>{if(e>0&&(0|e)===e)return!0;throw new Error(`\`minRows|maxRows\` must be a positive integer greater than 0, but ${e} is provided`)},{createEmits:re,createListeners:ae}=E(["input","change","click","update:modelValue"]);var ne=i({name:"VaTextarea",props:{...I,modelValue:{type:[String,Number],default:""},placeholder:{type:String},autosize:{type:Boolean,default:!1},minRows:{type:Number,default:1,validator:positiveNumberValidator},maxRows:{type:Number,validator:positiveNumberValidator}},emits:re(),setup(r,{emit:o}){const i=e(),l=e(-1),p=e(-1),{calculateRowHeight:s,calculateHeight:u}=(e=>({calculateRowHeight:()=>e.value?getNodeHeightStyles(e.value).lineHeight:0,calculateHeight:()=>{if(!e.value)return 0;const{boxSizing:t,padding:r,border:a,styles:n}=getNodeHeightStyles(e.value),o=createHiddenTextarea(e.value,n);document.body.appendChild(o);let i=o.scrollHeight;return"border-box"===t?i+=a:"content-box"===t&&(i-=r),document.body.removeChild(o),i}}))(i),c=n((()=>(r.autosize||r.maxRows||1!==r.minRows)&&i.value)),updateHeight=()=>{c.value&&(p.value=u())};t((()=>{c.value&&(l.value=s()),updateHeight()})),a((()=>r.modelValue),(()=>{y(updateHeight)}));const d=n((()=>({minHeight:l.value*r.minRows+"px",maxHeight:r.maxRows&&l.value*r.maxRows+"px",height:p.value+"px",resize:c.value&&"none"}))),v=n((()=>({...L(r,["disabled","readonly","placeholder"])})));return{textarea:i,computedStyle:d,listeners:ae(o),computedProps:v}},methods:{focus(){var e;null===(e=this.textarea)||void 0===e||e.focus()},blur(){var e;null===(e=this.textarea)||void 0===e||e.blur()}}});const oe=["value"];M(".textarea{border:0;font-family:var(--va-font-family);padding:0}"),ne.render=function render$1(e,t,r,a,n,o){return p(),s("textarea",w({ref:"textarea",class:"textarea"},{...e.computedProps,...e.listeners},{value:e.modelValue,style:e.computedStyle}),null,16,oe)},ne.__file="src/components/va-input/components/VaTextarea/VaTextarea.vue";const ie=T(ne),{createEmits:le,createListeners:pe}=E(["change","keyup","keypress","keydown","focus","blur"]),{createEmits:se,createListeners:ue}=E(["click","click-prepend","click-append","click-prepend-inner","click-append-inner","click-icon"]);var ce=i({name:"VaInput",components:{VaInputWrapper:W,VaTextarea:ne,VaIcon:A},props:{...I,...B,...X,...O,...ie,placeholder:{type:String,default:""},tabindex:{type:Number,default:0},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},type:{type:String,default:"text"},loading:{type:Boolean,default:!1},color:{type:String,default:"primary"},outline:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},requiredMark:{type:Boolean,default:!1}},emits:["update:modelValue",...P,...Z,...le(),...se()],inheritAttrs:!1,setup(t,{emit:r,attrs:a,slots:o}){const i=e(),reset=()=>{r("update:modelValue",t.clearValue),r("clear")},l=n((()=>{const e=["icon"];return Object.keys(o).filter((t=>!e.includes(t)))})),{isFocused:p,listeners:s,computedError:u,computedErrorMessages:c}=j(t,r,reset,(()=>{var e;null===(e=i.value)||void 0===e||e.focus()})),{modelValue:d}=k(t),{canBeCleared:v,clearIconProps:m}=useClearable(t,d,p,u),b=n((()=>"textarea"===t.type?void 0:i.value)),{computedValue:g,onInput:_}=useCleave(b,t,r),f=pe(r),h={...f,onFocus:e=>{f.onFocus(e),s.onFocus()},onBlur:e=>{f.onBlur(e),s.onBlur()},onInput:_},y=n((()=>({ariaLabel:t.label,...H(a,["class","style"])}))),w=n((()=>({...y.value,...L(t,["type","tabindex","disabled","readonly","placeholder"])})));return{input:i,inputEvents:h,computedChildAttributes:y,computedInputAttributes:w,textareaProps:q(t,ie),computedValue:g,computedError:u,computedErrorMessages:c,isFocused:p,canBeCleared:v,clearIconProps:m,fieldListeners:ue(r),reset:reset,filterSlots:l}},methods:{focus(){var e;null===(e=this.input)||void 0===e||e.focus()},blur(){var e;null===(e=this.input)||void 0===e||e.blur()}}});const de=["value"];ce.render=function render(e,t,r,a,n,o){const i=l("va-icon"),u=l("VaTextarea"),c=l("VaInputWrapper");return p(),x(c,w(e.fieldListeners,{class:e.$attrs.class,style:e.$attrs.style,color:e.color,readonly:e.readonly,disabled:e.disabled,success:e.success,messages:e.messages,error:e.computedError,"error-messages":e.computedErrorMessages,"error-count":e.errorCount,label:e.label,bordered:e.bordered,outline:e.outline,focused:e.isFocused,requiredMark:e.requiredMark,onClick:t[1]||(t[1]=t=>e.input&&e.input.focus())}),V({icon:C((r=>[e.success?(p(),x(i,{key:0,color:"success",name:"check_circle",size:"small"})):v("v-if",!0),e.computedError?(p(),x(i,{key:1,color:"danger",name:"warning",size:"small"})):v("v-if",!0),e.canBeCleared?(p(),x(i,w({key:2},e.clearIconProps,{onClick:t[0]||(t[0]=$((t=>e.reset()),["stop"]))}),null,16)):v("v-if",!0),e.loading?(p(),x(i,{key:3,color:e.color,size:"small",name:"loop",spin:"counter-clockwise"},null,8,["color"])):v("v-if",!0),d(e.$slots,"icon",_(f(r)))])),default:C((()=>["textarea"!==e.type||e.$slots.content?e.$slots.content?v("v-if",!0):(p(),s("input",w({key:1,ref:"input",class:"va-input__content__input"},{...e.computedInputAttributes,...e.inputEvents},{value:e.computedValue}),null,16,de)):(p(),x(u,w({key:0,ref:"input"},{...e.computedChildAttributes,...e.textareaProps,...e.inputEvents},{class:"va-input__content__input"}),null,16))])),_:2},[z(e.filterSlots,(t=>({name:t,fn:C((r=>[d(e.$slots,t,_(f(r)))]))})))]),1040,["class","style","color","readonly","disabled","success","messages","error","error-messages","error-count","label","bordered","outline","focused","requiredMark"])},ce.__file="src/components/va-input/VaInput.vue";export{Z as a,useClearable as b,ce as s,X as u};
//# sourceMappingURL=VaInput.js.map
