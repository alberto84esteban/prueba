import{w as e}from"./withConfigTransport.js";import{__decorate as o}from"tslib";import{inject as a,resolveComponent as t,openBlock as s,createElementBlock as r,normalizeClass as l,createElementVNode as i,mergeProps as n,toHandlers as c,withKeys as d,renderSlot as h,normalizeProps as p,guardReactiveProps as v,normalizeStyle as u,createBlock as m,createCommentVNode as b,toDisplayString as g,createVNode as y}from"vue";import{V as f,m as x,s as C,O as _,p as w}from"./vue-class-component.esm-bundler.js";import j from"./index28.js";import{C as k}from"./ColorMixin.js";import{h as P}from"./color-config.js";import{S}from"./StatefulMixin.js";import{u as V}from"./useKeyboardOnlyFocus.js";import{A}from"./VaAccordion.vue_vue&type=script&lang.js";import{s as F}from"./style-inject.es.js";import"./VaConfig.js";import"./VaIcon.js";import"./flatten.js";import"./useSize.js";import"colortranslator";import"./cStatefulMixin.js";const D=f.with(class Props{constructor(){this.modelValue=w({type:Boolean,default:!1}),this.disabled=w({type:Boolean,default:!1}),this.header=w({type:String,default:""}),this.icon=w({type:String,default:""}),this.solid=w({type:Boolean,default:!1}),this.color=w({type:String,default:""}),this.textColor=w({type:String,default:""}),this.colorAll=w({type:Boolean,default:!1})}});let I=class VaCollapse extends(x(S,k,D)){constructor(){super(...arguments),this.height=0,this.transitionDuration=this.getTransitionDuration(),this.mutationObserver=null,this.valueCollapse={value:void 0},this.accordion=C((()=>a(A,{isInsideAccordion:!1,getProps:()=>{},getState:()=>{},onChildChange:e=>{},onChildMounted:e=>{},onChildUnmounted:e=>{}}))),this.SetupContext=C((()=>{const{hasKeyboardFocus:e,keyboardFocusListeners:o}=V();return{hasKeyboardFocus:e,keyboardFocusListeners:o}}))}get body(){var e;return null===(e=this.$refs)||void 0===e?void 0:e.body}get valueProxy(){return this.accordion.isInsideAccordion?this.valueCollapse.value:this.valueComputed}set valueProxy(e){this.accordion.isInsideAccordion&&(this.valueCollapse.value=e),this.valueComputed=e,this.setCollapseParams()}get computedClasses(){const e=this.accordion.getProps();return{"va-collapse--disabled":this.disabled,"va-collapse--solid":this.solid,"va-collapse--active":this.solid&&this.valueProxy,"va-collapse--popout":(null==e?void 0:e.popout)&&this.valueProxy,"va-collapse--inset":(null==e?void 0:e.inset)&&this.valueProxy}}get contentStyle(){return{paddingLeft:this.icon&&0,color:this.textColor?this.theme.getColor(this.textColor):"",backgroundColor:this.color?this.colorComputed:"",boxShadow:this.SetupContext.hasKeyboardFocus?"0 0 0.5rem 0 rgba(0, 0, 0, 0.3)":""}}get stylesComputed(){var e;return this.valueProxy&&(null===(e=this.$slots.default())||void 0===e?void 0:e[0])?{visibility:"visible",height:this.height+"px",transitionDuration:this.transitionDuration+"s",background:this.color&&this.colorAll?P(this.colorComputed):""}:{visibility:"hidden",height:this.height+"px",transitionDuration:this.transitionDuration+"s"}}get collapseIndexComputed(){return this.disabled?-1:0}changeValue(){this.disabled||(this.valueProxy=!this.valueProxy,this.accordion.onChildChange(this))}getHeight(){var e;if(!this.valueProxy)return 0;return Array.from(null===(e=this.body)||void 0===e?void 0:e.childNodes).reduce(((e,o)=>e+=3===o.nodeType?this.getTextNodeHeight(o):o.clientHeight),0)}getTransitionDuration(){const e=this.height/1e3*.2;return e>.2?e:.2}getTextNodeHeight(e){const o=document.createRange();o.selectNodeContents(e);const a=o.getBoundingClientRect();return a.bottom-a.top}setCollapseParams(){this.height=this.getHeight(),this.transitionDuration=this.getTransitionDuration()}mounted(){this.getHeight(),this.setCollapseParams(),this.mutationObserver=new MutationObserver((()=>{setTimeout((()=>this.setCollapseParams()),16)})),this.mutationObserver.observe(this.body,{attributes:!0,childList:!0,subtree:!0}),this.accordion.isInsideAccordion&&this.accordion.onChildMounted(this)}beforeUnmount(){this.mutationObserver&&this.mutationObserver.disconnect(),this.accordion.isInsideAccordion&&this.accordion.onChildUnmounted(this)}};I=o([_({name:"VaCollapse",components:{VaIcon:j},emits:["focus"]})],I);var O=I;const T=["tabindex"],K={class:"va-collapse__header__text"};F(":root{--va-collapse-transition:all 0.3s linear;--va-collapse-popout-margin:0.5rem -0.5rem;--va-collapse-inset-margin:0.5rem 0.5rem;--va-collapse-body-transition:all 0.3s linear;--va-collapse-body-overflow:hidden;--va-collapse-body-margin-top:0.1rem;--va-collapse-header-content-display:flex;--va-collapse-header-content-justify-content:space-between;--va-collapse-header-content-cursor:pointer;--va-collapse-header-content-background-color:#f5f8f9;--va-collapse-header-content-box-shadow:var(--va-box-shadow);--va-collapse-header-content-border-radius:0.375rem;--va-collapse-header-content-align-items:center;--va-collapse-header-content-padding-top:0.75rem;--va-collapse-header-content-padding-bottom:0.75rem;--va-collapse-header-content-padding-left:1rem;--va-collapse-header-content-text-width:100%;--va-collapse-header-content-icon-min-width:1.5rem;--va-collapse-header-content-icon-margin-left:0.5rem;--va-collapse-header-content-icon-margin-right:0.5rem;--va-collapse-header-content-icon-color:#adb3b9;--va-collapse-solid-box-shadow:var(--va-box-shadow);--va-collapse-solid-border-radius:0.375rem;--va-collapse-solid-header-content-background-color:#f5f8f9;--va-collapse-solid-header-content-box-shadow:none;--va-collapse-solid-header-content-border-radius:0.375rem;--va-collapse-solid-header-content-transition:ease-in 0.3s;--va-collapse-solid-body-border-radius:0 0 0.375rem 0.375rem;--va-collapse-solid-body-margin-top:0}.va-collapse{font-family:var(--va-font-family);transition:var(--va-collapse-transition,var(--va-swing-transition))}.va-collapse__body{margin-top:var(--va-collapse-body-margin-top);overflow:var(--va-collapse-body-overflow);transition:var(--va-collapse-body-transition)}.va-collapse__header__content{align-items:var(--va-collapse-header-content-align-items);background-color:var(--va-collapse-header-content-background-color);border-radius:var(--va-collapse-header-content-border-radius,var(--va-block-border-radius));box-shadow:var(--va-collapse-header-content-box-shadow,var(--va-block-box-shadow));cursor:var(--va-collapse-header-content-cursor);display:var(--va-collapse-header-content-display);justify-content:var(--va-collapse-header-content-justify-content);padding-bottom:var(--va-collapse-header-content-padding-bottom);padding-left:var(--va-collapse-header-content-padding-left);padding-top:var(--va-collapse-header-content-padding-top)}.va-collapse__header__text{width:var(--va-collapse-header-content-text-width)}.va-collapse__header__icon{align-items:center;color:var(--va-collapse-header-content-icon-color);display:flex;justify-content:center;margin-left:var(--va-collapse-header-content-icon-margin-left);margin-right:var(--va-collapse-header-content-icon-margin-right);min-width:var(--va-collapse-header-content-icon-min-width)}.va-collapse--solid{border-radius:var(--va-collapse-solid-border-radius);box-shadow:var(--va-collapse-solid-box-shadow)}.va-collapse--solid .va-collapse__header__content{background-color:var(--va-collapse-solid-header-content-background-color);border-radius:var(--va-collapse-solid-header-content-border-radius,var(--va-block-border-radius));box-shadow:var(--va-collapse-solid-header-content-box-shadow,var(--va-block-box-shadow));transition:var(--va-collapse-solid-header-content-transition)}.va-collapse--solid .va-collapse__body{border-radius:var(--va-collapse-solid-body-border-radius);margin-top:var(--va-collapse-solid-body-margin-top)}.va-collapse--popout{margin:var(--va-collapse-popout-margin)}.va-collapse--inset{margin:var(--va-collapse-inset-margin)}.va-collapse--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"),O.render=function render(e,o,a,f,x,C){const _=t("va-icon");return s(),r("div",{class:l(["va-collapse",e.computedClasses])},[i("div",n({class:"va-collapse__header"},c(e.SetupContext.keyboardFocusListeners),{onClick:o[0]||(o[0]=o=>e.changeValue()),onFocus:o[1]||(o[1]=o=>e.$emit("focus")),onKeydown:[o[2]||(o[2]=d((o=>e.changeValue()),["enter"])),o[3]||(o[3]=d((o=>e.changeValue()),["space"]))],tabindex:e.collapseIndexComputed}),[h(e.$slots,"header",p(v({value:e.valueProxy,hasKeyboardFocus:e.SetupContext.hasKeyboardFocus})),(()=>[i("div",{class:"va-collapse__header__content",style:u(e.contentStyle)},[e.icon?(s(),m(_,{key:0,class:"va-collapse__header__icon",name:e.icon,color:e.textColor},null,8,["name","color"])):b("v-if",!0),i("div",K,g(e.header),1),y(_,{class:"va-collapse__header__icon",name:e.valueProxy?"expand_less":"expand_more",color:e.textColor},null,8,["name","color"])],4)]))],16,T),i("div",{class:"va-collapse__body",ref:"body",style:u(e.stylesComputed)},[h(e.$slots,"default")],4)],2)},O.__file="src/components/va-collapse/VaCollapse.vue";var H=e(O);export{H as default};
//# sourceMappingURL=index16.js.map
