import{w as e}from"./withConfigTransport.js";import{ref as o,defineComponent as r,computed as n,watch as t,resolveComponent as a,openBlock as s,createBlock as l,normalizeClass as p,normalizeStyle as i,withKeys as u,withModifiers as d,withCtx as c,createVNode as m,mergeProps as v,createSlots as f,renderSlot as w,normalizeProps as g,guardReactiveProps as I,createCommentVNode as V,renderList as h}from"vue";import{s as y,o as j}from"./VaIcon.js";import{s as k}from"./VaTimePicker.js";import{s as C,a as S,u as D,b}from"./VaInput.js";import{a as P,s as T}from"./VaDropdownContent.js";import{u as _}from"./useSyncProp.js";import{a as M,u as O,b as x}from"./index60.js";import{e as $,f as E}from"./child-props.js";import{g as B}from"./utils.js";import"./VaConfig.js";import"./flatten.js";import"./color-config.js";import"colortranslator";import"./useSize.js";import"./style-inject.es.js";import"./useFocus.js";import"./cStatefulMixin.js";import"./useForm.js";import"cleave.js";import"./useEmitProxy.js";import"./pick.js";import"tslib";import"./vue-class-component.esm-bundler.js";import"asva-executors";import"@popperjs/core";import"./StatefulMixin.js";import"./consts.js";import"./useColor.js";const defaultParseDateFunction=e=>{const o=new Date,[r,n,t]=(e=>{const o=e.match(/[0-9]{1,2}/g);return o?o.map((e=>Number(e))):[]})(e),a=(e=>{const o=e.match(/pm|am/i);return o?Number("pm"===o[0].toLowerCase()):null})(e);if(!r)return null;const s=null!==a&&r<=12,l=s&&!!a,p=s&&12===r?0:r;return o.setHours(Math.min(p||0,s?12:24)+(l?12:0)),o.setMinutes(Math.min(n||0,60)),o.setSeconds(Math.min(t||0,60)),o},useTimeParser=e=>{const r=o(!0),parseDate=o=>{const n=(e.parse||defaultParseDateFunction)(o);return n||(r.value=!1),n};return{parse:e=>(r.value=!0,parseDate(e)),isValid:r}},F=[".va-input-wrapper__prepend-inner",".va-input__prepend-inner",".va-input__append-inner",".va-input-wrapper__append-inner"];var U=r({name:"VaTimeInput",components:{VaDropdown:P,VaDropdownContent:T,VaTimePicker:k,VaIcon:y,VaInput:C},emits:[...M,...S,"update:modelValue","update:isOpen"],props:{...$(k),...$(C),...O,...D,isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:String,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}},inheritAttrs:!1,setup(e,{emit:r,attrs:a,slots:s}){const l=o(),p=o(),i=B(),u=B(),[d]=_("isOpen",e,r,!1),[c]=_("modelValue",e,r),{parse:m,isValid:v}=useTimeParser(e),{format:f}=(e=>{const formatDate=o=>o?e.ampm?o.toLocaleTimeString("en-US"):o.toLocaleTimeString("en-GB"):"",sliceTime=(e,o,r)=>e.split(":").slice(o,r).join(":");return{format:o=>{if("seconds"===e.view)return formatDate(o);const[r,n]=formatDate(o).split(" ");return"minutes"===e.view?n?[sliceTime(r,0,2),n].join(" "):sliceTime(r,0,2):"hours"===e.view?n?[sliceTime(r,0,1),n].join(" "):sliceTime(r,0,1):""}}})(e),w=n((()=>v.value&&c.value?e.format?e.format(c.value):f(c.value):e.clearValue)),g=E(e,$(k)),I=E(e,$(C,["rules","error","errorMessages","clearable"])),V=n((()=>({ariaLabel:e.label,...j(a,["class","style"])}))),h=n((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(s).filter((e=>!o.includes(e)))})),reset=()=>{r("update:modelValue",e.clearValue),r("clear")},focus=()=>{var e;null===(e=l.value)||void 0===e||e.focus()},{isFocused:y,computedError:S,computedErrorMessages:D}=x(e,r,reset,focus),P=n((()=>!v.value&&w.value!==e.clearValue||S.value)),{canBeCleared:T,clearIconProps:M}=b(e,w,y,P),O=n((()=>({name:e.icon,color:e.color,size:"small"})));t(c,(()=>{v.value=!0}));const hideDropdown=()=>{d.value=!1,focus()},showDropdown=()=>{e.disabled||e.readonly||(d.value=!0)},dropdownToggle=()=>{d.value?hideDropdown():showDropdown()};return{input:l,timePicker:p,clearIconId:i,componentIconId:u,timePickerProps:g,computedInputProps:I,computedInputAttrs:V,isOpenSync:d,modelValueSync:c,valueText:w,onInputTextChanged:e=>{const o=m(e);v.value&&o&&(c.value=o)},reset:reset,onValueInput:e=>{!e&&reset()},canBeCleared:T,iconProps:O,clearIconProps:M,filterSlots:h,hideDropdown:hideDropdown,showDropdown:showDropdown,dropdownToggle:dropdownToggle,computedError:S,computedErrorMessages:D,hasError:P,handleComponentClick:o=>{var r,n;const t=null===(r=o.target)||void 0===r?void 0:r.id;if(t===i)return focus();if(t===u)return null===(n=p.value)||void 0===n?void 0:n.focus();return F.some((e=>{var r;return!!(null===(r=o.target)||void 0===r?void 0:r.closest(e))}))?void 0:e.manualInput?d.value&&hideDropdown():void dropdownToggle()}}},methods:{focus(){var e;null===(e=this.input)||void 0===e||e.focus()},blur(){var e;null===(e=this.input)||void 0===e||e.blur()}}});U.render=function render(e,o,r,n,t,y){const j=a("va-icon"),k=a("va-input"),C=a("va-time-picker"),S=a("va-dropdown-content"),D=a("va-dropdown");return s(),l(D,{class:p(["va-time-input",e.$attrs.class]),style:i(e.$attrs.style),modelValue:e.isOpenSync,"onUpdate:modelValue":o[6]||(o[6]=o=>e.isOpenSync=o),offset:[0,1],"close-on-content-click":!1,disabled:e.$props.disabled,position:"bottom-start",anchorSelector:".va-input__container",stateful:!1,trigger:"none",onKeydown:[o[7]||(o[7]=u(d((o=>e.showDropdown()),["prevent"]),["up"])),o[8]||(o[8]=u(d((o=>e.showDropdown()),["prevent"]),["down"])),o[9]||(o[9]=u(d((o=>e.showDropdown()),["prevent"]),["space"]))],onClick:e.handleComponentClick},{anchor:c((()=>[m(k,v({ref:"input"},{...e.computedInputProps,...e.computedInputAttrs},{modelValue:e.valueText,readonly:e.$props.readonly||!e.$props.manualInput,error:e.hasError,"error-messages":e.computedErrorMessages,"required-mark":e.$props.requiredMark,onChange:o[3]||(o[3]=o=>e.onInputTextChanged(o.target.value)),"onUpdate:modelValue":e.onValueInput}),f({prependInner:c((r=>[w(e.$slots,"prependInner",g(I({...r,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}))),e.$props.leftIcon?(s(),l(j,v({key:0,id:e.componentIconId},e.iconProps,{onClick:o[0]||(o[0]=o=>e.dropdownToggle())}),null,16,["id"])):V("v-if",!0)])),icon:c((()=>[e.canBeCleared?(s(),l(j,v({key:0,id:e.clearIconId},e.clearIconProps,{onClick:o[1]||(o[1]=o=>e.reset())}),null,16,["id"])):e.$props.leftIcon?V("v-if",!0):(s(),l(j,v({key:1,id:e.componentIconId},e.iconProps,{onClick:o[2]||(o[2]=o=>e.dropdownToggle())}),null,16,["id"]))])),_:2},[h(e.filterSlots,(o=>({name:o,fn:c((r=>[w(e.$slots,o,g(I({...r,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})))]))})))]),1040,["modelValue","readonly","error","error-messages","required-mark","onUpdate:modelValue"])])),default:c((()=>[m(S,{"no-padding":"",onKeydown:o[5]||(o[5]=u(d((o=>e.hideDropdown()),["prevent"]),["esc"]))},{default:c((()=>[m(C,v({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o[4]||(o[4]=o=>e.modelValueSync=o)}),null,16,["modelValue"])])),_:1})])),_:3},8,["class","style","modelValue","disabled","onClick"])},U.__file="src/components/va-time-input/VaTimeInput.vue";const L=e(U);export{L as VaTimeInput};
//# sourceMappingURL=index54.js.map
