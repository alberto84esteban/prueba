import{w as t}from"./withConfigTransport.js";import{__decorate as e,__metadata as a}from"tslib";import{ref as i,reactive as s,provide as n,watch as o,resolveComponent as r,openBlock as l,createElementBlock as c,normalizeClass as b,createElementVNode as h,createBlock as v,createCommentVNode as d,normalizeStyle as p,createVNode as f,withCtx as u,renderSlot as m,inject as g,resolveDynamicComponent as x,mergeProps as _,toHandlers as S,withKeys as w,toDisplayString as y}from"vue";import{V as C,m as P,s as $,O as T,p as O}from"./vue-class-component.esm-bundler.js";import{R}from"./decorators.js";import{C as k}from"./ColorMixin.js";import{S as j}from"./StatefulMixin.js";import W from"./index8.js";import{V as z}from"./VaConfig.js";import{s as V}from"./style-inject.es.js";import{u as F}from"./useKeyboardOnlyFocus.js";import{R as X}from"./RouterLinkMixin.js";import L from"./index28.js";import"./color-config.js";import"colortranslator";import"./useColor.js";import"./useRouterLink.js";import"./useSize.js";import"./useLoading.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";import"./VaIcon.js";import"./flatten.js";class TabsService{constructor(t){this.parent=t,this.tabs=[],this.disabled=!1,this.disabled=t.disabled}register(t){const e=this.tabs.push(t);t.id=t.$props.name||e}unregister(t){this.tabs=this.tabs.filter((e=>e.id!==t.id)),this.tabs.forEach(((t,e)=>{t.id=t.$props.name||e}))}tabClick(t){this.parent.selectTab(t)}tabFocus(t){this.parent.moveToTab(t)}tabPressEnter(t){this.parent.selectTab(t)}}const I=C.with(class TabsProps{constructor(){this.modelValue=O({type:[String,Number],default:null}),this.left=O({type:Boolean,default:!0}),this.right=O({type:Boolean,default:!1}),this.center=O({type:Boolean,default:!1}),this.grow=O({type:Boolean,default:!1}),this.disabled=O({type:Boolean,default:!1}),this.hideSlider=O({type:Boolean,default:!1}),this.vertical=O({type:Boolean,default:!1}),this.color=O({type:String,default:"primary"}),this.prevIcon=O({type:String,default:"chevron_left"}),this.nextIcon=O({type:String,default:"chevron_right"})}}),A=Symbol("TabsService");let H=class VaTabs extends(P(k,j,I)){constructor(){super(...arguments),this.sliderHeight=null,this.sliderWidth=null,this.sliderOffsetX=0,this.sliderOffsetY=0,this.showPagination=!1,this.tabsContentOffset=0,this.resizeObserver=null,this.startingXPoint=0,this.animationIncluded=!1,this.context=$((()=>{const t=i(null),e=s({VaTab:{color:this.color}});return n(A,t),{tabsService:t,tabConfig:e}}))}created(){this.context.tabsService=new TabsService(this),o((()=>this.$props.modelValue),(()=>{this.updateTabsState()}))}get computedClass(){const{left:t,right:e,center:a,grow:i,disabled:s}=this.$props;return{"va-tabs__container--left":t&&!e&&!a&&!i,"va-tabs__container--right":e,"va-tabs__container--center":a,"va-tabs__container--grow":i,"va-tabs__container--disabled":s}}get computedTabsClass(){return{"va-tabs--vertical":this.$props.vertical}}get tabSelected(){return this.valueComputed}get sliderStyles(){if(this.$props.hideSlider)return{display:"none"};const t=this.animationIncluded?"var(--va-tabs-slider-wrapper-transition)":"";return this.$props.vertical?{"background-color":this.colorComputed,height:`${this.sliderHeight}px`,transform:`translateY(-${this.sliderOffsetY}px) translateX(${this.sliderOffsetX}px)`,transition:t}:{"background-color":this.colorComputed,width:`${this.sliderWidth}px`,transform:`translateY(-${this.sliderOffsetY}px) translateX(${this.sliderOffsetX}px)`,transition:t}}get paginationControlledStyles(){if(this.$props.vertical)return{transform:"translateX(0px)"};const t=this.animationIncluded?"transform ease 0.3s":"";return{transform:`translateX(${this.startingXPoint-this.tabsContentOffset}px)`,transition:t}}get disablePaginationLeft(){return 0===this.tabsContentOffset}get disablePaginationRight(){var t;const e=null===(t=this.context.tabsService)||void 0===t?void 0:t.tabs[this.context.tabsService.tabs.length-1];return((null==e?void 0:e.rightSidePosition)||0)<=this.tabsContentOffset+this.containerRef.clientWidth||((null==e?void 0:e.leftSidePosition)||0)<=this.tabsContentOffset}selectTab(t){t&&(this.valueComputed=t.$props.name||t.id,this.stateful&&this.updateTabsState())}updateTabsState(){var t;this.resetSliderSizes(),null===(t=this.context.tabsService)||void 0===t||t.tabs.forEach((t=>{if(t.updateSidePositions(),this.tabSelected){const e=(t.$props.name||t.id)===this.tabSelected;t.isActive=t.isActiveRouterLink||e,t.isActive&&(this.moveToTab(t),this.updateSlider(t))}})),this.tabsContentOffset+this.containerRef.clientWidth>this.tabsRef.clientWidth&&this.context.tabsService&&this.moveToTab(this.context.tabsService.tabs[0]),this.updateStartingXPoint()}updatePagination(){this.showPagination=!1,this.tabsRef&&this.wrapperRef&&this.tabsRef.clientWidth>this.wrapperRef.clientWidth&&(this.showPagination=!0)}movePaginationLeft(){let t=this.tabsContentOffset-this.containerRef.clientWidth;if(this.context.tabsService)for(let e=0;e<this.context.tabsService.tabs.length-1;e++)if(this.context.tabsService.tabs[e].leftSidePosition>t&&this.context.tabsService.tabs[e].leftSidePosition<this.tabsContentOffset||this.context.tabsService.tabs[e+1].leftSidePosition>=this.tabsContentOffset){t=this.context.tabsService.tabs[e].leftSidePosition;break}this.tabsContentOffset=Math.max(0,t),this.$emit("click:prev")}movePaginationRight(){var t;const e=this.tabsContentOffset+this.containerRef.clientWidth;let a=e;if(this.context.tabsService)for(let t=0;t<this.context.tabsService.tabs.length&&!(this.context.tabsService.tabs[t].rightSidePosition>e&&(a=this.context.tabsService.tabs[t].leftSidePosition,this.tabsContentOffset<a));t++);const i=null===(t=this.context.tabsService)||void 0===t?void 0:t.tabs[this.context.tabsService.tabs.length-1],s=((null==i?void 0:i.rightSidePosition)||0)-this.containerRef.clientWidth;a=Math.min(s,a),this.tabsContentOffset=Math.max(0,a),this.$emit("click:next")}moveToTab(t){this.showPagination&&t.leftSidePosition+this.containerRef.clientWidth<=this.tabsRef.clientWidth?this.tabsContentOffset=t.leftSidePosition:this.showPagination&&t.rightSidePosition>=this.containerRef.clientWidth?this.tabsContentOffset=t.rightSidePosition-this.containerRef.clientWidth:this.tabsContentOffset=0}updateSlider(t){if(this.$props.vertical){const e=this.containerRef.clientHeight-t.$el.offsetTop-t.$el.clientHeight;this.sliderOffsetY=Math.max(e,0),this.sliderHeight=t.$el.clientHeight,this.sliderOffsetX=0,this.sliderWidth=null}else this.sliderOffsetX=t.$el.offsetLeft,this.sliderWidth=t.$el.clientWidth,this.sliderOffsetY=0,this.sliderHeight=null}resetSliderSizes(){this.sliderWidth=0,this.sliderHeight=0}updateStartingXPoint(){var t,e,a,i;this.startingXPoint=0,this.showPagination&&(this.$props.right?this.startingXPoint=(null===(t=this.tabsRef)||void 0===t?void 0:t.clientWidth)-(null===(e=this.containerRef)||void 0===e?void 0:e.clientWidth):this.$props.center&&(this.startingXPoint=Math.floor(((null===(a=this.tabsRef)||void 0===a?void 0:a.clientWidth)-(null===(i=this.containerRef)||void 0===i?void 0:i.clientWidth))/2)))}includeAnimation(){this.animationIncluded||requestAnimationFrame((()=>{this.animationIncluded=!0}))}redrawTabs(){const t=this.showPagination;this.updatePagination(),t===this.showPagination?(this.updateTabsState(),this.includeAnimation()):requestAnimationFrame((()=>{this.updateTabsState(),this.includeAnimation()}))}mounted(){this.redrawTabs(),requestAnimationFrame((()=>{this.resizeObserver=new ResizeObserver(this.redrawTabs),this.resizeObserver.observe(this.wrapperRef),this.resizeObserver.observe(this.tabsRef)}))}beforeUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}};e([R("wrapper"),a("design:type",Element)],H.prototype,"wrapperRef",void 0),e([R("container"),a("design:type",Element)],H.prototype,"containerRef",void 0),e([R("tabs"),a("design:type",Element)],H.prototype,"tabsRef",void 0),H=e([T({name:"VaTabs",components:{VaButton:W,VaConfig:z},emits:["update:modelValue","click:next","click:prev"]})],H);var M=H;const B={class:"va-tabs__wrapper",ref:"wrapper"},K=[h("div",{class:"va-tabs__slider"},null,-1)],E={class:"va-tabs__content"};V(":root{--va-tabs-position:relative;--va-tabs-wrapper-display:flex;--va-tabs-container-overflow:hidden;--va-tabs-container-flex:1 1 auto;--va-tabs-container-display:flex;--va-tabs-container-height:1.9325rem;--va-tabs-container-margin:0 3px;--va-tabs-container-white-space:nowrap;--va-tabs-container-position:relative;--va-tabs-slider-width:0.125rem;--va-tabs-slider-height:0.125rem;--va-tabs-slider-wrapper-bottom:0;--va-tabs-slider-wrapper-margin:0!important;--va-tabs-slider-wrapper-position:absolute;--va-tabs-slider-wrapper-z-index:4000;--va-tabs-slider-wrapper-transition:0.3s cubic-bezier(0.25,0.8,0.5,1)}.va-tabs{font-family:var(--va-font-family);position:var(--va-tabs-position)}.va-tabs__wrapper{contain:content;display:flex;flex:1 1 auto;overflow:hidden}.va-tabs .va-tabs__pagination{flex:0 0 auto}.va-tabs .va-tabs__container{display:var(--va-tabs-container-display);flex:var(--va-tabs-container-flex);height:var(--va-tabs-container-height);margin:var(--va-tabs-container-margin);overflow:var(--va-tabs-container-overflow);position:var(--va-tabs-container-position);white-space:var(--va-tabs-container-white-space)}.va-tabs .va-tabs__container .va-tabs__tabs{height:100%;position:absolute}.va-tabs .va-tabs__container .va-tabs__tabs-items{display:flex}.va-tabs .va-tabs__container--right{justify-content:flex-end}.va-tabs .va-tabs__container--grow .va-tabs__tabs{display:flex;min-width:100%}.va-tabs .va-tabs__container--grow .va-tab{flex:1 0 auto;max-width:none}.va-tabs .va-tabs__container--center{justify-content:center}.va-tabs .va-tabs__container--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-tabs--vertical .va-tabs__wrapper{flex:0 0 auto}.va-tabs--vertical .va-tabs__container{height:auto}.va-tabs--vertical .va-tabs__container .va-tabs__tabs-items{flex-direction:column}.va-tabs--vertical .va-tabs__container .va-tabs__tabs{position:relative}.va-tabs--vertical .va-tab{display:flex}.va-tabs--vertical .va-tab__content{flex:0 0 auto}.va-tabs--vertical .va-tabs__content{flex:1 0 auto}.va-tabs .va-tabs__slider-wrapper{bottom:var(--va-tabs-slider-wrapper-bottom);margin:var(--va-tabs-slider-wrapper-margin);position:var(--va-tabs-slider-wrapper-position);z-index:var(--va-tabs-slider-wrapper-z-index)}.va-tabs .va-tabs__slider-wrapper .va-tabs__slider{height:var(--va-tabs-slider-height);width:var(--va-tabs-slider-width)}"),M.render=function render$1(t,e,a,i,s,n){const o=r("va-button"),g=r("va-config");return l(),c("div",{class:b(["va-tabs",t.computedTabsClass])},[h("div",B,[t.showPagination?(l(),v(o,{key:0,disabled:t.disablePaginationLeft,class:"va-tabs__pagination",color:t.color,flat:"",size:"medium",icon:t.$props.prevIcon,onClick:e[0]||(e[0]=e=>t.movePaginationLeft())},null,8,["disabled","color","icon"])):d("v-if",!0),h("div",{class:b(["va-tabs__container",t.computedClass]),ref:"container"},[h("div",{class:"va-tabs__tabs",style:p(t.paginationControlledStyles),ref:"tabs"},[h("div",{class:"va-tabs__slider-wrapper",style:p(t.sliderStyles)},K,4),f(g,{components:t.context.tabConfig},{default:u((()=>[m(t.$slots,"tabs",{class:"va-tabs__tabs-items"})])),_:3},8,["components"])],4)],2),t.showPagination?(l(),v(o,{key:1,disabled:t.disablePaginationRight,class:"va-tabs__pagination",color:t.color,flat:"",size:"medium",icon:t.$props.nextIcon,onClick:e[1]||(e[1]=e=>t.movePaginationRight())},null,8,["disabled","color","icon"])):d("v-if",!0)],512),h("div",E,[m(t.$slots,"default")])],2)},M.__file="src/components/va-tabs/VaTabs.vue";const Y=C.with(class TabProps{constructor(){this.color=O({type:String,default:void 0}),this.icon=O({type:String,default:null}),this.label=O({type:String,default:null}),this.disabled=O({type:Boolean}),this.name=O({type:[String,Number]}),this.tag=O({type:String,default:"div"})}});let q=class VaTab extends(P(X,Y,k)){constructor(){super(...arguments),this.id=null,this.isActive=!1,this.rightSidePosition=0,this.leftSidePosition=0,this.hoverState=!1,this.context=$((()=>{const t=g(A),{hasKeyboardFocus:e,keyboardFocusListeners:a}=F();return{tabsService:t,hasKeyboardFocus:e,keyboardFocusListeners:a}}))}get classComputed(){return{"va-tab--disabled":this.$props.disabled}}get computedStyle(){return{color:this.context.hasKeyboardFocus||this.hoverState||this.isActive?this.colorComputed:"inherit"}}get tabIndexComputed(){return this.$props.disabled||this.context.tabsService.disabled?-1:0}onTabClick(){this.context.tabsService.tabClick(this),this.$emit("click")}onTabKeydown(){this.context.tabsService.tabPressEnter(this),this.$emit("keydown-enter")}onFocus(){this.context.hasKeyboardFocus&&this.context.tabsService.tabFocus(this),this.$emit("focus")}updateHoverState(t){this.hoverState=t}updateSidePositions(){this.rightSidePosition=this.$el.offsetLeft+this.$el.offsetWidth,this.leftSidePosition=this.$el.offsetLeft}beforeMount(){this.context.tabsService.register(this)}beforeUnmount(){this.context.tabsService.unregister(this)}};q=e([T({name:"VaTab",components:{VaIcon:L},emits:["click","keydown-enter","focus"]})],q);var N=q;const U=["tabindex"],D=["textContent"];V(":root{--va-tab-align-items:center;--va-tab-display:inline-flex;--va-tab-flex:0 1 auto;--va-tab-font-weight:600;--va-tab-line-height:normal;--va-tab-height:inherit;--va-tab-max-width:264px;--va-tab-text-align:center;--va-tab-vertical-align:middle;--va-tab-color:inherit;--va-tab-content-align-items:center;--va-tab-content-color:inherit;--va-tab-content-display:flex;--va-tab-content-flex:1 1 auto;--va-tab-content-height:100%;--va-tab-content-justify-content:center;--va-tab-content-max-width:inherit;--va-tab-content-text-decoration:none;--va-tab-content-transition:$transition-primary;--va-tab-content-user-select:none;--va-tab-content-white-space:nowrap;--va-tab-content-padding:0.275rem 0.75rem;--va-tab-content-cursor:pointer;--va-tab-icon-margin-right:0.5rem}.va-tab{align-items:var(--va-tab-align-items);color:var(--va-tab-color);display:var(--va-tab-display);flex:var(--va-tab-flex);font-weight:var(--va-tab-font-weight);height:var(--va-tab-height);line-height:var(--va-tab-line-height);max-width:var(--va-tab-max-width);text-align:var(--va-tab-text-align);vertical-align:var(--va-tab-vertical-align)}.va-tab__content{align-items:var(--va-tab-content-align-items);color:var(--va-tab-content-color);cursor:var(--va-tab-content-cursor);display:var(--va-tab-content-display);flex:var(--va-tab-content-flex);height:var(--va-tab-content-height);justify-content:var(--va-tab-content-justify-content);max-width:var(--va-tab-content-max-width);padding:var(--va-tab-content-padding);-webkit-text-decoration:var(--va-tab-content-text-decoration);text-decoration:var(--va-tab-content-text-decoration);transition:var(--va-tab-content-transition);-webkit-user-select:var(--va-tab-content-user-select);-moz-user-select:var(--va-tab-content-user-select);-ms-user-select:var(--va-tab-content-user-select);user-select:var(--va-tab-content-user-select);white-space:var(--va-tab-content-white-space)}.va-tab__icon{margin-right:var(--va-tab-icon-margin-right)}.va-tab.va-tab--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"),N.render=function render(t,e,a,i,s,n){const o=r("va-icon");return l(),v(x(t.tagComputed),{class:b(["va-tab",t.classComputed]),href:t.hrefComputed,target:t.target,to:t.to,replace:t.replace,exact:t.exact,"active-class":t.activeClass,"exact-active-class":t.exactActiveClass,style:p(t.computedStyle),onMouseenter:e[3]||(e[3]=e=>t.updateHoverState(!0)),onMouseleave:e[4]||(e[4]=e=>t.updateHoverState(!1))},{default:u((()=>[h("div",_({class:"va-tab__content"},S(t.context.keyboardFocusListeners),{tabindex:t.tabIndexComputed,onFocus:e[0]||(e[0]=e=>t.onFocus()),onClick:e[1]||(e[1]=e=>t.onTabClick()),onKeydown:e[2]||(e[2]=w((e=>t.onTabKeydown()),["enter"]))}),[m(t.$slots,"default",{},(()=>[t.icon?(l(),v(o,{key:0,class:"va-tab__icon",name:t.icon,size:"small"},null,8,["name"])):d("v-if",!0),h("span",{class:"va-tab__label",textContent:y(t.label)},null,8,D)]))],16,U)])),_:3},8,["href","target","to","replace","exact","active-class","exact-active-class","class","style"])},N.__file="src/components/va-tabs/VaTab/VaTab.vue";var G=t(N),J=t(M);export{G as VaTab,J as default};
//# sourceMappingURL=index47.js.map
