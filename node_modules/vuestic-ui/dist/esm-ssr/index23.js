import{w as e}from"./withConfigTransport.js";import{computed as o,ref as t,watch as r,defineComponent as a,toRefs as n,resolveComponent as l,mergeProps as s,withCtx as i,createSlots as u,renderSlot as p,openBlock as d,createBlock as c,createCommentVNode as m,withModifiers as v,renderList as f,createVNode as y}from"vue";import{u as C,a as k,b as $}from"./VaInput.js";import{a as j,b as P,u as h}from"./index60.js";import{a as V}from"./useStateful.js";import{u as g}from"./useForm.js";import{i as I,s as D,a as x,b as _}from"./VaDatePicker.js";import{e as b,a as w,f as S}from"./child-props.js";import B,{VaDropdownContent as H}from"./index25.js";import T from"./index31.js";import E from"./index28.js";import{ssrRenderAttrs as U,ssrRenderComponent as O,ssrRenderSlot as F}from"@vue/server-renderer";import{s as M}from"./style-inject.es.js";import"./VaConfig.js";import"cleave.js";import"./useEmitProxy.js";import"./color-config.js";import"colortranslator";import"./pick.js";import"./VaIcon.js";import"./flatten.js";import"./useSize.js";import"./useSyncProp.js";import"./consts.js";import"./useFocus.js";import"./useColor.js";import"./index8.js";import"./useRouterLink.js";import"./useLoading.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";import"./VaDropdownContent.js";import"tslib";import"./vue-class-component.esm-bundler.js";import"asva-executors";import"@popperjs/core";import"./StatefulMixin.js";import"./VaMessageListWrapper.vue_vue&type=script&lang.js";const defaultParseDateFunction=e=>new Date(Date.parse(e)),useDateParser=e=>{const o=t(!0),parseDate=t=>{const r=(e.parseDate||defaultParseDateFunction)(t);var a;return(!(a=r)||a instanceof Date&&isNaN(a.getTime()))&&(o.value=!1),r};return{parseDateInputValue:t=>{if(o.value=!0,e.parse)return e.parse(t,o);if((o=>o.includes(e.delimiter))(t))return t.split(e.delimiter).map((e=>parseDate(e)));if((o=>o.includes(e.rangeDelimiter))(t)){const[o,r]=t.split(e.rangeDelimiter).map((e=>parseDate(e)));return{start:o,end:r}}return parseDate(t)},isValid:o}},L={...h,...g,label:{type:String,required:!1},color:{type:String,default:"primary"},placeholder:{type:String,default:""},tabindex:{type:Number,default:0},outline:{Boolean:Boolean,default:!1},bordered:{type:Boolean,default:!1}};var N=a({name:"VaDateInput",components:{vaDropdown:B,VaDropdownContent:H,VaDatePicker:D,VaInput:T,VaIcon:E},props:{...b(D),...L,...C,clearValue:{type:Date,default:void 0},resetOnClose:{type:Boolean,default:!0},isOpen:{type:Boolean},format:{type:Function},formatDate:{type:Function,default:()=>e=>e.toLocaleDateString()},parse:{type:Function},parseDate:{type:Function},delimiter:{type:String,default:", "},rangeDelimiter:{type:String,default:" ~ "},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"calendar_today"}},emits:[...w(D),...k,...j,"update:is-open","update:text"],setup(e,{emit:a,slots:l}){const{isOpen:s,resetOnClose:i}=n(e),{valueComputed:u}=V(e,a),{syncProp:p}=function useSyncProp(e,r,a,n){if(void 0===n)return{syncProp:o({set(e){a(`update:${r}`,e)},get:()=>e.value})};const l=t(n);return{syncProp:o({set(e){l.value=e,a(`update:${r}`,e)},get:()=>void 0===(null==e?void 0:e.value)?l.value:e.value})}}(s,"is-open",a,!1),d=o((()=>!i.value)),{valueComputed:c,reset:m}=((e,a)=>{const n=t(e.value),l=o({get:()=>n.value,set:o=>{if(a.value&&(n.value=o,e.value=o),!o)return e.value=o,void(n.value=o);I(o)?null!==o.end&&(e.value=o):e.value=o,n.value=o}});return r(e,(e=>{n.value=e})),{valueComputed:l,reset:()=>{n.value&&I(n.value)&&(n.value=e.value)}}})(u,d);r(p,(e=>{e||d.value||m()}));const dateOrNothing=o=>o?e.formatDate(o):"...",v=t(),{parseDateInputValue:f,isValid:y}=useDateParser(e),C=o((()=>{if(!y.value)return e.clearValue;if(e.format)return e.format(c.value);if(!c.value)return e.clearValue;if(x(c.value))return c.value.map((o=>e.formatDate(o))).join(e.delimiter);if(_(c.value))return e.formatDate(c.value);if(I(c.value))return dateOrNothing(c.value.start)+e.rangeDelimiter+dateOrNothing(c.value.end);throw new Error("VaDatePicker: Invalid model value. Value should be Date, Date[] or { start: Date, end: Date | null }")})),reset=()=>{u.value=e.clearValue,a("clear")},{isFocused:k,computedError:j,computedErrorMessages:h}=P(e,a,reset,(()=>{var e;null===(e=v.value)||void 0===e||e.focus()})),g=o((()=>!y.value&&c.value!==e.clearValue||j.value)),w=o((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(l).filter((e=>!o.includes(e)))})),{canBeCleared:B,clearIconProps:H}=$(e,c,k,g),E=o((()=>({name:e.icon,color:e.color,size:"small",class:"va-date-input__icon"}))),U=S(e,b(T,["rules","error","errorMessages","clearable"]));return{valueText:C,valueComputed:c,isOpenSync:p,onInputTextChanged:({target:e})=>{const o=f(e.value);y.value&&(c.value=o)},hasError:g,computedErrorMessages:h,input:v,inputProps:U,datePickerProps:S(e,b(D)),filterSlots:w,canBeCleared:B,clearIconProps:H,iconProps:E,reset:reset}},methods:{focus(){var e;null===(e=this.input)||void 0===e||e.focus()},blur(){var e;null===(e=this.input)||void 0===e||e.blur()}}});M(".va-date-input{--va-date-picker-cell-size:28px;display:flex;font-family:var(--va-font-family)}.va-date-input__icon,.va-date-input__input.va-input_readonly{cursor:pointer}.va-date-input .va-dropdown{width:100%}"),N.ssrRender=function ssrRender(e,o,t,r,a,n,C,k){const $=l("va-dropdown"),j=l("va-input"),P=l("va-icon"),h=l("va-dropdown-content"),V=l("va-date-picker");o(`<div${U(s({class:"va-date-input"},r))}>`),o(O($,{modelValue:e.isOpenSync,"onUpdate:modelValue":o=>e.isOpenSync=o,offset:[0,10],"close-on-content-click":!1,disabled:e.disabled},{anchor:i(((o,t,r,a)=>{if(!t)return[p(e.$slots,"input",{valueText:e.valueText,inputProps:e.inputProps,color:e.color},(()=>[y(j,s(e.inputProps,{ref:"input",class:"va-date-input__input","model-value":e.valueText,error:e.hasError,"error-messages":e.computedErrorMessages,readonly:e.readonly||!e.manualInput,onChange:e.onInputTextChanged}),u({prependInner:i((o=>[p(e.$slots,"prependInner",o),e.$props.leftIcon?(d(),c(P,s({key:0},e.iconProps),null,16)):m("v-if",!0)])),icon:i((()=>[e.canBeCleared?(d(),c(P,s({key:0},e.clearIconProps,{onClick:v((o=>e.reset()),["stop"])}),null,16,["onClick"])):e.$props.leftIcon?m("v-if",!0):(d(),c(P,s({key:1},e.iconProps),null,16))])),_:2},[f(e.filterSlots,(o=>({name:o,fn:i((t=>[p(e.$slots,o,t)]))})))]),1040,["model-value","error","error-messages","readonly","onChange"])]))];F(e.$slots,"input",{valueText:e.valueText,inputProps:e.inputProps,color:e.color},(()=>{t(O(j,s(e.inputProps,{ref:"input",class:"va-date-input__input","model-value":e.valueText,error:e.hasError,"error-messages":e.computedErrorMessages,readonly:e.readonly||!e.manualInput}),u({prependInner:i(((o,t,r,a)=>{if(!t)return[p(e.$slots,"prependInner",o),e.$props.leftIcon?(d(),c(P,s({key:0},e.iconProps),null,16)):m("v-if",!0)];F(e.$slots,"prependInner",o,null,t,r,a),e.$props.leftIcon?t(O(P,e.iconProps,null,r,a)):t("\x3c!----\x3e")})),icon:i(((o,t,r,a)=>{if(!t)return[e.canBeCleared?(d(),c(P,s({key:0},e.clearIconProps,{onClick:v((o=>e.reset()),["stop"])}),null,16,["onClick"])):e.$props.leftIcon?m("v-if",!0):(d(),c(P,s({key:1},e.iconProps),null,16))];e.canBeCleared?t(O(P,e.clearIconProps,null,r,a)):e.$props.leftIcon?t("\x3c!----\x3e"):t(O(P,e.iconProps,null,r,a))})),_:2},[f(e.filterSlots,(o=>({name:o,fn:i(((t,r,a,n)=>{if(!r)return[p(e.$slots,e.name,t)];F(e.$slots,o,t,null,r,a,n)}))})))]),r,a))}),t,r,a)})),default:i(((o,t,r,a)=>{if(!t)return[y(h,null,{default:i((()=>[y(V,s(e.datePickerProps,{modelValue:e.valueComputed,"onUpdate:modelValue":o=>e.valueComputed=o,"onClick:day":o=>e.$emit("click:day",o),"onClick:month":o=>e.$emit("click:month",o),"onClick:year":o=>e.$emit("click:year",o),"onHover:day":o=>e.$emit("hover:day",o),"onHover:month":o=>e.$emit("hover:month",o),"onHover:year":o=>e.$emit("hover:year",o),"onUpdate:view":o=>e.$emit("update:view",o)}),u({_:2},[f(e.$slots,((o,t)=>({name:t,fn:i((o=>[p(e.$slots,t,o)]))})))]),1040,["modelValue","onUpdate:modelValue","onClick:day","onClick:month","onClick:year","onHover:day","onHover:month","onHover:year","onUpdate:view"])])),_:3})];t(O(h,null,{default:i(((o,t,r,a)=>{if(!t)return[y(V,s(e.datePickerProps,{modelValue:e.valueComputed,"onUpdate:modelValue":o=>e.valueComputed=o,"onClick:day":o=>e.$emit("click:day",o),"onClick:month":o=>e.$emit("click:month",o),"onClick:year":o=>e.$emit("click:year",o),"onHover:day":o=>e.$emit("hover:day",o),"onHover:month":o=>e.$emit("hover:month",o),"onHover:year":o=>e.$emit("hover:year",o),"onUpdate:view":o=>e.$emit("update:view",o)}),u({_:2},[f(e.$slots,((o,t)=>({name:t,fn:i((o=>[p(e.$slots,t,o)]))})))]),1040,["modelValue","onUpdate:modelValue","onClick:day","onClick:month","onClick:year","onHover:day","onHover:month","onHover:year","onUpdate:view"])];t(O(V,s(e.datePickerProps,{modelValue:e.valueComputed,"onUpdate:modelValue":o=>e.valueComputed=o}),u({_:2},[f(e.$slots,((o,t)=>({name:t,fn:i(((o,r,a,n)=>{if(!r)return[p(e.$slots,e.name,o)];F(e.$slots,t,o,null,r,a,n)}))})))]),r,a))})),_:3},r,a))})),_:3},t)),o("</div>")},N.__file="src/components/va-date-input/VaDateInput.vue";const z=e(N);export{z as VaDateInput};
//# sourceMappingURL=index23.js.map
