import{w as e}from"./withConfigTransport.js";import{ref as t,onMounted as a,onBeforeUnmount as r,computed as o,getCurrentInstance as n,defineComponent as i,watch as l,resolveComponent as s,mergeProps as u,createSlots as m,withCtx as p,createVNode as v}from"vue";import{c as d}from"./clamp.js";import{u as c,a as g}from"./useStateful.js";import{u as f}from"./color-config.js";import{u as b,a as y}from"./useForm.js";import{f as V,e as _}from"./child-props.js";import{u as x}from"./useSyncProp.js";import C from"./index28.js";import{ssrRenderAttrs as L,ssrRenderSlot as h,ssrRenderComponent as I,ssrInterpolate as w,ssrRenderList as R,ssrRenderStyle as N}from"@vue/server-renderer";import{s as $}from"./style-inject.es.js";import{u as E,a as k}from"./useSize.js";import"./VaConfig.js";import"./toNumber.js";import"colortranslator";import"./VaIcon.js";import"./flatten.js";var F;!function(e){e[e.EMPTY=0]="EMPTY",e[e.HALF=.5]="HALF",e[e.FULL=1]="FULL"}(F||(F={}));const j={...c,modelValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},useRating=e=>{const{emit:i}=(()=>{const e=n();if(!e)throw new Error("useRating hooks must be used on top of setup function");return{props:e.props,emit:e.emit}})(),{isHovered:l,onMouseEnter:s,onMouseLeave:u}=function useHover(e){const o=t(!1),onMouseEnter=()=>{o.value=!0},onMouseLeave=()=>{o.value=!1};return e&&(a((()=>{var t,a;null===(t=e.value)||void 0===t||t.addEventListener("mouseenter",onMouseEnter),null===(a=e.value)||void 0===a||a.addEventListener("mouseleave",onMouseLeave)})),r((()=>{var t,a;null===(t=e.value)||void 0===t||t.removeEventListener("mouseover",onMouseEnter),null===(a=e.value)||void 0===a||a.removeEventListener("mouseleave",onMouseLeave)}))),{isHovered:o,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave}}(),{valueComputed:m}=g(e,i),p=t(0),v=o((()=>e.hover&&l.value?p.value:m.value));return{visibleValue:v,modelValue:m,hoveredValue:p,isHovered:l,onMouseEnter:s,onMouseLeave:u,onItemValueUpdate:(t,a)=>{const r=t+a;e.clearable&&m.value===r?m.value=0:m.value=r},onItemHoveredValueUpdate:(t,a)=>{e.hover&&(p.value=t+a)},getItemValue:e=>{const t=v.value-e;return d(t,F.EMPTY,F.FULL)}}},M={unselectedColor:{type:String},color:{type:String,default:"primary"},modelValue:{type:Number}},useVaRatingColors=e=>{const{getColor:t,getFocusColor:a,getTextColor:r}=f(),n=o((()=>t(e.color))),i=o((()=>e.unselectedColor?t(e.unselectedColor):a(t(e.color)))),l=o((()=>e.modelValue===F.HALF?`linear-gradient(90deg, ${n.value} 50%, ${i.value} 50%`:e.modelValue===F.EMPTY?i.value:n.value)),s=o((()=>e.modelValue===F.FULL?r(n.value):r(i.value)));return{computedColor:n,backgroundComputed:l,textColorComputed:s}};var z=i({name:"VaRatingItem",components:{VaIcon:C},props:{modelValue:{type:Number,default:0},icon:{type:String,default:"star"},halfIcon:{type:String,default:"star_half"},emptyIcon:{type:String,default:"star_outline"},halves:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},tabindex:{type:Number,default:1},size:{type:[String,Number],default:"medium"},emptyIconColor:{type:String},color:{type:String,default:"primary"}},emits:["update:modelValue","click","hover"],setup(e,{emit:a}){const r=t(),[n]=x("modelValue",e,a,F.EMPTY),i=t(null),s=o((()=>e.hover&&i.value||n.value));return l(i,(()=>a("hover",i.value||F.EMPTY))),{...f(),rootEl:r,onEnter:()=>{n.value=1},onClick:()=>{n.value=i.value||F.FULL,a("click",i.value||F.FULL)},onMouseMove:t=>{if(!r.value)return;const{offsetX:a}=t,o=r.value.clientWidth;e.halves?i.value=a/o<=F.HALF?F.HALF:F.FULL:i.value=F.FULL},onMouseLeave:()=>{i.value=null},visibleValue:s,computedIconName:o((()=>e.halves&&s.value===F.HALF?e.halfIcon:s.value===F.EMPTY?e.emptyIcon:e.icon))}}});$(".va-rating-item{display:inline-block}.va-rating-item:focus{transform:scale(1.1)}.va-rating-item__wrapper{background-color:transparent;border-style:none;font-size:100%;overflow:visible;padding:0;text-transform:none}"),z.ssrRender=function ssrRender$2(e,t,a,r,o,n,i,l){const m=s("va-icon");t(`<div${L(u({ref:"rootEl",class:"va-rating-item",tabindex:e.$props.tabindex},r))}>`),h(e.$slots,"default",{props:{value:e.visibleValue,onClick:e.onClick}},(()=>{t(I(m,{class:"va-rating-item__wrapper",tabindex:"-1",tag:"button",name:e.computedIconName,size:e.$props.size,color:e.getColor(e.$props.color)},null,a))}),t,a),t("</div>")},z.__file="src/components/va-rating/components/VaRatingItem/VaRatingItem.vue";var P=i({name:"VaRatingItemNumberButton",props:{...M,...E,itemNumber:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup:e=>({...useVaRatingColors(e),...k(e,"VaRating")})});P.ssrRender=function ssrRender$1(e,t,a,r,o,n,i,l){t(`<button${L(u({class:"va-rating__number-item",tabindex:"-1",style:{background:e.backgroundComputed,color:e.textColorComputed,width:e.sizeComputed,height:e.sizeComputed,fontSize:e.fontSizeComputed,borderRadius:.125*parseInt(e.fontSizeComputed)+"rem"}},r))}>${w(e.itemNumber)}</button>`)},P.__file="src/components/va-rating/components/VaRatingItemNumberButton.vue";const S=_(z,["unselectedColor"]),B=_(P,["modelValue","itemNumber"]);var H=i({name:"VaRating",props:{...j,...M,...b,...S,...B,numbers:{type:Boolean,default:!1},halves:{type:Boolean,default:!1},max:{type:Number,default:5},texts:{type:Array,default:()=>[]}},emits:["update:modelValue"],components:{VaRatingItem:z,VaRatingItemNumberButton:P},setup(e){const{createComputedClass:t}=y(e),a=useRating(e),r=o((()=>!e.disabled&&!e.readonly));return{...useVaRatingColors(e),...a,rootClass:t("va-rating"),VaRatingItemProps:V(e,S),VaRatingItemNumberButtonProps:V(e,B),isInteractionsEnabled:r,tabindex:o((()=>r.value?0:void 0)),onArrowKeyPress:t=>{const r=e.halves?F.HALF:F.FULL;a.onItemValueUpdate(a.visibleValue.value,r*t)}}}});$(":root{--va-rating-display:flex;--va-rating-number-item-font-size:inherit;--va-rating-number-item-margin:0.1em;--va-rating-number-item-font-weight:700;--va-rating-number-item-cursor:pointer;--va-rating-item-wrapper-display:flex;--va-rating-item-wrapper-cursor:pointer;--va-rating-item-display:flex}.va-rating{display:var(--va-rating-display);font-family:var(--va-font-family)}.va-rating__number-item{align-items:center;background-color:transparent;border-style:none;cursor:pointer;display:flex;font-size:100%;font-size:var(--va-rating-number-item-font-size);font-weight:var(--va-rating-number-item-font-weight);justify-content:center;margin:var(--va-rating-number-item-margin);overflow:visible;padding:0;text-transform:none}.va-rating--disabled .va-rating__number-item{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-rating--readonly .va-rating__number-item{cursor:default}.va-rating__item-wrapper{cursor:var(--va-rating-item-wrapper-cursor);display:var(--va-rating-item-wrapper-display)}.va-rating--disabled .va-rating__item-wrapper,.va-rating--readonly .va-rating__item-wrapper{cursor:default}.va-rating-item{align-items:center;display:var(--va-rating-item-display);display:flex;justify-content:center}.va-rating--disabled .va-rating-item{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-rating--disabled .va-rating-item__wrapper,.va-rating--readonly .va-rating-item .va-rating-item__wrapper{cursor:auto!important}.va-rating__text-wrapper{padding-left:10px}"),H.ssrRender=function ssrRender(e,t,a,r,o,n,i,l){const d=s("va-rating-item"),c=s("VaRatingItemNumberButton");t(`<div${L(u({class:["va-rating",e.rootClass]},r))}><div class="va-rating__item-wrapper">\x3c!--[--\x3e`),R(e.$props.max,(r=>{t(I(d,u(e.VaRatingItemProps,{"model-value":e.getItemValue(r-1),key:r,"empty-icon-color":e.$props.unselectedColor,tabindex:e.tabindex}),m({_:2},[e.$props.numbers?{name:"default",fn:p((({props:t},a,o,n)=>{if(!a)return[v(c,u(e.VaRatingItemNumberButtonProps,{"model-value":t.value,"item-number":r,onClick:t.onClick}),null,16,["model-value","item-number","onClick"])];a(I(c,u(e.VaRatingItemNumberButtonProps,{"model-value":t.value,"item-number":r}),null,o,n))}))}:void 0]),a))})),t("\x3c!--]--\x3e</div>"),e.$props.texts&&e.$props.texts.length===e.$props.max?t(`<span class="va-rating__text-wrapper" style="${N({color:e.computedColor})}">${w(e.$props.texts[Math.round(e.visibleValue)-1])}</span>`):t("\x3c!----\x3e"),t("</div>")},H.__file="src/components/va-rating/VaRating.vue";var U=e(z),A=e(H);export{U as VaRatingItem,A as default};
//# sourceMappingURL=index41.js.map
