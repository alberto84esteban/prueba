import{watch as e,inject as s,onMounted as r,onBeforeUnmount as a,defineComponent as o,computed as t,mergeProps as l}from"vue";import{f as i}from"./flatten.js";import{v as u,i as n,x as m,y as d,w as c}from"./withConfigTransport.js";import{u as p}from"./useSyncProp.js";import{F as v}from"./consts.js";import{u as g}from"./useFocus.js";import{u as f}from"./useColor.js";import{ssrRenderAttrs as y,ssrRenderList as V,ssrInterpolate as S}from"@vue/server-renderer";import{s as j}from"./style-inject.es.js";var x=u,M=n,h=m;var A=function isString(e){return"string"==typeof e||!M(e)&&h(e)&&"[object String]"==x(e)};const C={modelValue:{required:!1},error:{type:Boolean,default:void 0},errorMessages:{type:[Array,String],default:void 0},errorCount:{type:[String,Number],default:1},rules:{type:Array,default:()=>[]},success:{type:Boolean,default:!1},messages:{type:[Array,String],default:()=>[]},immediateValidation:{type:Boolean,default:!1}},F=["update:error","update:errorMessages"],useValidation=(o,t,l,u)=>{const{isFocused:n,onFocus:m,onBlur:c}=g(),[f]=p("error",o,t,!1),[y]=p("errorMessages",o,t,[]),resetValidation=()=>{f.value=!1,y.value=[]},validate=()=>{if(!o.rules||!o.rules.length)return!0;let e=!1,s=[];return((e=[],s=null)=>(A(e)&&(e=[e]),e.map((e=>d(e)?e(s):e))))(i(o.rules),o.modelValue).forEach((r=>{A(r)?(s=[...s,r],e=!0):!1===r&&(e=!0)})),y.value=s,f.value=e,!e};e(n,(e=>!1===e&&validate())),e((()=>o.modelValue),(()=>validate()),{immediate:o.immediateValidation});const V={resetValidation:resetValidation,focus:u,validate:validate,reset:l,hasError:()=>f.value},S=s(v,void 0);return r((()=>{null==S||S.onChildMounted(V)})),a((()=>{null==S||S.onChildUnmounted(V)})),{isFocused:n,computedError:f,computedErrorMessages:y,listeners:{onFocus:m,onBlur:c},validate:validate,resetValidation:resetValidation}};var _=o({name:"VaMessageList",props:{modelValue:{type:[String,Array],default:""},limit:{type:Number,default:1},color:{type:String}},setup(e){const{colorComputed:s}=f(e);return{messages:t((()=>e.modelValue?Array.isArray(e.modelValue)?e.modelValue.slice(0,e.limit):[e.modelValue]:[])),computedStyle:t((()=>e.color?{color:s.value}:{}))}}});j(".va-message-list{color:var(--va-message-list-color)}.va-message-list__message{font-size:.8rem;vertical-align:middle}"),_.ssrRender=function ssrRender(e,s,r,a,o,t,i,u){e.messages.length?(s(`<div${y(l({class:"va-message-list",style:e.computedStyle},a))}>\x3c!--[--\x3e`),V(e.messages,((e,r)=>{s(`<div class="va-message-list__message">${S(e)}</div>`)})),s("\x3c!--]--\x3e</div>")):s("\x3c!----\x3e")},_.__file="src/components/va-input/components/VaMessageList/VaMessageList.vue";var B=c(_);export{B as V,F as a,useValidation as b,A as i,C as u};
//# sourceMappingURL=index60.js.map
