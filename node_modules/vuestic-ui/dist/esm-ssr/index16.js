import{w as e}from"./withConfigTransport.js";import{__decorate as o}from"tslib";import{inject as a,resolveComponent as t,mergeProps as s}from"vue";import{V as r,m as l,s as i,O as n,p as d}from"./vue-class-component.esm-bundler.js";import c from"./index28.js";import{C as v}from"./ColorMixin.js";import{h as p}from"./color-config.js";import{S as h}from"./StatefulMixin.js";import{u}from"./useKeyboardOnlyFocus.js";import{A as m}from"./VaAccordion.vue_vue&type=script&lang.js";import{ssrRenderAttrs as b,ssrRenderAttr as g,ssrRenderSlot as y,ssrRenderStyle as f,ssrRenderComponent as x,ssrInterpolate as _}from"@vue/server-renderer";import{s as C}from"./style-inject.es.js";import"./VaConfig.js";import"./VaIcon.js";import"./flatten.js";import"./useSize.js";import"colortranslator";import"./cStatefulMixin.js";const w=r.with(class Props{constructor(){this.modelValue=d({type:Boolean,default:!1}),this.disabled=d({type:Boolean,default:!1}),this.header=d({type:String,default:""}),this.icon=d({type:String,default:""}),this.solid=d({type:Boolean,default:!1}),this.color=d({type:String,default:""}),this.textColor=d({type:String,default:""}),this.colorAll=d({type:Boolean,default:!1})}});let j=class VaCollapse extends(l(h,v,w)){constructor(){super(...arguments),this.height=0,this.transitionDuration=this.getTransitionDuration(),this.mutationObserver=null,this.valueCollapse={value:void 0},this.accordion=i((()=>a(m,{isInsideAccordion:!1,getProps:()=>{},getState:()=>{},onChildChange:e=>{},onChildMounted:e=>{},onChildUnmounted:e=>{}}))),this.SetupContext=i((()=>{const{hasKeyboardFocus:e,keyboardFocusListeners:o}=u();return{hasKeyboardFocus:e,keyboardFocusListeners:o}}))}get body(){var e;return null===(e=this.$refs)||void 0===e?void 0:e.body}get valueProxy(){return this.accordion.isInsideAccordion?this.valueCollapse.value:this.valueComputed}set valueProxy(e){this.accordion.isInsideAccordion&&(this.valueCollapse.value=e),this.valueComputed=e,this.setCollapseParams()}get computedClasses(){const e=this.accordion.getProps();return{"va-collapse--disabled":this.disabled,"va-collapse--solid":this.solid,"va-collapse--active":this.solid&&this.valueProxy,"va-collapse--popout":(null==e?void 0:e.popout)&&this.valueProxy,"va-collapse--inset":(null==e?void 0:e.inset)&&this.valueProxy}}get contentStyle(){return{paddingLeft:this.icon&&0,color:this.textColor?this.theme.getColor(this.textColor):"",backgroundColor:this.color?this.colorComputed:"",boxShadow:this.SetupContext.hasKeyboardFocus?"0 0 0.5rem 0 rgba(0, 0, 0, 0.3)":""}}get stylesComputed(){var e;return this.valueProxy&&(null===(e=this.$slots.default())||void 0===e?void 0:e[0])?{visibility:"visible",height:this.height+"px",transitionDuration:this.transitionDuration+"s",background:this.color&&this.colorAll?p(this.colorComputed):""}:{visibility:"hidden",height:this.height+"px",transitionDuration:this.transitionDuration+"s"}}get collapseIndexComputed(){return this.disabled?-1:0}changeValue(){this.disabled||(this.valueProxy=!this.valueProxy,this.accordion.onChildChange(this))}getHeight(){var e;if(!this.valueProxy)return 0;return Array.from(null===(e=this.body)||void 0===e?void 0:e.childNodes).reduce(((e,o)=>e+=3===o.nodeType?this.getTextNodeHeight(o):o.clientHeight),0)}getTransitionDuration(){const e=this.height/1e3*.2;return e>.2?e:.2}getTextNodeHeight(e){const o=document.createRange();o.selectNodeContents(e);const a=o.getBoundingClientRect();return a.bottom-a.top}setCollapseParams(){this.height=this.getHeight(),this.transitionDuration=this.getTransitionDuration()}mounted(){this.getHeight(),this.setCollapseParams(),this.mutationObserver=new MutationObserver((()=>{setTimeout((()=>this.setCollapseParams()),16)})),this.mutationObserver.observe(this.body,{attributes:!0,childList:!0,subtree:!0}),this.accordion.isInsideAccordion&&this.accordion.onChildMounted(this)}beforeUnmount(){this.mutationObserver&&this.mutationObserver.disconnect(),this.accordion.isInsideAccordion&&this.accordion.onChildUnmounted(this)}};j=o([n({name:"VaCollapse",components:{VaIcon:c},emits:["focus"]})],j);var P=j;C(":root{--va-collapse-transition:all 0.3s linear;--va-collapse-popout-margin:0.5rem -0.5rem;--va-collapse-inset-margin:0.5rem 0.5rem;--va-collapse-body-transition:all 0.3s linear;--va-collapse-body-overflow:hidden;--va-collapse-body-margin-top:0.1rem;--va-collapse-header-content-display:flex;--va-collapse-header-content-justify-content:space-between;--va-collapse-header-content-cursor:pointer;--va-collapse-header-content-background-color:#f5f8f9;--va-collapse-header-content-box-shadow:var(--va-box-shadow);--va-collapse-header-content-border-radius:0.375rem;--va-collapse-header-content-align-items:center;--va-collapse-header-content-padding-top:0.75rem;--va-collapse-header-content-padding-bottom:0.75rem;--va-collapse-header-content-padding-left:1rem;--va-collapse-header-content-text-width:100%;--va-collapse-header-content-icon-min-width:1.5rem;--va-collapse-header-content-icon-margin-left:0.5rem;--va-collapse-header-content-icon-margin-right:0.5rem;--va-collapse-header-content-icon-color:#adb3b9;--va-collapse-solid-box-shadow:var(--va-box-shadow);--va-collapse-solid-border-radius:0.375rem;--va-collapse-solid-header-content-background-color:#f5f8f9;--va-collapse-solid-header-content-box-shadow:none;--va-collapse-solid-header-content-border-radius:0.375rem;--va-collapse-solid-header-content-transition:ease-in 0.3s;--va-collapse-solid-body-border-radius:0 0 0.375rem 0.375rem;--va-collapse-solid-body-margin-top:0}.va-collapse{font-family:var(--va-font-family);transition:var(--va-collapse-transition,var(--va-swing-transition))}.va-collapse__body{margin-top:var(--va-collapse-body-margin-top);overflow:var(--va-collapse-body-overflow);transition:var(--va-collapse-body-transition)}.va-collapse__header__content{align-items:var(--va-collapse-header-content-align-items);background-color:var(--va-collapse-header-content-background-color);border-radius:var(--va-collapse-header-content-border-radius,var(--va-block-border-radius));box-shadow:var(--va-collapse-header-content-box-shadow,var(--va-block-box-shadow));cursor:var(--va-collapse-header-content-cursor);display:var(--va-collapse-header-content-display);justify-content:var(--va-collapse-header-content-justify-content);padding-bottom:var(--va-collapse-header-content-padding-bottom);padding-left:var(--va-collapse-header-content-padding-left);padding-top:var(--va-collapse-header-content-padding-top)}.va-collapse__header__text{width:var(--va-collapse-header-content-text-width)}.va-collapse__header__icon{align-items:center;color:var(--va-collapse-header-content-icon-color);display:flex;justify-content:center;margin-left:var(--va-collapse-header-content-icon-margin-left);margin-right:var(--va-collapse-header-content-icon-margin-right);min-width:var(--va-collapse-header-content-icon-min-width)}.va-collapse--solid{border-radius:var(--va-collapse-solid-border-radius);box-shadow:var(--va-collapse-solid-box-shadow)}.va-collapse--solid .va-collapse__header__content{background-color:var(--va-collapse-solid-header-content-background-color);border-radius:var(--va-collapse-solid-header-content-border-radius,var(--va-block-border-radius));box-shadow:var(--va-collapse-solid-header-content-box-shadow,var(--va-block-box-shadow));transition:var(--va-collapse-solid-header-content-transition)}.va-collapse--solid .va-collapse__body{border-radius:var(--va-collapse-solid-body-border-radius);margin-top:var(--va-collapse-solid-body-margin-top)}.va-collapse--popout{margin:var(--va-collapse-popout-margin)}.va-collapse--inset{margin:var(--va-collapse-inset-margin)}.va-collapse--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"),P.ssrRender=function ssrRender(e,o,a,r,l,i,n,d){const c=t("va-icon");o(`<div${b(s({class:["va-collapse",e.computedClasses]},r))}><div class="va-collapse__header"${g("tabindex",e.collapseIndexComputed)}>`),y(e.$slots,"header",{value:e.valueProxy,hasKeyboardFocus:e.SetupContext.hasKeyboardFocus},(()=>{o(`<div class="va-collapse__header__content" style="${f(e.contentStyle)}">`),e.icon?o(x(c,{class:"va-collapse__header__icon",name:e.icon,color:e.textColor},null,a)):o("\x3c!----\x3e"),o(`<div class="va-collapse__header__text">${_(e.header)}</div>`),o(x(c,{class:"va-collapse__header__icon",name:e.valueProxy?"expand_less":"expand_more",color:e.textColor},null,a)),o("</div>")}),o,a),o(`</div><div class="va-collapse__body" style="${f(e.stylesComputed)}">`),y(e.$slots,"default",{},null,o,a),o("</div></div>")},P.__file="src/components/va-collapse/VaCollapse.vue";var k=e(P);export{k as default};
//# sourceMappingURL=index16.js.map
