import{w as e}from"./withConfigTransport.js";import{defineComponent as l,resolveComponent as a,mergeProps as i,withCtx as o,createTextVNode as t,ref as d,openBlock as r,createBlock as n,createVNode as p,toDisplayString as s,computed as u,onMounted as f,watch as v}from"vue";import{i as m,e as c,u as g}from"./color-config.js";import y from"./index8.js";import _ from"./index33.js";import x from"./index13.js";import h from"./index28.js";import{ssrRenderAttrs as b,ssrRenderComponent as z,ssrInterpolate as w,ssrRenderAttr as F,ssrRenderStyle as V,ssrRenderList as U,ssrIncludeBooleanAttr as j}from"@vue/server-renderer";import{s as $}from"./style-inject.es.js";import"./VaConfig.js";import"colortranslator";import"./useColor.js";import"./useRouterLink.js";import"./useSize.js";import"./useLoading.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";import"./VaIcon.js";import"./flatten.js";import"tslib";import"./vue-class-component.esm-bundler.js";import"./ColorMixin.js";import"./StatefulMixin.js";import"./useAlign.js";var I=l({name:"VaFileUploadUndo",components:{VaButton:y},emits:["recover"]});$(":root{--va-file-upload-undo-height:1.5rem;--va-file-upload-undo-button-line-height:1.1428;--va-file-upload-undo-button-margin-top:0;--va-file-upload-undo-button-margin-bottom:0;--va-file-upload-undo-margin-left:0.5rem}.va-file-upload-undo{align-items:center;display:flex;height:var(--va-file-upload-undo-height)}.va-file-upload-undo__button{line-height:var(--va-file-upload-undo-button-line-height);margin-bottom:var(--va-file-upload-undo-button-margin-bottom);margin-left:var(--va-file-upload-undo-margin-left);margin-top:var(--va-file-upload-undo-button-margin-top)}"),I.ssrRender=function ssrRender$5(e,l,d,r,n,p,s,u){const f=a("va-button");l(`<div${b(i({class:"va-file-upload-undo"},r))}><span>File was successfully deleted</span>`),l(z(f,{outline:"",size:"small",class:"va-file-upload-undo__button"},{default:o(((e,l,a,i)=>{if(!l)return[t(" Undo ")];l(" Undo ")})),_:1},d)),l("</div>")},I.__file="src/components/va-file-upload/VaFileUploadUndo/VaFileUploadUndo.vue";var S=e(I),k=l({name:"VaFileUploadListItem",components:{VaIcon:h,VaCard:x,VaFileUploadUndo:S},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"}},setup(e,{emit:l}){const a=d(!1);return{removed:a,removeFile:()=>{a.value=!0,setTimeout((()=>{a.value&&(l("remove"),a.value=!1)}),2e3)},recoverFile:()=>{a.value=!1}}}});$(":root{--va-file-upload-list-item-size-text-color:var(--va-gray)}.va-file-upload-list-item{line-height:1.5rem;max-width:100%;padding:1.125rem .5rem 1rem 1rem;width:100%}.va-file-upload-list-item+.va-file-upload-list-item{margin-top:.5rem}.va-file-upload-list-item__content{align-items:center;display:flex;justify-content:space-between}.va-file-upload-list-item__name{flex-basis:60%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.va-file-upload-list-item__size{color:var(--va-file-upload-list-item-size-text-color)}.va-file-upload-list-item__delete{cursor:pointer;font-size:1.5rem}.va-file-upload-list-item--undo{background:none;box-shadow:none}"),k.ssrRender=function ssrRender$4(e,l,t,d,u,f,v,m){const c=a("va-card"),g=a("va-file-upload-undo"),y=a("va-icon");l(z(c,i({class:["va-file-upload-list-item",{"file-upload-list-item--undo":e.removed}],stripe:e.removed,stripeColor:e.color,"no-margin":"","no-padding":""},d),{default:o(((l,a,i,o)=>{if(!a)return[e.removed?(r(),n(g,{key:0,onRecover:e.recoverFile},null,8,["onRecover"])):(r(),n("div",{key:1,class:"va-file-upload-list-item__content"},[p("div",{class:"va-file-upload-list-item__name"},s(e.file&&e.file.name),1),p("div",{class:"va-file-upload-list-item__size"},s(e.file&&e.file.size),1),p(y,{color:"danger",name:"clear",onClick:l=>e.removeFile(),class:"va-file-upload-list-item__delete"},null,8,["onClick"])]))];e.removed?a(z(g,null,null,i,o)):(a(`<div class="va-file-upload-list-item__content"${o}><div class="va-file-upload-list-item__name"${o}>${w(e.file&&e.file.name)}</div><div class="va-file-upload-list-item__size"${o}>${w(e.file&&e.file.size)}</div>`),a(z(y,{color:"danger",name:"clear",class:"va-file-upload-list-item__delete"},null,i,o)),a("</div>"))})),_:1},t))},k.__file="src/components/va-file-upload/VaFileUploadListItem/VaFileUploadListItem.vue";var L=e(k),R=l({name:"VaFileUploadGalleryItem",components:{VaFileUploadUndo:S},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"}},setup(e,{emit:l}){const a=d(""),i=d(!1),o=d(!1),t=u((()=>({backgroundColor:m(e.color,.7)}))),convertToImg=()=>{if(e.file.name&&e.file.image)if(e.file.image.url)a.value=e.file.image.url;else if(e.file.image instanceof File){const l=new FileReader;l.readAsDataURL(e.file.image),l.onload=e=>{var l,i;(null===(l=e.target)||void 0===l?void 0:l.result).includes("image")&&(a.value=null===(i=e.target)||void 0===i?void 0:i.result)}}};return f(convertToImg),v((()=>e.file),convertToImg),{previewImage:a,removed:i,isFocused:o,recoverImage:()=>{i.value=!1},overlayStyles:t,removeImage:()=>{i.value=!0,setTimeout((()=>{i.value&&(l("remove"),i.value=!1)}),2e3)}}}});$(":root{--va-file-upload-gallery-item-text:var(--va-dark);--va-file-upload-gallery-item-text-hover:var(--va-white);--va-file-upload-gallery-item-card-box-shadow:var()}.va-file-upload-gallery-item{align-items:stretch;border-radius:.375rem;display:flex;flex-basis:calc(14.2857% - 0.5rem);margin-bottom:1rem;margin-right:.5rem;max-width:calc(14.2857% - .5rem);overflow:hidden;position:relative;width:100%}@media (max-width:991.98px){.va-file-upload-gallery-item{flex-basis:calc(16.667% - 0.5rem);max-width:calc(16.667% - .5rem)}}@media (max-width:767.98px){.va-file-upload-gallery-item{flex-basis:calc(20% - 0.5rem);max-width:calc(20% - .5rem)}}@media (max-width:575.98px){.va-file-upload-gallery-item{flex-basis:calc(50% - 0.5rem);max-width:calc(50% - .5rem)}}.va-file-upload-gallery-item:last-of-type{margin-right:0}.va-file-upload-gallery-item--focused .va-file-upload-gallery-item__overlay,.va-file-upload-gallery-item:focus .va-file-upload-gallery-item__overlay,.va-file-upload-gallery-item:hover .va-file-upload-gallery-item__overlay{opacity:1;z-index:3}.va-file-upload-gallery-item--focused .va-file-upload-gallery-item__name,.va-file-upload-gallery-item:focus .va-file-upload-gallery-item__name,.va-file-upload-gallery-item:hover .va-file-upload-gallery-item__name{color:var(--va-file-upload-gallery-item-text-hover)}.va-file-upload-gallery-item__overlay{display:flex;flex-direction:column;opacity:0;padding:.5rem}.va-file-upload-gallery-item__overlay,.va-file-upload-gallery-item__overlay-background{height:100%;left:0;position:absolute;top:0;width:100%;z-index:-1}.va-file-upload-gallery-item__image{box-shadow:var(--va-box-shadow);object-fit:cover;width:100%;z-index:1}.va-file-upload-gallery-item__name{color:var(--va-file-upload-gallery-item-text);font-size:.875rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.va-file-upload-gallery-item__delete{cursor:pointer;font-size:1.5rem;margin-top:auto}.va-file-upload-gallery-item--undo{box-shadow:none}.va-file-upload-gallery-item--undo .va-file-upload-gallery-item--undo{align-items:flex-start;display:flex;flex-direction:column;font-size:.875rem;height:100%;justify-content:space-between;padding:.5rem}.va-file-upload-gallery-item--undo .va-file-upload-gallery-item--undo span{margin-right:.5rem}.va-file-upload-gallery-item--undo .va-file-upload-gallery-item--undo .va-button{margin:0}.file-upload-gallery-item_not-image .file-upload-gallery-item__overlay{display:flex}"),R.ssrRender=function ssrRender$3(e,l,o,t,d,r,n,p){const s=a("va-file-upload-undo"),u=a("va-button");e.removed?(l(`<div${b(i({class:["va-file-upload-gallery-item",{"va-file-upload-gallery-item--undo":e.removed}]},t))}>`),l(z(s,{class:"va-file-upload-gallery-item--undo"},null,o)),l("</div>")):(l(`<div${b(i({tabindex:"0",class:["va-file-upload-gallery-item",{"file-upload-gallery-item_not-image":!e.previewImage,"va-file-upload-gallery-item--focused":e.isFocused}]},t))}>`),e.previewImage?l(`<img${F("src",e.previewImage)} alt="" class="va-file-upload-gallery-item__image">`):l("\x3c!----\x3e"),l(`<div class="va-file-upload-gallery-item__overlay"><div class="va-file-upload-gallery-item__overlay-background" style="${V(e.overlayStyles)}"></div><div class="va-file-upload-gallery-item__name"${F("title",e.file.name)}>${w(e.file.name)}</div>`),l(z(u,{flat:"",color:"danger",icon:"delete_outline",class:"va-file-upload-gallery-item__delete"},null,o)),l("</div></div>"))},R.__file="src/components/va-file-upload/VaFileUploadGalleryItem/VaFileUploadGalleryItem.vue";var C=e(R),B=l({name:"VaFileUploadSingleItem",components:{VaButton:y},emits:["remove"],props:{file:{type:Object,default:null}}});$(".va-file-upload-single-item{align-items:center;display:flex;max-width:100%}.va-file-upload-single-item__name{margin-right:.25rem;max-width:80%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.va-file-upload-single-item__button{font-weight:700;margin-bottom:0;margin-top:0}"),B.ssrRender=function ssrRender$2(e,l,d,r,n,p,s,u){const f=a("va-button");l(`<div${b(i({class:"va-file-upload-single-item"},r))}><div class="va-file-upload-single-item__name">${w(e.file&&e.file.name)}</div>`),l(z(f,{flat:"",color:"danger",size:"small",class:"va-file-upload-single-item__button"},{default:o(((e,l,a,i)=>{if(!l)return[t(" Delete ")];l(" Delete ")})),_:1},d)),l("</div>")},B.__file="src/components/va-file-upload/VaFileUploadSingleItem/VaFileUploadSingleItem.vue";var T=e(B),A=l({name:"VaFileUploadList",components:{VaFileUploadListItem:L,VaFileUploadGalleryItem:C,VaFileUploadSingleItem:T},emits:["remove","removeSingle"],props:{type:{type:String,default:""},files:{type:Array,default:null},color:{type:String,default:"success"}},setup(e){const l=u((()=>e.files.map(convertFile))),convertFile=e=>({name:e.name||e.url||"",size:formatSize(e.size),date:formatDate(new Date),image:e}),formatSize=e=>{if(0===e)return"0 Bytes";if(!e)return"";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]},formatDate=(e=new Date)=>e.toLocaleDateString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric",year:"numeric"});return{filesList:l}}});$(".va-file-upload-list{display:flex;flex-wrap:wrap;padding:0 0 1.5rem}.va-file-upload-list--gallery{padding-bottom:.5rem}"),A.ssrRender=function ssrRender$1(e,l,o,t,d,r,n,p){const s=a("va-file-upload-list-item"),u=a("va-file-upload-gallery-item"),f=a("va-file-upload-single-item");l(`<div${b(i({class:["va-file-upload-list",`va-file-upload-list--${e.type}`]},t))}>`),"list"===e.type?(l("\x3c!--[--\x3e"),U(e.filesList,((a,i)=>{l(z(s,{key:a.name,file:a,color:e.color},null,o))})),l("\x3c!--]--\x3e")):l("\x3c!----\x3e"),"gallery"===e.type?(l("\x3c!--[--\x3e"),U(e.filesList,((a,i)=>{l(z(u,{file:a,key:a.name,color:e.color},null,o))})),l("\x3c!--]--\x3e")):l("\x3c!----\x3e"),"single"===e.type&&e.filesList.length?l(z(f,{file:e.filesList[e.filesList.length-1]},null,o)):l("\x3c!----\x3e"),l("</div>")},A.__file="src/components/va-file-upload/VaFileUploadList/VaFileUploadList.vue";var D=e(A),M=l({name:"VaFileUpload",components:{VaModal:_,VaButton:y,VaFileUploadList:D},props:{fileTypes:{type:String,default:""},dropzone:{type:Boolean,default:!1},color:{type:String,default:"primary"},disabled:{type:Boolean,default:!1},modelValue:{type:Array,default:()=>[],validator:e=>Array.isArray(e)},type:{type:String,default:"list",validator:e=>["list","gallery","single"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:l}){const a=d(!1),i=d(!1),o=d(null),{getColor:t}=g(),r=u((()=>t(e.color))),n=u((()=>e.dropzone?{backgroundColor:c(r.value,{a:i.value?-.82:-.92})}:{backgroundColor:"transparent"})),p=u({get:()=>e.modelValue,set(e){l("update:modelValue",e)}}),validateFiles=l=>l.filter((l=>{const i=l.name||l.url;if(!i)return!1;if(l.url)return!0;if(["audio/*","video/*","image/*"].find((l=>e.fileTypes.includes(l))))return!0;const o=i.substring(i.lastIndexOf(".")+1).toLowerCase(),t=e.fileTypes.includes(o);return t||(a.value=!0),t})),uploadFile=l=>{var a,i;const o=(null===(a=l.target)||void 0===a?void 0:a.files)||(null===(i=l.dataTransfer)||void 0===i?void 0:i.files);o&&(p.value=[...p.value,...e.fileTypes?validateFiles(Array.from(o)):o])};return f((()=>{Array.isArray(p.value)&&(p.value=validateFiles(p.value))})),{modal:a,dropzoneHighlight:i,fileInputRef:o,colorComputed:r,computedStyle:n,uploadFile:uploadFile,changeFieldValue:e=>{uploadFile(e),o.value&&(o.value.value="")},files:p,removeFile:e=>{p.value=p.value.filter(((l,a)=>a!==e))},removeSingleFile:()=>{p.value=[]},callFileDialogue:()=>{o.value&&o.value.click()}}}});$(":root{--va-file-upload-position:relative;--va-file-upload-margin:0.5rem 0;--va-file-upload-list-margin-top:1rem;--va-file-upload-dropzone-background-color:#d6ffd3;--va-file-upload-dropzone-background-color-highlight:#97f890;--va-file-upload-dropzone-overflow:hidden;--va-file-upload-dropzone-border-radius:0.375rem;--va-file-upload-dropzone-cursor:pointer;--va-file-upload-dropzone-text-padding-sm:0 0 1rem;--va-file-upload-dropzone-field-padding:1.5rem 2rem;--va-file-upload-dropzone-field-padding-sm:1.5rem 1rem;--va-file-upload-dropzone-field-overflow:hidden;--va-file-upload-dropzone-field-display:flex;--va-file-upload-dropzone-field-align-items:center;--va-file-upload-dropzone-field-position:relative;--va-file-upload-dropzone-field-button-margin:0;--va-file-upload-dropzone-field-button-z-index:10;--va-file-upload-dropzone-field-text-pr:10px;--va-file-upload-dropzone-list-padding:0 2rem 1rem}.va-file-upload{font-family:var(--va-font-family);margin:var(--va-file-upload-margin);position:var(--va-file-upload-position)}.va-file-upload .va-file-upload-list{margin-top:var(--va-file-upload-list-margin-top)}.va-file-upload--dropzone{background-color:var(--va-file-upload-dropzone-background-color);border-radius:var(--va-file-upload-dropzone-border-radius);cursor:var(--va-file-upload-dropzone-cursor);overflow:var(--va-file-upload-dropzone-overflow)}.va-file-upload--dropzone .va-file-upload__field{align-items:center;display:flex;flex-wrap:wrap;justify-content:center;overflow:visible;padding:var(--va-file-upload-dropzone-field-padding);transition:height .2s}@media (max-width:767.98px){.va-file-upload--dropzone .va-file-upload__field{flex-direction:column;padding:var(--va-file-upload-dropzone-field-padding-sm)}.va-file-upload--dropzone .va-file-upload__field__text{padding:var(--va-file-upload-dropzone-text-padding-sm);text-align:center}}.va-file-upload--dropzone .va-file-upload-list{margin-top:0;padding:var(--va-file-upload-dropzone-list-padding)}.va-file-upload__field{align-items:var(--va-file-upload-dropzone-field-align-items);display:var(--va-file-upload-dropzone-field-display);overflow:var(--va-file-upload-dropzone-field-overflow);position:var(--va-file-upload-dropzone-field-position)}.va-file-upload__field__button{margin:var(--va-file-upload-dropzone-field-button-margin);z-index:var(--va-file-upload-dropzone-field-button-z-index)}.va-file-upload__field__text{padding-right:var(--va-file-upload-dropzone-field-text-pr)}.va-file-upload__field__input{color:transparent;cursor:pointer;height:100%;opacity:0;position:absolute;right:0;top:0;width:100%}.va-file-upload__field__input::-webkit-file-upload-button{cursor:pointer}"),M.ssrRender=function ssrRender(e,l,d,r,n,p,s,u){const f=a("va-button"),v=a("va-file-upload-list"),m=a("va-modal");l(`<div${b(i({class:["va-file-upload",{"va-file-upload--dropzone":e.dropzone}],style:e.computedStyle},r))}><div class="va-file-upload__field">`),e.dropzone?l('<div class="va-file-upload__field__text"> Drag’n’drop files or </div>'):l("\x3c!----\x3e"),l(z(f,{class:"va-file-upload__field__button",disabled:e.disabled,color:e.colorComputed,icon:"","icon-right":"",style:{"pointer-events":e.dropzoneHighlight?"none":""}},{default:o(((e,l,a,i)=>{if(!l)return[t(" Upload file ")];l(" Upload file ")})),_:1},d)),l(`</div><input type="file" class="va-file-upload__field__input"${F("accept",e.fileTypes)}${j("single"!==e.type)?" multiple":""}${j(e.disabled)?" disabled":""} tabindex="-1">`),e.files.length?l(z(v,{type:e.type,files:e.files,color:e.colorComputed},null,d)):l("\x3c!----\x3e"),l(z(m,{modelValue:e.modal,"onUpdate:modelValue":l=>e.modal=l,"hide-default-actions":"",title:"File validation",message:"File type is incorrect!"},null,d)),l("</div>")},M.__file="src/components/va-file-upload/VaFileUpload.vue";var G=e(M);export{C as VaFileUploadGalleryItem,D as VaFileUploadList,L as VaFileUploadListItem,T as VaFileUploadSingleItem,S as VaFileUploadUndo,G as default};
//# sourceMappingURL=index26.js.map
