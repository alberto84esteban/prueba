import{ref as e,onMounted as t,onBeforeUnmount as r,watch as a,computed as n,unref as o,defineComponent as i,resolveComponent as l,mergeProps as s,nextTick as p,toRefs as u,createSlots as c,withCtx as d,openBlock as v,createBlock as m,createCommentVNode as b,withModifiers as g,renderSlot as _,renderList as f}from"vue";import{u as h}from"./useForm.js";import{V as x,u as y,a as w,b as k}from"./index60.js";import V from"cleave.js";import{u as $}from"./useEmitProxy.js";import{g as C}from"./color-config.js";import{ssrRenderAttrs as z,ssrRenderSlot as I,ssrRenderStyle as R,ssrInterpolate as P,ssrRenderComponent as B}from"@vue/server-renderer";import{s as S}from"./style-inject.es.js";import{p as E}from"./pick.js";import{s as j,o as F}from"./VaIcon.js";import{f as M,e as A}from"./child-props.js";const L={creditCard:{creditCard:!0},date:{date:!0,datePattern:["d","m","Y"]},time:{time:!0,timePattern:["h","m"],timeFormat:"24"},numeral:{numeral:!0,numeralThousandsGroupStyle:"thousand"}},H={mask:{type:[String,Object],default:""},returnRaw:{type:Boolean,default:!0},modelValue:{type:String}},useCleave=(o,i,l)=>{const s=e(),destroyCleave=()=>{s.value&&s.value.destroy()},initCleave=()=>{var e;(destroyCleave(),o.value)&&(s.value=new V(o.value,"string"==typeof(e=i.mask)?L[e]?{...L[e]}:{}:{...e}))};t((()=>{initCleave()})),r((()=>{destroyCleave()})),a((()=>[o.value,i.mask]),(()=>{initCleave()}));const p=n((()=>s.value&&i.returnRaw&&i.modelValue===s.value.getRawValue()?s.value.getFormattedValue():i.modelValue));return{cleave:s,computedValue:p,onInput:e=>{const t=e.target.value;("string"===i.mask||Object.keys(i.mask).length)&&s.value&&(s.value.setRawValue(t),i.returnRaw)?l("update:modelValue",s.value.getRawValue()):l("update:modelValue",t)}}};var q=i({name:"VaInputWrapper",components:{VaMessageList:x},props:{...h,...y,label:{type:String,default:""},color:{type:String,default:"primary"},outline:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},error:{type:Boolean,default:!1},success:{type:Boolean,default:!1},requiredMark:{type:Boolean,default:!1}},emits:["click","click-prepend","click-append","click-prepend-inner","click-append-inner","click-icon"],setup(e){const{createModifiersClasses:t}=(r="va-input",{createModifiersClasses:(e,t=[])=>n((()=>{const a=e();return[r,...o(t),...Object.keys(a).filter((e=>a[e])).map((e=>`${r}--${e}`))]}))});var r;const a=n((()=>C(e.color)));return{wrapperClass:t((()=>({outline:e.outline,bordered:e.bordered,solid:!e.outline&&!e.bordered,disabled:e.disabled,readonly:e.readonly,labeled:!!e.label,success:e.success,focused:e.focused,error:e.error}))),colorComputed:a,borderColorComputed:n((()=>e.focused?a.value:void 0)),messagesColor:n((()=>e.error?"danger":e.success?"success":"")),messagesComputed:n((()=>e.error?e.errorMessages:e.messages)),errorLimit:n((()=>e.error?e.errorCount:99))}}});S(":root{--va-input-color:var(--va-background,#f5f9fb);--va-input-text-color:var(--va-dark,#262824);--va-input-scroll-color:var(--va-divided,#e1e9f8);--va-input-bordered-color:var(--va-divided,#e1e9f8);--va-input-border-width:1px;--va-input-border-radius:4px;--va-input-min-height:36px;--va-input-cursor:text;--va-message-list-color:var(--va-gray);--va-input-success-color:var(--va-success);--va-input-success-background:#f1f7ee;--va-input-error-color:var(--va-danger);--va-input-error-background:#fdefef;--va-input-content-horizontal-padding:12px;--va-input-content-items-gap:6px;--va-input-line-height:20px;--va-input-font-size:1rem;--va-input-font-weight:normal;--va-input-font-style:normal;--va-input-font-stretch:normal;--va-input-letter-spacing:normal;--va-input-placeholder-text-color:#bac2bb;--va-input-disabled-opacity:0.4;--va-input-container-label-max-width:calc(100% - 0.75rem);--va-input-container-label-color:#4ae387;--va-input-container-label-font-size:0.6rem;--va-input-container-label-letter-spacing:0.0375rem;--va-input-container-label-line-height:1.2;--va-input-container-label-font-weight:700;--va-input-container-label-text-transform:uppercase;--va-input-container-label-transform-origin:top left}.va-input{color:var(--va-input-text-color);cursor:var(--va-input-cursor);font-family:var(--va-font-family);position:relative}.va-input--readonly{cursor:default}.va-input--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-input__container{align-items:center;border:var(--va-input-border-width) solid var(--va-input-color);display:flex;min-height:var(--va-input-min-height);overflow:hidden;padding:0 var(--va-input-content-horizontal-padding);position:relative;width:100%}.va-input__container>*{line-height:0;padding-right:var(--va-input-content-items-gap)}.va-input__container>:last-child{padding-right:0}.va-input-wrapper__input{align-items:center;display:flex}.va-input-wrapper__message-list-wrapper{margin-top:2px}.va-input-wrapper__content{flex-grow:1;position:relative}.va-input-wrapper__append-inner,.va-input-wrapper__prepend-inner,.va-input__append-inner,.va-input__prepend-inner{align-content:center;align-items:center;display:flex;justify-content:center}.va-input__content-wrapper{align-items:center;display:flex;width:100%}.va-input__content-wrapper .va-input__content{position:relative;width:100%}.va-input__content-wrapper .va-input__content input{cursor:inherit}.va-input__content-wrapper .va-input__content__input{background-color:transparent;border-style:none;color:var(--va-input-text-color);font-family:inherit;font-size:var(--va-input-font-size);font-stretch:var(--va-input-font-stretch);font-style:var(--va-input-font-style);font-weight:var(--va-input-font-weight);letter-spacing:var(--va-input-letter-spacing);line-height:var(--va-input-line-height);min-height:var(--va-input-line-height);outline:none;scrollbar-color:var(--va-input-scroll-color) transparent;scrollbar-width:thin;transform:translateY(-1px);width:100%}.va-input__content-wrapper .va-input__content__input::-webkit-scrollbar{height:4px;width:4px}.va-input__content-wrapper .va-input__content__input::-webkit-scrollbar-track{border-radius:10px;box-shadow:none}.va-input__content-wrapper .va-input__content__input::-webkit-scrollbar-thumb{background:var(--va-input-scroll-color);border-radius:2px;opacity:.3}.va-input__content-wrapper .va-input__content__input::-webkit-scrollbar{width:10px}.va-input__content-wrapper .va-input__content__input::-moz-placeholder{color:var(--va-input-placeholder-text-color)}.va-input__content-wrapper .va-input__content__input:-ms-input-placeholder{color:var(--va-input-placeholder-text-color)}.va-input__content-wrapper .va-input__content__input::placeholder{color:var(--va-input-placeholder-text-color)}.va-input__content-wrapper .va-input__content__input:disabled{opacity:var(--va-input-disabled-opacity)}.va-input__icons{align-items:center;display:flex;justify-content:center}.va-input__icons>*{margin-right:calc(var(--va-input-content-items-gap)/4)}.va-input__icons>:last-child{margin-right:0}.va-input__required-mark{color:var(--va-danger);font-size:18px;font-weight:var(--va-input-container-label-font-weight);transform:translateY(-2px)}.va-input textarea{margin:12px 0;resize:vertical}.va-input--labeled .va-input__content-wrapper{align-items:flex-end;height:100%;padding-top:12px}.va-input--labeled .va-input__label{color:var(--va-input-container-label-color);display:flex;font-size:var(--va-input-container-label-font-size);font-weight:var(--va-input-container-label-font-weight);height:12px;left:0;letter-spacing:var(--va-input-container-label-letter-spacing,var(--va-letter-spacing));line-height:var(--va-input-container-label-line-height);max-width:var(--va-input-container-label-max-width);overflow:hidden;padding-top:1px;position:absolute;text-overflow:ellipsis;text-transform:var(--va-input-container-label-text-transform);top:0;transform:translateY(-100%);transform-origin:top left;white-space:nowrap}.va-input--labeled textarea{margin-top:0}.va-input--solid .va-input__container{background:var(--va-input-color);border-color:var(--va-input-color);border-radius:var(--va-input-border-radius)}.va-input--solid.va-input--success .va-input__container{background:var(--va-input-success-background);border-color:var(--va-input-success-color)}.va-input--solid.va-input--error .va-input__container{background:var(--va-input-error-background);border-color:var(--va-input-error-color)}.va-input--outline .va-input__container{border-color:var(--va-input-bordered-color);border-radius:0}.va-input--outline.va-input--success .va-input__container{background:var(--va-input-success-background);border-color:var(--va-input-success-color)}.va-input--outline.va-input--error .va-input__container{background:var(--va-input-error-background);border-color:var(--va-input-error-color)}.va-input--bordered__border{border-bottom:var(--va-input-border-width) solid;border-color:var(--va-input-bordered-color);bottom:0;height:0;position:absolute;width:100%}.va-input--bordered .va-input__container{background:var(--va-input-color);border-color:transparent!important;border-top-left-radius:var(--va-input-border-radius);border-top-right-radius:var(--va-input-border-radius)}.va-input--bordered.va-input--success .va-input__container{background:var(--va-input-success-background)}.va-input--bordered.va-input--success .va-input_bordered__border{border-color:var(--va-input-success-color)}.va-input--bordered.va-input--error .va-input__container{background:var(--va-input-error-background)}.va-input--bordered.va-input--error .va-input_bordered__border{border-color:var(--va-input-error-color)}"),q.ssrRender=function ssrRender$2(e,t,r,a,n,o,i,p){const u=l("va-message-list");t(`<div${z(s({class:["va-input-wrapper",e.wrapperClass]},a))}><div class="va-input-wrapper__input">`),e.$slots.prepend?(t('<div class="va-input-wrapper__prepend-inner">'),I(e.$slots,"prepend",{},null,t,r),t("</div>")):t("\x3c!----\x3e"),t(`<div class="va-input-wrapper__content"><div class="va-input__container" style="${R({borderColor:e.borderColorComputed})}">`),e.$slots.prependInner?(t('<div class="va-input__prepend-inner">'),I(e.$slots,"prependInner",{},null,t,r),t("</div>")):t("\x3c!----\x3e"),t('<div class="va-input__content-wrapper"><div class="va-input__content">'),e.label?(t(`<label aria-hidden="true" class="va-input__label" style="${R({color:e.colorComputed})}">${P(e.label)} `),e.requiredMark?t('<span class="va-input__required-mark"> * </span>'):t("\x3c!----\x3e"),t("</label>")):t("\x3c!----\x3e"),e.$slots.content?(t('<div class="va-input__content__input">'),I(e.$slots,"content",{},null,t,r),t("</div>")):t("\x3c!----\x3e"),I(e.$slots,"default",{},null,t,r),t("</div></div>"),e.$slots.icon?(t('<div class="va-input__icons">'),I(e.$slots,"icon",{},null,t,r),t("</div>")):t("\x3c!----\x3e"),e.$slots.appendInner?(t('<div class="va-input__append-inner">'),I(e.$slots,"appendInner",{},null,t,r),t("</div>")):t("\x3c!----\x3e"),t("</div>"),e.bordered?t(`<div class="va-input--bordered__border" style="${R({borderColor:e.borderColorComputed})}"></div>`):t("\x3c!----\x3e"),t("</div>"),e.$slots.append?(t('<div class="va-input-wrapper__append-inner">'),I(e.$slots,"append",{},null,t,r),t("</div>")):t("\x3c!----\x3e"),t('</div><div class="va-input-wrapper__message-list-wrapper">'),I(e.$slots,"messages",{messages:e.messagesComputed,errorLimit:e.errorLimit,color:e.messagesColor},(()=>{t(B(u,{color:e.messagesColor,"model-value":e.messagesComputed,limit:e.errorLimit},null,r))}),t,r),t("</div></div>")},q.__file="src/components/va-input/components/VaInputWrapper.vue";const T={clearable:{type:Boolean,default:!1},clearableIcon:{type:String,default:"highlight_off"},clearValue:{type:String,default:""}},N=["clear"],useClearable=(e,t,r,a)=>{const o=[null,void 0,e.clearValue],i=n((()=>e.clearable&&!e.disabled&&!e.readonly&&!o.includes(t.value))),l=n((()=>(null==r?void 0:r.value)?e.color||"primary":(null==a?void 0:a.value)?"danger":e.success?"success":"gray")),s=n((()=>({name:e.clearableIcon,color:l.value,size:"small"})));return{canBeCleared:i,clearIconColor:l,clearIconProps:s}},O=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],getNodeHeightStyles=e=>{const t=window.getComputedStyle(e);return{boxSizing:t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),padding:parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),border:parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),styles:O.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";")+";",lineHeight:parseInt(t.getPropertyValue("line-height"))}};let W=null;const createHiddenTextarea=(e,t)=>{W||(W=document.createElement("textarea")),W.setAttribute("style",t+"\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important';\n"),W.value=e.value||e.placeholder||"";const r=e.getAttribute("wrap");return null!==r?W.setAttribute("wrap",r):W.removeAttribute("wrap"),W},positiveNumberValidator=e=>{if(e>0&&(0|e)===e)return!0;throw new Error(`\`minRows|maxRows\` must be a positive integer greater than 0, but ${e} is provided`)},{createEmits:Y,createListeners:G}=$(["input","change","click","update:modelValue"]);var D=i({name:"VaTextarea",props:{...h,modelValue:{type:[String,Number],default:""},placeholder:{type:String},autosize:{type:Boolean,default:!1},minRows:{type:Number,default:1,validator:positiveNumberValidator},maxRows:{type:Number,validator:positiveNumberValidator}},emits:Y(),setup(r,{emit:o}){const i=e(),l=e(-1),s=e(-1),{calculateRowHeight:u,calculateHeight:c}=(e=>({calculateRowHeight:()=>e.value?getNodeHeightStyles(e.value).lineHeight:0,calculateHeight:()=>{if(!e.value)return 0;const{boxSizing:t,padding:r,border:a,styles:n}=getNodeHeightStyles(e.value),o=createHiddenTextarea(e.value,n);document.body.appendChild(o);let i=o.scrollHeight;return"border-box"===t?i+=a:"content-box"===t&&(i-=r),document.body.removeChild(o),i}}))(i),d=n((()=>(r.autosize||r.maxRows||1!==r.minRows)&&i.value)),updateHeight=()=>{d.value&&(s.value=c())};t((()=>{d.value&&(l.value=u()),updateHeight()})),a((()=>r.modelValue),(()=>{p(updateHeight)}));const v=n((()=>({minHeight:l.value*r.minRows+"px",maxHeight:r.maxRows&&l.value*r.maxRows+"px",height:s.value+"px",resize:d.value&&"none"}))),m=n((()=>({...E(r,["disabled","readonly","placeholder"])})));return{textarea:i,computedStyle:v,listeners:G(o),computedProps:m}},methods:{focus(){var e;null===(e=this.textarea)||void 0===e||e.focus()},blur(){var e;null===(e=this.textarea)||void 0===e||e.blur()}}});S(".textarea{border:0;font-family:var(--va-font-family);padding:0}"),D.ssrRender=function ssrRender$1(e,t,r,a,n,o,i,l){let p;t(`<textarea${z(p=s({ref:"textarea",class:"textarea"},{...e.computedProps,...e.listeners},{value:e.modelValue,style:e.computedStyle},a),"textarea")}>${P("value"in p?p.value:"")}</textarea>`)},D.__file="src/components/va-input/components/VaTextarea/VaTextarea.vue";const J=A(D),{createEmits:K,createListeners:Q}=$(["change","keyup","keypress","keydown","focus","blur"]),{createEmits:U,createListeners:X}=$(["click","click-prepend","click-append","click-prepend-inner","click-append-inner","click-icon"]);var Z=i({name:"VaInput",components:{VaInputWrapper:q,VaTextarea:D,VaIcon:j},props:{...h,...y,...T,...H,...J,placeholder:{type:String,default:""},tabindex:{type:Number,default:0},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},type:{type:String,default:"text"},loading:{type:Boolean,default:!1},color:{type:String,default:"primary"},outline:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},requiredMark:{type:Boolean,default:!1}},emits:["update:modelValue",...w,...N,...K(),...U()],inheritAttrs:!1,setup(t,{emit:r,attrs:a,slots:o}){const i=e(),reset=()=>{r("update:modelValue",t.clearValue),r("clear")},l=n((()=>{const e=["icon"];return Object.keys(o).filter((t=>!e.includes(t)))})),{isFocused:s,listeners:p,computedError:c,computedErrorMessages:d}=k(t,r,reset,(()=>{var e;null===(e=i.value)||void 0===e||e.focus()})),{modelValue:v}=u(t),{canBeCleared:m,clearIconProps:b}=useClearable(t,v,s,c),g=n((()=>"textarea"===t.type?void 0:i.value)),{computedValue:_,onInput:f}=useCleave(g,t,r),h=Q(r),x={...h,onFocus:e=>{h.onFocus(e),p.onFocus()},onBlur:e=>{h.onBlur(e),p.onBlur()},onInput:f},y=n((()=>({ariaLabel:t.label,...F(a,["class","style"])}))),w=n((()=>({...y.value,...E(t,["type","tabindex","disabled","readonly","placeholder"])})));return{input:i,inputEvents:x,computedChildAttributes:y,computedInputAttributes:w,textareaProps:M(t,J),computedValue:_,computedError:c,computedErrorMessages:d,isFocused:s,canBeCleared:m,clearIconProps:b,fieldListeners:X(r),reset:reset,filterSlots:l}},methods:{focus(){var e;null===(e=this.input)||void 0===e||e.focus()},blur(){var e;null===(e=this.input)||void 0===e||e.blur()}}});Z.ssrRender=function ssrRender(e,t,r,a,n,o,i,p){const u=l("VaInputWrapper"),h=l("va-icon"),x=l("VaTextarea");t(B(u,s(e.fieldListeners,{class:e.$attrs.class,style:e.$attrs.style,color:e.color,readonly:e.readonly,disabled:e.disabled,success:e.success,messages:e.messages,error:e.computedError,"error-messages":e.computedErrorMessages,"error-count":e.errorCount,label:e.label,bordered:e.bordered,outline:e.outline,focused:e.isFocused,requiredMark:e.requiredMark},a),c({icon:d(((t,r,a,n)=>{if(!r)return[e.success?(v(),m(h,{key:0,color:"success",name:"check_circle",size:"small"})):b("v-if",!0),e.computedError?(v(),m(h,{key:1,color:"danger",name:"warning",size:"small"})):b("v-if",!0),e.canBeCleared?(v(),m(h,s({key:2},e.clearIconProps,{onClick:g((t=>e.reset()),["stop"])}),null,16,["onClick"])):b("v-if",!0),e.loading?(v(),m(h,{key:3,color:e.color,size:"small",name:"loop",spin:"counter-clockwise"},null,8,["color"])):b("v-if",!0),_(e.$slots,"icon",t)];e.success?r(B(h,{color:"success",name:"check_circle",size:"small"},null,a,n)):r("\x3c!----\x3e"),e.computedError?r(B(h,{color:"danger",name:"warning",size:"small"},null,a,n)):r("\x3c!----\x3e"),e.canBeCleared?r(B(h,e.clearIconProps,null,a,n)):r("\x3c!----\x3e"),e.loading?r(B(h,{color:e.color,size:"small",name:"loop",spin:"counter-clockwise"},null,a,n)):r("\x3c!----\x3e"),I(e.$slots,"icon",t,null,r,a,n)})),default:d(((t,r,a,n)=>{if(!r)return["textarea"!==e.type||e.$slots.content?e.$slots.content?b("v-if",!0):(v(),m("input",s({key:1,ref:"input",class:"va-input__content__input"},{...e.computedInputAttributes,...e.inputEvents},{value:e.computedValue}),null,16,["value"])):(v(),m(x,s({key:0,ref:"input"},{...e.computedChildAttributes,...e.textareaProps,...e.inputEvents},{class:"va-input__content__input"}),null,16))];"textarea"!==e.type||e.$slots.content?e.$slots.content?r("\x3c!----\x3e"):r(`<input${z(s({ref:"input",class:"va-input__content__input"},{...e.computedInputAttributes,...e.inputEvents},{value:e.computedValue}))}${n}>`):r(B(x,s({ref:"input"},{...e.computedChildAttributes,...e.textareaProps,...e.inputEvents},{class:"va-input__content__input"}),null,a,n))})),_:2},[f(e.filterSlots,(t=>({name:t,fn:d(((r,a,n,o)=>{if(!a)return[_(e.$slots,e.name,r)];I(e.$slots,t,r,null,a,n,o)}))})))]),r))},Z.__file="src/components/va-input/VaInput.vue";export{N as a,useClearable as b,Z as s,T as u};
//# sourceMappingURL=VaInput.js.map
