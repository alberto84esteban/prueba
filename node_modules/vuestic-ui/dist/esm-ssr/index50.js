import{w as o}from"./withConfigTransport.js";import{defineComponent as a,ref as e,provide as t,onMounted as r,inject as l,nextTick as i,onUnmounted as s,createVNode as n,resolveDynamicComponent as v,mergeProps as u,withCtx as f,renderSlot as d}from"vue";import{F as m}from"./consts.js";import{ssrRenderVNode as c,ssrRenderSlot as h}from"@vue/server-renderer";import{s as p}from"./style-inject.es.js";import"./VaConfig.js";const isVaForm=o=>!!o.focusInvalid;var V=a({name:"VaForm",emits:["validation"],props:{autofocus:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(o,{emit:a}){const n=e([]),parentFormProvider=()=>l(m,void 0);t(m,{onChildMounted:o=>childMountedHandler(o),onChildUnmounted:o=>childUnmountedHandler(o)});const childMountedHandler=o=>{n.value.push(o)},childUnmountedHandler=o=>{n.value=n.value.filter((a=>a!==o))},focus=()=>{var o;null===(o=n.value.find((({focus:o})=>o)))||void 0===o||o.focus()},v={reset:()=>{n.value.filter((({reset:o})=>o)).forEach((o=>{o.reset()}))},resetValidation:()=>{n.value.filter((({resetValidation:o})=>o)).forEach((o=>{o.resetValidation()}))},focus:focus,focusInvalid:()=>{const o=n.value.find((o=>!isVaForm(o)&&o.hasError()));o?o.focus():n.value.forEach((o=>isVaForm(o)&&o.focusInvalid()))},validate:()=>{const o=n.value.filter((({validate:o})=>o)).map((o=>o.validate())).every((o=>o));return a("validation",o),o}};return r((()=>{var a,e;null===(e=null===(a=parentFormProvider())||void 0===a?void 0:a.onChildMounted)||void 0===e||e.call(a,v),o.autofocus&&i(focus)})),s((()=>{var o,a;null===(a=null===(o=parentFormProvider())||void 0===o?void 0:o.onChildUnmounted)||void 0===a||a.call(o,v)})),v},methods:{reset(){var o;null===(o=this.form)||void 0===o||o.reset()},resetValidation(){var o;null===(o=this.form)||void 0===o||o.resetValidation()},focus(){var o;null===(o=this.form)||void 0===o||o.focus()},focusInvalid(){var o;null===(o=this.form)||void 0===o||o.focusInvalid()},validate(){var o;null===(o=this.form)||void 0===o||o.validate()}}});p(".va-form{font-family:var(--va-font-family)}"),V.ssrRender=function ssrRender(o,a,e,t,r,l,i,s){c(a,n(v(o.tag),u({ref:"form",class:"va-form"},t),{default:f(((a,e,t,r)=>{if(!e)return[d(o.$slots,"default")];h(o.$slots,"default",{},null,e,t,r)})),_:3}),e)},V.__file="src/components/va-form/VaForm.vue";var y=o(V);export{y as default};
//# sourceMappingURL=index50.js.map
