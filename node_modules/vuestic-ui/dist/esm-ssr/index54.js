import{w as e}from"./withConfigTransport.js";import{ref as o,defineComponent as n,computed as r,watch as t,resolveComponent as s,mergeProps as l,withCtx as p,createSlots as a,renderSlot as i,openBlock as d,createBlock as u,createCommentVNode as c,renderList as m,createVNode as f,withKeys as w,withModifiers as v}from"vue";import{s as g,o as I}from"./VaIcon.js";import{s as h}from"./VaTimePicker.js";import{s as V,a as y,u as k,b as D}from"./VaInput.js";import{a as P,s as j}from"./VaDropdownContent.js";import{u as S}from"./useSyncProp.js";import{a as C,u as T,b as $}from"./index60.js";import{e as O,f as b}from"./child-props.js";import{g as _}from"./utils.js";import{ssrRenderComponent as x,ssrRenderSlot as M}from"@vue/server-renderer";import"./VaConfig.js";import"./flatten.js";import"./color-config.js";import"colortranslator";import"./useSize.js";import"./style-inject.es.js";import"./useFocus.js";import"./cStatefulMixin.js";import"./useForm.js";import"cleave.js";import"./useEmitProxy.js";import"./pick.js";import"tslib";import"./vue-class-component.esm-bundler.js";import"asva-executors";import"@popperjs/core";import"./StatefulMixin.js";import"./consts.js";import"./useColor.js";const defaultParseDateFunction=e=>{const o=new Date,[n,r,t]=(e=>{const o=e.match(/[0-9]{1,2}/g);return o?o.map((e=>Number(e))):[]})(e),s=(e=>{const o=e.match(/pm|am/i);return o?Number("pm"===o[0].toLowerCase()):null})(e);if(!n)return null;const l=null!==s&&n<=12,p=l&&!!s,a=l&&12===n?0:n;return o.setHours(Math.min(a||0,l?12:24)+(p?12:0)),o.setMinutes(Math.min(r||0,60)),o.setSeconds(Math.min(t||0,60)),o},useTimeParser=e=>{const n=o(!0),parseDate=o=>{const r=(e.parse||defaultParseDateFunction)(o);return r||(n.value=!1),r};return{parse:e=>(n.value=!0,parseDate(e)),isValid:n}},E=[".va-input-wrapper__prepend-inner",".va-input__prepend-inner",".va-input__append-inner",".va-input-wrapper__append-inner"];var B=n({name:"VaTimeInput",components:{VaDropdown:P,VaDropdownContent:j,VaTimePicker:h,VaIcon:g,VaInput:V},emits:[...C,...y,"update:modelValue","update:isOpen"],props:{...O(h),...O(V),...T,...k,isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:String,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}},inheritAttrs:!1,setup(e,{emit:n,attrs:s,slots:l}){const p=o(),a=o(),i=_(),d=_(),[u]=S("isOpen",e,n,!1),[c]=S("modelValue",e,n),{parse:m,isValid:f}=useTimeParser(e),{format:w}=(e=>{const formatDate=o=>o?e.ampm?o.toLocaleTimeString("en-US"):o.toLocaleTimeString("en-GB"):"",sliceTime=(e,o,n)=>e.split(":").slice(o,n).join(":");return{format:o=>{if("seconds"===e.view)return formatDate(o);const[n,r]=formatDate(o).split(" ");return"minutes"===e.view?r?[sliceTime(n,0,2),r].join(" "):sliceTime(n,0,2):"hours"===e.view?r?[sliceTime(n,0,1),r].join(" "):sliceTime(n,0,1):""}}})(e),v=r((()=>f.value&&c.value?e.format?e.format(c.value):w(c.value):e.clearValue)),g=b(e,O(h)),y=b(e,O(V,["rules","error","errorMessages","clearable"])),k=r((()=>({ariaLabel:e.label,...I(s,["class","style"])}))),P=r((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(l).filter((e=>!o.includes(e)))})),reset=()=>{n("update:modelValue",e.clearValue),n("clear")},focus=()=>{var e;null===(e=p.value)||void 0===e||e.focus()},{isFocused:j,computedError:C,computedErrorMessages:T}=$(e,n,reset,focus),x=r((()=>!f.value&&v.value!==e.clearValue||C.value)),{canBeCleared:M,clearIconProps:B}=D(e,v,j,x),U=r((()=>({name:e.icon,color:e.color,size:"small"})));t(c,(()=>{f.value=!0}));const hideDropdown=()=>{u.value=!1,focus()},showDropdown=()=>{e.disabled||e.readonly||(u.value=!0)},dropdownToggle=()=>{u.value?hideDropdown():showDropdown()};return{input:p,timePicker:a,clearIconId:i,componentIconId:d,timePickerProps:g,computedInputProps:y,computedInputAttrs:k,isOpenSync:u,modelValueSync:c,valueText:v,onInputTextChanged:e=>{const o=m(e);f.value&&o&&(c.value=o)},reset:reset,onValueInput:e=>{!e&&reset()},canBeCleared:M,iconProps:U,clearIconProps:B,filterSlots:P,hideDropdown:hideDropdown,showDropdown:showDropdown,dropdownToggle:dropdownToggle,computedError:C,computedErrorMessages:T,hasError:x,handleComponentClick:o=>{var n,r;const t=null===(n=o.target)||void 0===n?void 0:n.id;if(t===i)return focus();if(t===d)return null===(r=a.value)||void 0===r?void 0:r.focus();return E.some((e=>{var n;return!!(null===(n=o.target)||void 0===n?void 0:n.closest(e))}))?void 0:e.manualInput?u.value&&hideDropdown():void dropdownToggle()}}},methods:{focus(){var e;null===(e=this.input)||void 0===e||e.focus()},blur(){var e;null===(e=this.input)||void 0===e||e.blur()}}});B.ssrRender=function ssrRender(e,o,n,r,t,g,I,h){const V=s("va-dropdown"),y=s("va-input"),k=s("va-icon"),D=s("va-dropdown-content"),P=s("va-time-picker");o(x(V,l({class:["va-time-input",e.$attrs.class],style:e.$attrs.style,modelValue:e.isOpenSync,"onUpdate:modelValue":o=>e.isOpenSync=o,offset:[0,1],"close-on-content-click":!1,disabled:e.$props.disabled,position:"bottom-start",anchorSelector:".va-input__container",stateful:!1,trigger:"none"},r),{anchor:p(((o,n,r,t)=>{if(!n)return[f(y,l({ref:"input"},{...e.computedInputProps,...e.computedInputAttrs},{modelValue:e.valueText,readonly:e.$props.readonly||!e.$props.manualInput,error:e.hasError,"error-messages":e.computedErrorMessages,"required-mark":e.$props.requiredMark,onChange:o=>e.onInputTextChanged(o.target.value),"onUpdate:modelValue":e.onValueInput}),a({prependInner:p((o=>[i(e.$slots,"prependInner",{...o,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}),e.$props.leftIcon?(d(),u(k,l({key:0,id:e.componentIconId},e.iconProps,{onClick:o=>e.dropdownToggle()}),null,16,["id","onClick"])):c("v-if",!0)])),icon:p((()=>[e.canBeCleared?(d(),u(k,l({key:0,id:e.clearIconId},e.clearIconProps,{onClick:o=>e.reset()}),null,16,["id","onClick"])):e.$props.leftIcon?c("v-if",!0):(d(),u(k,l({key:1,id:e.componentIconId},e.iconProps,{onClick:o=>e.dropdownToggle()}),null,16,["id","onClick"]))])),_:2},[m(e.filterSlots,(o=>({name:o,fn:p((n=>[i(e.$slots,o,{...n,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})]))})))]),1040,["modelValue","readonly","error","error-messages","required-mark","onChange","onUpdate:modelValue"])];n(x(y,l({ref:"input"},{...e.computedInputProps,...e.computedInputAttrs},{modelValue:e.valueText,readonly:e.$props.readonly||!e.$props.manualInput,error:e.hasError,"error-messages":e.computedErrorMessages,"required-mark":e.$props.requiredMark}),a({prependInner:p(((o,n,r,t)=>{if(!n)return[i(e.$slots,"prependInner",{...o,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}),e.$props.leftIcon?(d(),u(k,l({key:0,id:e.componentIconId},e.iconProps,{onClick:o=>e.dropdownToggle()}),null,16,["id","onClick"])):c("v-if",!0)];M(e.$slots,"prependInner",{...o,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus},null,n,r,t),e.$props.leftIcon?n(x(k,l({id:e.componentIconId},e.iconProps),null,r,t)):n("\x3c!----\x3e")})),icon:p(((o,n,r,t)=>{if(!n)return[e.canBeCleared?(d(),u(k,l({key:0,id:e.clearIconId},e.clearIconProps,{onClick:o=>e.reset()}),null,16,["id","onClick"])):e.$props.leftIcon?c("v-if",!0):(d(),u(k,l({key:1,id:e.componentIconId},e.iconProps,{onClick:o=>e.dropdownToggle()}),null,16,["id","onClick"]))];e.canBeCleared?n(x(k,l({id:e.clearIconId},e.clearIconProps),null,r,t)):e.$props.leftIcon?n("\x3c!----\x3e"):n(x(k,l({id:e.componentIconId},e.iconProps),null,r,t))})),_:2},[m(e.filterSlots,(o=>({name:o,fn:p(((n,r,t,s)=>{if(!r)return[i(e.$slots,e.name,{...n,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})];M(e.$slots,o,{...n,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus},null,r,t,s)}))})))]),r,t))})),default:p(((o,n,r,t)=>{if(!n)return[f(D,{"no-padding":"",onKeydown:w(v((o=>e.hideDropdown()),["prevent"]),["esc"])},{default:p((()=>[f(P,l({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o=>e.modelValueSync=o}),null,16,["modelValue","onUpdate:modelValue"])])),_:1},8,["onKeydown"])];n(x(D,{"no-padding":""},{default:p(((o,n,r,t)=>{if(!n)return[f(P,l({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o=>e.modelValueSync=o}),null,16,["modelValue","onUpdate:modelValue"])];n(x(P,l({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o=>e.modelValueSync=o}),null,r,t))})),_:1},r,t))})),_:3},n))},B.__file="src/components/va-time-input/VaTimeInput.vue";const U=e(B);export{U as VaTimeInput};
//# sourceMappingURL=index54.js.map
